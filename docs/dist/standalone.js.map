{"version":3,"file":"standalone.js","mappings":";kEAAAA,EAAOC,QAAUC,K,sBCAhB,IAAWC,EAAoOC,KAApOD,EAA0OE,GAAG,MAAM,aAAa,IAAIF,EAAE,CAAC,IAAI,CAACE,EAAEF,EAAEG,KAAKA,EAAEC,EAAEJ,EAAE,CAACK,QAAQ,IAAIC,IAAI,IAAIC,EAAEJ,EAAE,KAAKK,EAAEL,EAAE,IAAIM,EAAEN,EAAEM,EAAED,GAAG,SAASE,EAAER,EAAEF,EAAE,IAAIW,SAAS,GAAG,iBAAiBT,GAAG,OAAOA,EAAE,OAAOA,EAAE,GAAGF,EAAEY,IAAIV,GAAG,OAAOF,EAAEa,IAAIX,GAAG,MAAMC,EAAEW,MAAMC,QAAQb,GAAG,GAAG,CAAC,EAAEF,EAAEgB,IAAId,EAAEC,GAAG,MAAMI,EAAEU,QAAQC,QAAQhB,GAAG,IAAI,MAAMM,KAAKD,EAAEJ,EAAEK,GAAGE,EAAER,EAAEM,GAAGR,GAAG,OAAOG,CAAC,CAAC,MAAMG,EAAE,WAAAa,GAAc,IAAIjB,GAAE,EAAGK,EAAEa,GAAGC,KAAK,aAAQ,IAAQ,EAAGd,EAAEa,GAAGC,KAAK,iBAAY,IAAQ,EAAGd,EAAEa,GAAGC,KAAK,aAAQ,IAAQ,EAAGd,EAAEa,GAAGC,KAAK,aAAQ,IAAQ,EAAGd,EAAEa,GAAGC,KAAK,qBAAgB,IAAQ,EAAGd,EAAEa,GAAGC,KAAK,gBAAW,IAAQ,EAAGd,EAAEa,GAAGC,KAAK,cAAenB,IAAImB,KAAKC,UAAUL,QAAQC,QAAQhB,GAAGqB,OAAO,CAAEvB,EAAEG,KAAK,MAAMI,EAAEJ,EAAE,OAAOkB,KAAKG,MAAMjB,GAAGL,EAAEK,GAAG,IAAIP,EAAE,CAACG,GAAG,GAAI,EAAE,CAAC,EAAG,IAAG,EAAGI,EAAEa,GAAGC,KAAK,YAAanB,IAAI,MAAMF,EAAE,CAAC,EAAE,OAAOiB,QAAQC,QAAQhB,GAAGuB,QAAStB,IAAI,MAAMI,EAAEJ,EAAEkB,KAAKC,UAAUf,KAAKc,KAAKC,UAAUf,GAAG,IAAIc,KAAKC,UAAUf,GAAGmB,KAAKxB,EAAEK,IAAIP,EAAEO,GAAGL,EAAEK,EAAG,GAAG,KAAKU,QAAQC,QAAQlB,GAAGyB,QAASvB,IAAI,MAAMC,EAAED,EAAEmB,KAAKC,UAAUnB,GAAGkB,KAAKC,UAAUnB,GAAGwB,OAAQzB,GAAGA,IAAIF,EAAEG,GAAK,GAAI,IAAG,EAAGI,EAAEa,GAAGC,KAAK,OAAO,CAAEnB,EAAEF,KAAKqB,KAAKO,MAAM,IAAIP,KAAKO,SAAS1B,GAAGF,EAAEqB,KAAKQ,WAAWC,aAAaT,KAAKU,OAAOV,KAAKU,MAAMC,WAAWX,KAAKQ,SAAU,IAAG,EAAGtB,EAAEa,GAAGC,KAAK,WAAW,CAAEnB,KAAKF,IAAIE,EAAE,CAAC+B,SAASZ,KAAKY,SAASC,KAAKhC,GAAGmB,KAAKa,KAAKhC,GAAE,OAAQF,KAAK,EAAGO,EAAEa,GAAGC,KAAK,UAAU,KAAM,MAAMnB,EAAEmB,KAAKO,MAAM5B,EAAE,GAAGG,EAAEc,QAAQC,QAAQhB,GAAG,IAAI,IAAIK,EAAE,EAAEA,EAAEJ,EAAEgC,OAAO5B,GAAG,EAAE,CAAC,MAAMC,EAAEL,EAAEI,GAAG,GAAGE,IAAIY,KAAKG,MAAMhB,GAAGN,EAAEM,IAAI,SAAS,MAAMF,EAAEJ,EAAEM,GAAG4B,EAAEf,KAAKG,MAAMhB,GAAGa,KAAKG,MAAMhB,GAAGE,EAAER,EAAEM,IAAIR,EAAE0B,KAAK,CAACW,IAAI7B,EAAE8B,SAAShC,EAAEiC,SAASH,GAAG,CAAC,MAAM7B,EAAE,CAAC,EAAEP,EAAEyB,QAASvB,IAAIK,EAAEL,EAAEmC,KAAK,CAACnC,EAAEoC,SAASpC,EAAEqC,UAAUlB,KAAKC,UAAUpB,EAAEmC,MAAMhB,KAAKC,UAAUpB,EAAEmC,KAAKZ,QAASzB,GAAGA,EAAEE,EAAEoC,SAASpC,EAAEqC,UAAY,GAAGvC,EAAEmC,QAAQd,KAAKmB,cAAcjC,GAAGc,KAAKO,MAAM,CAAC,EAAEP,KAAKU,WAAM,CAAO,GAAGV,KAAKG,MAAM,CAAC,EAAEH,KAAKC,UAAU,CAAC,EAAED,KAAKO,MAAM,CAAC,EAAEP,KAAKU,WAAM,EAAOV,KAAKmB,cAAc,IAAI,KAAKnB,KAAKY,UAAU/B,EAAEmB,KAAKG,MAAM,SAASxB,GAAG,OAAOA,EAAEU,EAAER,EAAEF,IAAIE,CAAC,EAAE,CAAC,YAAIuC,CAASvC,GAAGmB,KAAKmB,cAActC,CAAC,IAAI,GAAGA,IAAIA,EAAEJ,QAAQ,SAASI,EAAEF,EAAEG,GAAG,GAAGH,IAAIG,EAAE,OAAM,EAAG,GAAGH,GAAGG,GAAG,iBAAiBH,GAAG,iBAAiBG,EAAE,CAAC,GAAGH,EAAEmB,cAAchB,EAAEgB,YAAY,OAAM,EAAG,IAAIZ,EAAEC,EAAEC,EAAE,GAAGK,MAAMC,QAAQf,GAAG,CAAC,IAAIO,EAAEP,EAAEmC,SAAShC,EAAEgC,OAAO,OAAM,EAAG,IAAI3B,EAAED,EAAE,GAAGC,KAAK,IAAIN,EAAEF,EAAEQ,GAAGL,EAAEK,IAAI,OAAM,EAAG,OAAM,CAAE,CAAC,GAAGR,EAAEmB,cAAcuB,OAAO,OAAO1C,EAAE2C,SAASxC,EAAEwC,QAAQ3C,EAAE4C,QAAQzC,EAAEyC,MAAM,GAAG5C,EAAE6C,UAAUC,OAAOC,UAAUF,QAAQ,OAAO7C,EAAE6C,YAAY1C,EAAE0C,UAAU,GAAG7C,EAAEgD,WAAWF,OAAOC,UAAUC,SAAS,OAAOhD,EAAEgD,aAAa7C,EAAE6C,WAAW,IAAIzC,GAAGE,EAAEqC,OAAOG,KAAKjD,IAAImC,UAAUW,OAAOG,KAAK9C,GAAGgC,OAAO,OAAM,EAAG,IAAI3B,EAAED,EAAE,GAAGC,KAAK,IAAIsC,OAAOC,UAAUG,eAAeC,KAAKhD,EAAEM,EAAED,IAAI,OAAM,EAAG,IAAIA,EAAED,EAAE,GAAGC,KAAK,CAAC,IAAIE,EAAED,EAAED,GAAG,IAAIN,EAAEF,EAAEU,GAAGP,EAAEO,IAAI,OAAM,CAAE,CAAC,OAAM,CAAE,CAAC,OAAOV,GAAGA,GAAGG,GAAGA,CAAC,GAAG,IAAIH,IAAIA,EAAEF,QAAQI,GAAG,IAAI,CAACA,EAAEF,EAAEG,KAAK,SAASI,EAAEL,EAAEF,EAAEG,GAAG,OAAOH,KAAKE,EAAE4C,OAAOM,eAAelD,EAAEF,EAAE,CAACqD,MAAMlD,EAAEmD,YAAW,EAAGC,cAAa,EAAGC,UAAS,IAAKtD,EAAEF,GAAGG,EAAED,CAAC,CAACC,EAAEC,EAAEJ,EAAE,CAACoB,EAAE,IAAIb,MAAMJ,EAAE,CAAC,EAAE,SAASI,EAAEL,GAAG,IAAIM,EAAEL,EAAED,GAAG,QAAG,IAASM,EAAE,OAAOA,EAAEV,QAAQ,IAAIW,EAAEN,EAAED,GAAG,CAACJ,QAAQ,CAAC,GAAG,OAAOE,EAAEE,GAAGO,EAAEA,EAAEX,QAAQS,GAAGE,EAAEX,OAAO,CAACS,EAAEE,EAAEP,IAAI,IAAIF,EAAEE,GAAGA,EAAEuD,WAAW,IAAIvD,EAAEG,QAAQ,IAAIH,EAAE,OAAOK,EAAEH,EAAEJ,EAAE,CAAC0D,EAAE1D,IAAIA,GAAGO,EAAEH,EAAE,CAACF,EAAEF,KAAK,IAAI,IAAIG,KAAKH,EAAEO,EAAEC,EAAER,EAAEG,KAAKI,EAAEC,EAAEN,EAAEC,IAAI2C,OAAOM,eAAelD,EAAEC,EAAE,CAACmD,YAAW,EAAGzC,IAAIb,EAAEG,MAAMI,EAAEC,EAAE,CAACN,EAAEF,IAAI8C,OAAOC,UAAUG,eAAeC,KAAKjD,EAAEF,GAAG,IAAIQ,EAAE,CAAC,EAAE,MAAM,MAAMD,EAAEH,EAAEI,EAAE,CAACH,QAAQ,IAAI+B,IAAI,IAAIlC,EAAEK,EAAE,KAAKP,EAAEO,EAAE,KAAKJ,EAAEI,EAAE,KAAKE,EAAEF,EAAEE,EAAEN,GAAG,MAAMO,EAAE,CAAC,OAAO,YAAY,SAAS,YAAY,eAAe,2BAA2B,eAAe,eAAe,MAAMJ,UAAUN,EAAEK,QAAQ,WAAAc,IAAenB,GAAG2D,SAAS3D,IAAG,EAAGE,EAAEkB,GAAGC,KAAK,UAAU,SAASrB,GAAG,MAAMiC,SAAS1B,EAAEqD,UAAUpD,GAAGR,EAAE,OAAO,YAAYA,GAAG,OAAO,SAASM,GAAG,MAAM8B,UAAUjC,EAAE0D,UAAU,WAAA1C,CAAYhB,GAAGwD,MAAMxD,IAAG,EAAGD,EAAEkB,GAAGC,KAAK,mBAAc,IAAQ,EAAGnB,EAAEkB,GAAGC,KAAK,QAAQ,CAACyC,MAAMvD,MAAMc,KAAK0C,YAAYvD,EAAER,EAAEuB,OAAO,CAAErB,EAAEF,KAAI,IAAKE,EAAE,CAACF,GAAG,KAAKqB,KAAK2C,SAAS,CAACF,MAAMvD,SAAU,CAAC,GAAG,CAAC,oBAAA0D,GAAuB5C,KAAK0C,aAAa,CAAC,MAAAG,GAAS,MAAMJ,MAAM5D,GAAGmB,KAAKG,MAAMxB,EAAE,IAAIE,KAAKmB,KAAKyC,OAAO,OAAOrD,IAAI0D,cAAc7D,EAAEN,EAAE,EAAE,OAAO8C,OAAOsB,oBAAoB9D,GAAGmB,QAASvB,IAAI,MAAMF,EAAEE,EAAEQ,EAAE2D,SAASnE,KAAKkC,EAAEpC,GAAGM,EAAEN,GAAI,GAAGoC,CAAC,CAAC,CAAC,CAAtgB,CAAwgBf,QAAO,EAAGnB,EAAEkB,GAAGC,KAAK,WAAW,SAASnB,GAAG,MAAM+B,SAASjC,EAAE4D,UAAUrD,GAAGL,EAAE,OAAO,YAAYA,GAAG,MAAMM,EAAEC,IAAG,EAAGN,EAAEmE,UAAUtE,KAAK,OAAM,EAAGG,EAAEoE,iBAAiB,IAAKhE,EAAEL,EAAEqB,OAAO,CAAErB,EAAEC,KAAI,IAAKD,EAAE,CAACC,GAAG,KAAKM,EAAGP,IAAG,IAAKA,EAAE,CAACC,GAAGH,IAAIG,SAAW,CAAC,KAAMK,CAAC,CAAC,CAA9M,CAAgNa,MAAM,EAAE,MAAMe,EAAE9B,CAAE,EAAthC,GAA0hCE,EAAEH,OAAQ,EAAniI,GAAxLR,EAAOC,QAAQE,EAAE,EAAQ,K,iBCS1F,IAAIwE,UAAWC,QAASC,QACvB,SAAUC,OAAQ3C,YACf,IAAI4C,IAAKrE,EAAGsE,KAAMC,YAAaC,SAAUC,IACrCC,kBAAmBC,sBAAuBC,WAAYC,QACtDC,QAAU,QACVC,cAAgB,wCAChBC,iBAAmB,iDACnBC,eAAiB,QACjBC,cAAgB,QAChBC,GAAK5C,OAAOC,UACZ4C,QAAUD,GAAG1C,SACb4C,OAASF,GAAGxC,eACZ2C,YAAiC,oBAAXC,QAA+C,oBAAdC,YAA6BD,OAAOE,UAC3FC,aAAeJ,WAAsC,oBAAlBK,cAKnCC,YAAcN,WAAoC,kBAAvBE,UAAUK,SACvB,aAAe,sBAC7BC,eAAiB,IAEjBC,QAA2B,oBAAVC,OAA8C,mBAArBA,MAAMvD,WAChDwD,SAAW,CAAC,EACZC,IAAM,CAAC,EACPC,eAAiB,GACjBC,gBAAiB,EAGrB,SAASC,eAAeC,EAAOC,GAC3B,OAAOA,GAAgB,EAC3B,CAEA,SAASC,WAAWC,GAChB,MAA4B,sBAArBrB,QAAQxC,KAAK6D,EACxB,CAEA,SAASjG,QAAQiG,GACb,MAA4B,mBAArBrB,QAAQxC,KAAK6D,EACxB,CAMA,SAASC,KAAKC,EAAKC,GAEX,IAAIzG,EADR,GAAIwG,EAEA,IAAKxG,EAAI,EAAGA,EAAIwG,EAAI/E,UACZ+E,EAAIxG,KAAMyG,EAAKD,EAAIxG,GAAIA,EAAGwG,IADNxG,GAAK,GAMzC,CAMA,SAAS0G,YAAYF,EAAKC,GAElB,IAAIzG,EADR,GAAIwG,EAEA,IAAKxG,EAAIwG,EAAI/E,OAAS,EAAGzB,GAAK,KACtBwG,EAAIxG,KAAMyG,EAAKD,EAAIxG,GAAIA,EAAGwG,IADDxG,GAAK,GAM9C,CAEA,SAAS2G,QAAQC,EAAKC,GAClB,OAAO3B,OAAOzC,KAAKmE,EAAKC,EAC5B,CAEA,SAASC,OAAOF,EAAKC,GACjB,OAAOF,QAAQC,EAAKC,IAASD,EAAIC,EACrC,CAOA,SAASE,SAASH,EAAKH,GACnB,IAAII,EACJ,IAAKA,KAAQD,EACT,GAAID,QAAQC,EAAKC,IACTJ,EAAKG,EAAIC,GAAOA,GAChB,KAIhB,CAMA,SAASG,MAAMC,EAAQhF,EAAQiF,EAAOC,GAkBlC,OAjBIlF,GACA8E,SAAS9E,EAAQ,SAAUU,EAAOkE,IAC1BK,GAAUP,QAAQM,EAAQJ,MACtBM,GAAoC,iBAAVxE,IAAsBA,GAC/CtC,QAAQsC,IAAW0D,WAAW1D,IAC7BA,aAAiBX,OAOnBiF,EAAOJ,GAAQlE,GALVsE,EAAOJ,KACRI,EAAOJ,GAAQ,CAAC,GAEpBG,MAAMC,EAAOJ,GAAOlE,EAAOuE,EAAOC,IAK9C,GAEGF,CACX,CAIA,SAASG,KAAKR,EAAKS,GACf,OAAO,WACH,OAAOA,EAAGC,MAAMV,EAAKW,UACzB,CACJ,CAEA,SAASC,UACL,OAAOlC,SAASmC,qBAAqB,SACzC,CAEA,SAASC,eAAeC,GACpB,MAAMA,CACV,CAIA,SAASC,UAAUjF,GACf,IAAKA,EACD,OAAOA,EAEX,IAAIkF,EAAI5D,OAIR,OAHAsC,KAAK5D,EAAMmF,MAAM,KAAM,SAAUC,GAC7BF,EAAIA,EAAEE,EACV,GACOF,CACX,CAUA,SAASG,UAAUC,EAAIC,EAAKP,EAAKQ,GAC7B,IAAI7I,EAAI,IAAI8I,MAAMF,EAAM,4CAA8CD,GAMtE,OALA3I,EAAE+I,YAAcJ,EAChB3I,EAAE6I,eAAiBA,EACfR,IACArI,EAAEgJ,cAAgBX,GAEfrI,CACX,CAEA,QAAsB,IAAX0E,OAAX,CAMA,QAAyB,IAAdF,UAA2B,CAClC,GAAIuC,WAAWvC,WAEX,OAEJiC,IAAMjC,UACNA,eAAYyE,CAChB,MAGuB,IAAZxE,SAA4BsC,WAAWtC,WAE9CgC,IAAMhC,QACNA,aAAUwE,GAgiDdrE,IAAMJ,UAAY,SAAU0E,EAAMC,EAAUC,EAASC,GAGjD,IAAIC,EAASC,EACTC,EAAcnD,eA6BlB,OA1BKtF,QAAQmI,IAAyB,iBAATA,IAEzBK,EAASL,EACLnI,QAAQoI,IAERD,EAAOC,EACPA,EAAWC,EACXA,EAAUC,GAEVH,EAAO,IAIXK,GAAUA,EAAOD,UACjBE,EAAcD,EAAOD,UAGzBA,EAAU9B,OAAOhB,SAAUgD,MAEvBF,EAAU9C,SAASgD,GAAe5E,IAAIrE,EAAEkJ,WAAWD,IAGnDD,GACAD,EAAQI,UAAUH,GAGfD,EAAQ7E,QAAQyE,EAAMC,EAAUC,EAC3C,EAMAxE,IAAI2E,OAAS,SAAUA,GACnB,OAAO3E,IAAI2E,EACf,EAQA3E,IAAI+E,cAAiC,IAAf3H,WAA6B,SAAU+F,GACzD/F,WAAW+F,EAAI,EACnB,EAAI,SAAUA,GAAMA,GAAM,EAKrBtD,UACDA,QAAUG,KAGdA,IAAIS,QAAUA,QAGdT,IAAIgF,YAAc,iBAClBhF,IAAIiB,UAAYA,UAChBtF,EAAIqE,IAAIrE,EAAI,CACRiG,SAAUA,SACViD,WAAYA,YAIhB7E,IAAI,CAAC,GAGLqC,KAAK,CACD,QACA,QACA,UACA,aACD,SAAUM,GAIT3C,IAAI2C,GAAQ,WACR,IAAIsC,EAAMrD,SAASH,gBACnB,OAAOwD,EAAIpF,QAAQ8C,GAAMS,MAAM6B,EAAK5B,UACxC,CACJ,GAEIpC,YACAhB,KAAOtE,EAAEsE,KAAOmB,SAASmC,qBAAqB,QAAQ,GAItDrD,YAAckB,SAASmC,qBAAqB,QAAQ,GAChDrD,cACAD,KAAOtE,EAAEsE,KAAOC,YAAYgF,aASpClF,IAAImF,QAAU3B,eAKdxD,IAAIoF,WAAa,SAAUT,EAAQU,EAAYC,GAC3C,IAAIC,EAAOZ,EAAOa,MACVpE,SAASqE,gBAAgB,+BAAgC,eACzDrE,SAAS7B,cAAc,UAI/B,OAHAgG,EAAKG,KAAOf,EAAOgB,YAAc,kBACjCJ,EAAKK,QAAU,QACfL,EAAKM,OAAQ,EACNN,CACX,EAWAvF,IAAI8F,KAAO,SAAUpB,EAASW,EAAYC,GACtC,IACIC,EADAZ,EAAUD,GAAWA,EAAQC,QAAW,CAAC,EAE7C,GAAI1D,UAoEA,OAlEAsE,EAAOvF,IAAIoF,WAAWT,EAAQU,EAAYC,IAErCS,aAAa,sBAAuBrB,EAAQE,aACjDW,EAAKQ,aAAa,qBAAsBV,IAUpCE,EAAKS,aAQCT,EAAKS,YAAY5H,UAAYmH,EAAKS,YAAY5H,WAAW6H,QAAQ,gBAAkB,GACpFvE,SAqBL6D,EAAKW,iBAAiB,OAAQxB,EAAQyB,cAAc,GACpDZ,EAAKW,iBAAiB,QAASxB,EAAQ0B,eAAe,KAhBtDrE,gBAAiB,EAEjBwD,EAAKS,YAAY,qBAAsBtB,EAAQyB,eAgBnDZ,EAAKnF,IAAMkF,EAIPX,EAAO0B,eACP1B,EAAO0B,cAAcd,EAAMZ,EAAQU,EAAYC,GAOnDhF,sBAAwBiF,EACpBrF,YACAD,KAAKqG,aAAaf,EAAMrF,aAExBD,KAAKsG,YAAYhB,GAErBjF,sBAAwB,KAEjBiF,EACJ,GAAIlE,YACP,IAWIjE,WAAW,WAAY,EAAG,GAC1BkE,cAAcgE,GAGdZ,EAAQ8B,aAAanB,EACzB,CAAE,MAAOjK,GACLsJ,EAAQS,QAAQrB,UAAU,gBACV,4BACIuB,EAAa,OAASC,EAC1BlK,EACA,CAACiK,IACrB,CAER,EAgBIpE,YAAcY,IAAI4E,cAElBjE,YAAYc,UAAW,SAAUoD,GAW7B,GARKzG,OACDA,KAAOyG,EAAOxB,YAMlB/E,SAAWuG,EAAOC,aAAa,aA8B3B,OA3BApG,WAAaJ,SAKR0B,IAAI+E,UAAwC,IAA7BrG,WAAW0F,QAAQ,OAGnC7F,IAAMG,WAAWqD,MAAM,KACvBrD,WAAaH,IAAIyG,MACjBrG,QAAUJ,IAAI7C,OAAS6C,IAAI0G,KAAK,KAAQ,IAAM,KAE9CjF,IAAI+E,QAAUpG,SAKlBD,WAAaA,WAAWwG,QAAQnG,eAAgB,IAG5CZ,IAAIgF,YAAYgC,KAAKzG,cACrBA,WAAaJ,UAIjB0B,IAAIyC,KAAOzC,IAAIyC,KAAOzC,IAAIyC,KAAK2C,OAAO1G,YAAc,CAACA,aAE9C,CAEf,GAUJT,OAAS,SAAUoH,EAAM5C,EAAMC,GAC3B,IAAIgB,EAAMb,EAGU,iBAATwC,IAEP3C,EAAWD,EACXA,EAAO4C,EACPA,EAAO,MAIN/K,QAAQmI,KACTC,EAAWD,EACXA,EAAO,OAKNA,GAAQnC,WAAWoC,KACpBD,EAAO,GAIHC,EAAShH,SACTgH,EACKnG,WACA2I,QAAQrG,cAAesB,gBACvB+E,QAAQpG,iBAAkB,SAAUsB,EAAOkF,GACxC7C,EAAKxH,KAAKqK,EACd,GAOJ7C,GAA4B,IAApBC,EAAShH,OAAe,CAAC,WAAa,CAAC,UAAW,UAAW,WAAW0J,OAAO3C,KAM3FvC,iBACAwD,EAAOjF,uBAAyB8G,0BAEvBF,IACDA,EAAO3B,EAAKoB,aAAa,uBAE7BjC,EAAU9C,SAAS2D,EAAKoB,aAAa,yBAUzCjC,GACAA,EAAQ2C,SAASvK,KAAK,CAACoK,EAAM5C,EAAMC,IACnCG,EAAQ4C,YAAYJ,IAAQ,GAE5BpF,eAAehF,KAAK,CAACoK,EAAM5C,EAAMC,GAEzC,EAEAzE,OAAOyH,IAAM,CACTC,QAAQ,GASZxH,IAAIyH,KAAO,SAAUC,MAEjB,OAAOC,KAAKD,KAChB,EAGA1H,IAAI6B,KAEJ9B,OAAOH,UAAYG,OAAOF,QAAUG,IACpCD,OAAOD,OAASA,MA96DhB,CAkBA,SAAS+E,WAAWD,GAChB,IAAIgD,EAAeC,EAAQnD,EAASoD,EAChCC,EACApD,EAAS,CAILqD,YAAa,EACbpB,QAAS,KACTqB,MAAO,CAAC,EACRC,QAAS,CAAC,EACVC,KAAM,CAAC,EACPC,KAAM,CAAC,EACPzD,OAAQ,CAAC,GAEb0D,EAAW,CAAC,EAIZC,EAAkB,CAAC,EACnBC,EAAc,CAAC,EACflB,EAAW,GACXmB,EAAU,CAAC,EACXC,EAAa,CAAC,EACdC,EAAa,CAAC,EACdC,EAAiB,EACjBC,EAAsB,EA4C1B,SAASC,EAAU3B,EAAM4B,EAAUC,GAC/B,IAAaC,EAAUC,EAAWnN,EAAGoN,EAAGC,EAAaC,EACjDC,EAAUC,EAAQC,EAAcC,EAChCC,EAAaX,GAAYA,EAASlF,MAAM,KACxC8F,EAAM/E,EAAO+E,IACbC,EAAUD,GAAOA,EAAI,KA+BzB,GA5BIxC,IAEAkC,GADAlC,EAAOA,EAAKtD,MAAM,MACDrG,OAAS,EAMtBoH,EAAOiF,cAAgBhJ,eAAeoG,KAAKE,EAAKkC,MAChDlC,EAAKkC,GAAalC,EAAKkC,GAAWrC,QAAQnG,eAAgB,KAIpC,MAAtBsG,EAAK,GAAG2C,OAAO,IAAcJ,IAO7BvC,EADsBuC,EAAUK,MAAM,EAAGL,EAAUlM,OAAS,GACjC0J,OAAOC,IA7D9C,SAAkB5E,GACd,IAAIxG,EAAG+H,EACP,IAAK/H,EAAI,EAAGA,EAAIwG,EAAI/E,OAAQzB,IAExB,GAAa,OADb+H,EAAOvB,EAAIxG,IAEPwG,EAAIyH,OAAOjO,EAAG,GACdA,GAAK,OACF,GAAa,OAAT+H,EAAe,CAMtB,GAAU,IAAN/H,GAAkB,IAANA,GAAsB,OAAXwG,EAAI,IAA+B,OAAfA,EAAIxG,EAAI,GACnD,SACOA,EAAI,IACXwG,EAAIyH,OAAOjO,EAAI,EAAG,GAClBA,GAAK,EAEb,CAER,CA2CQkO,CAAS9C,GACTA,EAAOA,EAAKJ,KAAK,MAIjBiC,GAAYW,IAAQD,GAAaE,GAAU,CAG3CM,EAAW,IAAKnO,GAFhBmN,EAAY/B,EAAKtD,MAAM,MAEOrG,OAAQzB,EAAI,EAAGA,GAAK,EAAG,CAGjD,GAFAqN,EAAcF,EAAUa,MAAM,EAAGhO,GAAGgL,KAAK,KAErC2C,EAGA,IAAKP,EAAIO,EAAUlM,OAAQ2L,EAAI,EAAGA,GAAK,EAKnC,IAJAF,EAAWpG,OAAO8G,EAAKD,EAAUK,MAAM,EAAGZ,GAAGpC,KAAK,SAK9CkC,EAAWpG,OAAOoG,EAAUG,IACd,CAEVE,EAAWL,EACXM,EAASxN,EACT,MAAMmO,CACV,EAQPV,GAAgBI,GAAW/G,OAAO+G,EAASR,KAC5CI,EAAe3G,OAAO+G,EAASR,GAC/BK,EAAQ1N,EAEhB,EAEKuN,GAAYE,IACbF,EAAWE,EACXD,EAASE,GAGTH,IACAJ,EAAUc,OAAO,EAAGT,EAAQD,GAC5BnC,EAAO+B,EAAUnC,KAAK,KAE9B,CAMA,OAFUlE,OAAO+B,EAAOwD,KAAMjB,IAEHA,CAC/B,CAEA,SAASgD,EAAahD,GACdjG,WACAoB,KAAKiB,UAAW,SAAU6G,GACtB,GAAIA,EAAWxD,aAAa,wBAA0BO,GAC9CiD,EAAWxD,aAAa,yBAA2BjC,EAAQE,YAE/D,OADAuF,EAAWjF,WAAWkF,YAAYD,IAC3B,CAEf,EAER,CAEA,SAASE,EAAgBtG,GACrB,IAAIuG,EAAa1H,OAAO+B,EAAOsD,MAAOlE,GACtC,GAAIuG,GAAcnO,QAAQmO,IAAeA,EAAW/M,OAAS,EAYzD,OATA+M,EAAWC,QACX7F,EAAQ7E,QAAQ2K,MAAMzG,GAItBW,EAAQ+F,YAAY,KAAM,CACtBC,SAAS,GADbhG,CAEG,CAACX,KAEG,CAEf,CAKA,SAAS4G,EAAYzD,GACjB,IAAI0D,EACAC,EAAQ3D,EAAOA,EAAKjB,QAAQ,MAAQ,EAKxC,OAJI4E,GAAS,IACTD,EAAS1D,EAAK4D,UAAU,EAAGD,GAC3B3D,EAAOA,EAAK4D,UAAUD,EAAQ,EAAG3D,EAAK3J,SAEnC,CAACqN,EAAQ1D,EACpB,CAiBA,SAAS6D,EAAc7D,EAAM8D,EAAiBC,EAAclC,GACxD,IAAIzD,EAAK4F,EAAcC,EAAQlC,EAC3B2B,EAAS,KACTQ,EAAaJ,EAAkBA,EAAgB9D,KAAO,KACtDmE,EAAenE,EACfoE,GAAW,EACXC,EAAiB,GA+DrB,OA3DKrE,IACDoE,GAAW,EACXpE,EAAO,OAASyB,GAAkB,IAItCiC,GADA3B,EAAY0B,EAAYzD,IACL,GACnBA,EAAO+B,EAAU,GAEb2B,IACAA,EAAS/B,EAAU+B,EAAQQ,EAAYrC,GACvCmC,EAAetI,OAAO4F,EAASoC,IAI/B1D,IACI0D,EAEIW,EADAN,EACiB/D,EACVgE,GAAgBA,EAAarC,UAEnBqC,EAAarC,UAAU3B,EAAM,SAAUA,GACpD,OAAO2B,EAAU3B,EAAMkE,EAAYrC,EACvC,IASwC,IAAvB7B,EAAKjB,QAAQ,KACb4C,EAAU3B,EAAMkE,EAAYrC,GAC5B7B,GAUrB0D,GADA3B,EAAY0B,EALZY,EAAiB1C,EAAU3B,EAAMkE,EAAYrC,KAM1B,GACnBwC,EAAiBtC,EAAU,GAC3BgC,GAAe,EAEf3F,EAAMZ,EAAQ8G,UAAUD,KAWzB,CACHX,OAAQA,EACR1D,KAAMqE,EACNE,UAAWT,EACXU,gBARJP,GAASP,GAAWM,GAAiBD,EAE5B,GADA,iBAAmBrC,GAAuB,IAQ/CtD,IAAKA,EACL+F,aAAcA,EACdC,SAAUA,EACVvH,IAAK6G,EACGA,EAAS,IAAMW,EACfA,GAAkBJ,EAElC,CAEA,SAASQ,EAAUC,GACf,IAAI7H,EAAK6H,EAAO7H,GACZ8H,EAAMjJ,OAAOyF,EAAUtE,GAM3B,OAJK8H,IACDA,EAAMxD,EAAStE,GAAM,IAAIW,EAAQmD,OAAO+D,IAGrCC,CACX,CAEA,SAASC,EAAGF,EAAQ1E,EAAM/D,GACtB,IAAIY,EAAK6H,EAAO7H,GACZ8H,EAAMjJ,OAAOyF,EAAUtE,IAEvBtB,QAAQ+F,EAASzE,IACX8H,IAAOA,EAAIE,oBAKjBF,EAAMF,EAAUC,IACRI,OAAkB,UAAT9E,EACb/D,EAAG0I,EAAIG,OAEPH,EAAIC,GAAG5E,EAAM/D,GARJ,YAAT+D,GACA/D,EAAGqF,EAAQzE,GAUvB,CAEA,SAASoB,EAAQ1B,EAAKe,GAClB,IAAIyH,EAAMxI,EAAIQ,eACViI,GAAW,EAEX1H,EACAA,EAAQf,IAERpB,KAAK4J,EAAK,SAAUlI,GAChB,IAAI8H,EAAMjJ,OAAOyF,EAAUtE,GACvB8H,IAEAA,EAAIG,MAAQvI,EACRoI,EAAIM,OAAOH,QACXE,GAAW,EACXL,EAAIvO,KAAK,QAASmG,IAG9B,GAEKyI,GACDlM,IAAImF,QAAQ1B,GAGxB,CAMA,SAAS2I,IAEDtK,eAAevE,SACf8E,KAAKP,eAAgB,SAASuK,GAC1B,IAAItI,EAAKsI,EAAU,GACD,iBAAPtI,IACPW,EAAQ4C,YAAYvD,IAAM,GAE9BsD,EAASvK,KAAKuP,EAClB,GACAvK,eAAiB,GAEzB,CAoCA,SAASwK,EAAcvI,UAEZsE,EAAStE,UACTuE,EAAgBvE,EAC3B,CAEA,SAASwI,EAAWV,EAAKW,EAAQC,GAC7B,IAAI1I,EAAK8H,EAAInC,IAAI3F,GAEb8H,EAAIG,MACJH,EAAIvO,KAAK,QAASuO,EAAIG,QAEtBQ,EAAOzI,IAAM,EACb1B,KAAKwJ,EAAIa,QAAS,SAAUd,EAAQ9P,GAChC,IAAI6Q,EAAQf,EAAO7H,GACfoD,EAAMvE,OAAOyF,EAAUsE,IAMvBxF,GAAQ0E,EAAIe,WAAW9Q,IAAO2Q,EAAUE,KACpC/J,OAAO4J,EAAQG,IACfd,EAAIgB,UAAU/Q,EAAG0M,EAAQmE,IACzBd,EAAIiB,SAEJP,EAAWpF,EAAKqF,EAAQC,GAGpC,GACAA,EAAU1I,IAAM,EAExB,CAEA,SAASgJ,IACL,IAAItJ,EAAKuJ,EACLC,EAAoC,IAArBtI,EAAOqD,YAEtBkF,EAAUD,GAAiBvI,EAAQyI,UAAYF,GAAgB,IAAIG,MAAOC,UAC1EC,EAAU,GACVC,EAAW,GACXC,GAAe,EACfC,GAAiB,EAGrB,IAAI7F,EAAJ,CA6CA,GAzCAA,GAAgB,EAGhB/E,SAASyF,EAAiB,SAAUuD,GAChC,IAAInC,EAAMmC,EAAInC,IACVgE,EAAQhE,EAAI3F,GAGhB,GAAK8H,EAAI8B,UAIJjE,EAAI4B,UACLiC,EAASzQ,KAAK+O,IAGbA,EAAIG,OAGL,IAAKH,EAAI+B,QAAUV,EACX7C,EAAgBqD,IAChBV,GAAoB,EACpBQ,GAAe,IAEfF,EAAQxQ,KAAK4Q,GACbxD,EAAawD,SAEd,IAAK7B,EAAI+B,QAAU/B,EAAIgC,SAAWnE,EAAI4B,WACzCkC,GAAe,GACV9D,EAAIkB,QAML,OAAQ6C,GAAiB,CAIzC,GAEIP,GAAWI,EAAQ/P,OAInB,OAFAkG,EAAMK,UAAU,UAAW,6BAA+BwJ,EAAS,KAAMA,IACrE1I,YAAcF,EAAQE,YACnBO,EAAQ1B,GAIfgK,GACApL,KAAKkL,EAAU,SAAU1B,GACrBU,EAAWV,EAAK,CAAC,EAAG,CAAC,EACzB,GAMEqB,IAAWF,IAAsBQ,IAG9BvM,YAAaI,aAAiB0G,IAC/BA,EAAuB3K,WAAW,WAC9B2K,EAAuB,EACvBgF,GACJ,EAAG,KAIXnF,GAAgB,CAvEhB,CAwEJ,CA2dA,SAASkG,EAAcC,GAEdtL,QAAQ+F,EAASuF,EAAK,KACvBpC,EAAUZ,EAAcgD,EAAK,GAAI,MAAM,IAAOC,KAAKD,EAAK,GAAIA,EAAK,GAEzE,CAEA,SAASE,EAAe1I,EAAMhD,EAAM2E,EAAMgH,GAIlC3I,EAAK4I,cAAgBzM,QAGjBwM,GACA3I,EAAK4I,YAAYD,EAAQ3L,GAG7BgD,EAAK6I,oBAAoBlH,EAAM3E,GAAM,EAE7C,CAQA,SAAS8L,EAAcC,GAInB,IAAI/I,EAAO+I,EAAIC,eAAiBD,EAAIE,WAMpC,OAHAP,EAAe1I,EAAMb,EAAQyB,aAAc,OAAQ,sBACnD8H,EAAe1I,EAAMb,EAAQ0B,cAAe,SAErC,CACHb,KAAMA,EACNxB,GAAIwB,GAAQA,EAAKoB,aAAa,sBAEtC,CAEA,SAAS8H,IACL,IAAIV,EAMJ,IAHA3B,IAGO/E,EAAS9J,QAAQ,CAEpB,GAAgB,QADhBwQ,EAAO1G,EAASkD,SACP,GACL,OAAOpF,EAAQrB,UAAU,WAAY,yCACjCiK,EAAKA,EAAKxQ,OAAS,KAIvBuQ,EAAcC,EAEtB,CACArJ,EAAQ4C,YAAc,CAAC,CAC3B,CAoeA,OAvpCAQ,EAAW,CACP,QAAW,SAAU+D,GACjB,OAAIA,EAAIhM,QACGgM,EAAIhM,QAEHgM,EAAIhM,QAAU6E,EAAQ+F,YAAYoB,EAAInC,IAEtD,EACA,QAAW,SAAUmC,GAEjB,GADAA,EAAI6C,cAAe,EACf7C,EAAInC,IAAI4B,SACR,OAAIO,EAAI3Q,QACIsN,EAAQqD,EAAInC,IAAI3F,IAAM8H,EAAI3Q,QAE1B2Q,EAAI3Q,QAAUsN,EAAQqD,EAAInC,IAAI3F,IAAM,CAAC,CAGzD,EACA,OAAU,SAAU8H,GAChB,OAAIA,EAAI5Q,OACG4Q,EAAI5Q,OAEH4Q,EAAI5Q,OAAS,CACjB8I,GAAI8H,EAAInC,IAAI3F,GACZ4K,IAAK9C,EAAInC,IAAIpE,IACbX,OAAQ,WACJ,OAAO/B,OAAO+B,EAAOA,OAAQkH,EAAInC,IAAI3F,KAAO,CAAC,CACjD,EACA7I,QAAS2Q,EAAI3Q,UAAY2Q,EAAI3Q,QAAU,CAAC,GAGpD,IA4HJ2M,EAAS,SAAU6B,GACfjN,KAAK0P,OAASvJ,OAAO2F,EAAamB,EAAI3F,KAAO,CAAC,EAC9CtH,KAAKiN,IAAMA,EACXjN,KAAK2L,KAAOxF,OAAO+B,EAAOyD,KAAMsB,EAAI3F,IACpCtH,KAAKmS,WAAa,GAClBnS,KAAKiQ,QAAU,GACfjQ,KAAKmQ,WAAa,GAClBnQ,KAAKoS,WAAa,CAAC,EACnBpS,KAAKqS,SAAW,CAMpB,GAEO3Q,UAAY,CACf6P,KAAM,SAAUtB,EAASqC,EAASvK,EAASwK,GACvCA,EAAUA,GAAW,CAAC,EAKlBvS,KAAKmR,SAITnR,KAAKsS,QAAUA,EAEXvK,EAEA/H,KAAKqP,GAAG,QAAStH,GACV/H,KAAK0P,OAAOH,QAGnBxH,EAAUtB,KAAKzG,KAAM,SAAUgH,GAC3BhH,KAAKa,KAAK,QAASmG,EACvB,IAQJhH,KAAKiQ,QAAUA,GAAWA,EAAQ5C,MAAM,GAExCrN,KAAK+H,QAAUA,EAGf/H,KAAKmR,QAAS,EAEdnR,KAAKwS,OAASD,EAAQC,OAMlBD,EAAQrB,SAAWlR,KAAKkR,QAGxBlR,KAAKyS,SAELzS,KAAKqQ,QAEb,EAEAD,UAAW,SAAU/Q,EAAG8S,GAGfnS,KAAKmQ,WAAW9Q,KACjBW,KAAKmQ,WAAW9Q,IAAK,EACrBW,KAAKqS,UAAY,EACjBrS,KAAKmS,WAAW9S,GAAK8S,EAE7B,EAEAO,MAAO,WACH,IAAI1S,KAAKoR,QAAT,CAGApR,KAAKoR,SAAU,EAEfnJ,EAAQyI,WAAY,IAAKC,MAAQC,UAEjC,IAAI3D,EAAMjN,KAAKiN,IAIf,IAAIjN,KAAK2L,KAQL,OAAOsB,EAAIkB,OAASnO,KAAK2S,aAAe3S,KAAKqJ,OAP7CpB,EAAQ+F,YAAYhO,KAAKiN,IAAK,CAC1B2F,qBAAqB,GADzB3K,CAEGjI,KAAK2L,KAAK9D,MAAQ,GAAIpB,KAAKzG,KAAM,WAChC,OAAOiN,EAAIkB,OAASnO,KAAK2S,aAAe3S,KAAKqJ,MACjD,GAdJ,CAmBJ,EAEAA,KAAM,WACF,IAAIR,EAAM7I,KAAKiN,IAAIpE,IAGdmD,EAAWnD,KACZmD,EAAWnD,IAAO,EAClBZ,EAAQoB,KAAKrJ,KAAKiN,IAAI3F,GAAIuB,GAElC,EAMAwH,MAAO,WACH,GAAKrQ,KAAKkR,UAAWlR,KAAK6S,SAA1B,CAIA,IAAI7L,EAAK8L,EACLxL,EAAKtH,KAAKiN,IAAI3F,GACd6K,EAAanS,KAAKmS,WAClB1T,EAAUuB,KAAKvB,QACf6T,EAAUtS,KAAKsS,QAEnB,GAAKtS,KAAKmR,QAKH,GAAInR,KAAKuP,MACZvP,KAAKa,KAAK,QAASb,KAAKuP,YACrB,IAAKvP,KAAK+S,SAAU,CAOvB,GAFA/S,KAAK+S,UAAW,EAEZ/S,KAAKqS,SAAW,IAAMrS,KAAK+L,QAAS,CACpC,GAAIrG,WAAW4M,GAAU,CAOrB,GAAKtS,KAAK0P,OAAOH,OAASvP,KAAKiN,IAAI4B,UAC/BtL,IAAImF,UAAY3B,eAChB,IACItI,EAAUwJ,EAAQ+K,OAAO1L,EAAIgL,EAASH,EAAY1T,EACtD,CAAE,MAAOE,GACLqI,EAAMrI,CACV,MAEAF,EAAUwJ,EAAQ+K,OAAO1L,EAAIgL,EAASH,EAAY1T,GAgBtD,GAVIuB,KAAKiN,IAAI4B,eAAwBjH,IAAZnJ,KACrBqU,EAAY9S,KAAKxB,QAEbC,EAAUqU,EAAUrU,QACbuB,KAAKiS,eAEZxT,EAAUuB,KAAKvB,UAInBuI,EAIA,OAHAA,EAAIiM,WAAajT,KAAKiN,IACtBjG,EAAIQ,eAAiBxH,KAAKiN,IAAI4B,SAAW,CAAC7O,KAAKiN,IAAI3F,IAAM,KACzDN,EAAIU,YAAc1H,KAAKiN,IAAI4B,SAAW,SAAW,UAC1CnG,EAAS1I,KAAKuP,MAAQvI,EAGrC,MAEIvI,EAAU6T,EAKd,GAFAtS,KAAKvB,QAAUA,EAEXuB,KAAKiN,IAAI4B,WAAa7O,KAAKwS,SAC3BzG,EAAQzE,GAAM7I,EAEV8E,IAAI2P,gBAAgB,CACpB,IAAIC,EAAc,GAClBvN,KAAK5F,KAAKiQ,QAAS,SAAUd,GACzBgE,EAAY9S,KAAK8O,EAAOiE,eAAiBjE,EAC7C,GACA5L,IAAI2P,eAAejL,EAASjI,KAAKiN,IAAKkG,EAC1C,CAIJtD,EAAcvI,GAEdtH,KAAK+L,SAAU,CACnB,CAKA/L,KAAK+S,UAAW,EAEZ/S,KAAK+L,UAAY/L,KAAKqT,gBACtBrT,KAAKqT,eAAgB,EACrBrT,KAAKa,KAAK,UAAWb,KAAKvB,SAC1BuB,KAAKsP,oBAAqB,EAGlC,OAvFStJ,QAAQiC,EAAQ4C,YAAavD,IAC9BtH,KAAK0S,OAXb,CAkGJ,EAEAC,WAAY,WACR,IAAI1F,EAAMjN,KAAKiN,IACX3F,EAAK2F,EAAI3F,GAETgM,EAAYhF,EAAcrB,EAAIkB,QAIlCnO,KAAKiQ,QAAQ5P,KAAKiT,GAElBjE,EAAGiE,EAAW,UAAW7M,KAAKzG,KAAM,SAAUuT,GAC1C,IAAIlK,EAAM+J,EAAeI,EACrBC,EAAWtN,OAAO8F,EAAYjM,KAAKiN,IAAI3F,IACvCmD,EAAOzK,KAAKiN,IAAIxC,KAChBkE,EAAa3O,KAAKiN,IAAI+B,UAAYhP,KAAKiN,IAAI+B,UAAUvE,KAAO,KAC5DiJ,EAAezL,EAAQ+F,YAAYf,EAAI+B,UAAW,CAC9C4D,qBAAqB,IAK7B,OAAI5S,KAAKiN,IAAIgC,cAELsE,EAAOnH,YACP3B,EAAO8I,EAAOnH,UAAU3B,EAAM,SAAUA,GACpC,OAAO2B,EAAU3B,EAAMkE,GAAY,EACvC,IAAM,IAQVU,EAHA+D,EAAgB9E,EAAcrB,EAAIkB,OAAS,IAAM1D,EACnBzK,KAAKiN,IAAI+B,WACT,GAE1B,UAAWvI,KAAKzG,KAAM,SAAUgC,GAC5BhC,KAAKiN,IAAImG,cAAgBA,EACzBpT,KAAKuR,KAAK,GAAI,WAAc,OAAOvP,CAAO,EAAG,KAAM,CAC/CkP,SAAS,EACTsB,QAAQ,GAEhB,UAEJgB,EAAgBrN,OAAOyF,EAAUwH,EAAc9L,OAI3CtH,KAAKiQ,QAAQ5P,KAAK+S,GAEdpT,KAAK0P,OAAOH,OACZiE,EAAcnE,GAAG,QAAS5I,KAAKzG,KAAM,SAAUgH,GAC3ChH,KAAKa,KAAK,QAASmG,EACvB,IAEJwM,EAAcf,YAQlBgB,GACAzT,KAAKiN,IAAIpE,IAAMZ,EAAQ8G,UAAU0E,QACjCzT,KAAKqJ,UAITA,EAAO5C,KAAKzG,KAAM,SAAUgC,GACxBhC,KAAKuR,KAAK,GAAI,WAAc,OAAOvP,CAAO,EAAG,KAAM,CAC/CkP,SAAS,GAEjB,IAEK3B,MAAQ9I,KAAKzG,KAAM,SAAUgH,GAC9BhH,KAAKmR,QAAS,EACdnR,KAAKuP,MAAQvI,EACbA,EAAIQ,eAAiB,CAACF,GAItBlB,SAASwF,EAAU,SAAUwD,GACwB,IAA7CA,EAAInC,IAAI3F,GAAGkC,QAAQlC,EAAK,kBACxBuI,EAAcT,EAAInC,IAAI3F,GAE9B,GAEAoB,EAAQ1B,EACZ,GAIAqC,EAAKsK,SAAWlN,KAAKzG,KAAM,SAAUiL,EAAM2I,GAEvC,IAAIhL,EAAaqE,EAAIxC,KACjBoJ,EAAYvF,EAAc1F,GAC1BkL,EAAiBxO,eAMjBsO,IACA3I,EAAO2I,GAKPE,IACAxO,gBAAiB,GAKrB4J,EAAU2E,GAGN7N,QAAQkC,EAAOA,OAAQZ,KACvBY,EAAOA,OAAOU,GAAcV,EAAOA,OAAOZ,IAG9C,IACI/D,IAAIyH,KAAKC,EACb,CAAE,MAAOtM,GACL,OAAO+J,EAAQrB,UAAU,eACR,qBAAuBC,EACxB,YAAc3I,EACbA,EACA,CAAC2I,IACtB,CAEIwM,IACAxO,gBAAiB,GAKrBtF,KAAKiQ,QAAQ5P,KAAKwT,GAGlB5L,EAAQ8B,aAAanB,GAIrB8K,EAAa,CAAC9K,GAAaS,EAC/B,QAKAkK,EAAOlK,KAAK4D,EAAIxC,KAAMiJ,EAAcrK,EAAMnB,GAC9C,IAEAD,EAAQwK,OAAOa,EAAWtT,MAC1BA,KAAKoS,WAAWkB,EAAUhM,IAAMgM,CACpC,EAEAb,OAAQ,WACJ5G,EAAgB7L,KAAKiN,IAAI3F,IAAMtH,KAC/BA,KAAKkR,SAAU,EAMflR,KAAK6S,UAAW,EAGhBjN,KAAK5F,KAAKiQ,QAASxJ,KAAKzG,KAAM,SAAUmP,EAAQ9P,GAC5C,IAAIiI,EAAI8H,EAAK2E,EAEb,GAAsB,iBAAX5E,EAAqB,CAW5B,GARAA,EAASb,EAAca,EACCnP,KAAKiN,IAAI4B,SAAW7O,KAAKiN,IAAMjN,KAAKiN,IAAI+B,WACzC,GACChP,KAAKiO,SAC7BjO,KAAKiQ,QAAQ5Q,GAAK8P,EAElB4E,EAAU5N,OAAOkF,EAAU8D,EAAO7H,IAI9B,YADAtH,KAAKmS,WAAW9S,GAAK0U,EAAQ/T,OAIjCA,KAAKqS,UAAY,EAEjBhD,EAAGF,EAAQ,UAAW1I,KAAKzG,KAAM,SAAUmS,GACnCnS,KAAKgU,UAGThU,KAAKoQ,UAAU/Q,EAAG8S,GAClBnS,KAAKqQ,QACT,IAEIrQ,KAAK+H,QACLsH,EAAGF,EAAQ,QAAS1I,KAAKzG,KAAMA,KAAK+H,UAC7B/H,KAAK0P,OAAOH,OAInBF,EAAGF,EAAQ,QAAS1I,KAAKzG,KAAM,SAASgH,GACpChH,KAAKa,KAAK,QAASmG,EACvB,GAER,CAEAM,EAAK6H,EAAO7H,GACZ8H,EAAMxD,EAAStE,GAKVtB,QAAQqF,EAAU/D,KAAO8H,GAAQA,EAAI8B,SACtCjJ,EAAQwK,OAAOtD,EAAQnP,KAE/B,IAIAoG,SAASpG,KAAKoS,WAAY3L,KAAKzG,KAAM,SAAUsT,GAC3C,IAAIlE,EAAMjJ,OAAOyF,EAAU0H,EAAUhM,IACjC8H,IAAQA,EAAI8B,SACZjJ,EAAQwK,OAAOa,EAAWtT,KAElC,IAEAA,KAAK6S,UAAW,EAEhB7S,KAAKqQ,OACT,EAEAhB,GAAI,SAAU5E,EAAMwJ,GAChB,IAAIC,EAAMlU,KAAK0P,OAAOjF,GACjByJ,IACDA,EAAMlU,KAAK0P,OAAOjF,GAAQ,IAE9ByJ,EAAI7T,KAAK4T,EACb,EAEApT,KAAM,SAAU4J,EAAMoH,GAClBjM,KAAK5F,KAAK0P,OAAOjF,GAAO,SAAUwJ,GAC9BA,EAAGpC,EACP,GACa,UAATpH,UAIOzK,KAAK0P,OAAOjF,EAE3B,GAoEJxC,EAAU,CACNC,OAAQA,EACRC,YAAaA,EACbyD,SAAUA,EACVG,QAASA,EACTC,WAAYA,EACZpB,SAAUA,EACVC,YAAa,CAAC,EACdO,OAAQA,EACRkD,cAAeA,EACfhG,SAAU/E,IAAI+E,SACdI,QAASA,EAMTL,UAAW,SAAUjD,GASjB,GAPIA,EAAI+E,SAC+C,MAA/C/E,EAAI+E,QAAQiD,OAAOhI,EAAI+E,QAAQrJ,OAAS,KACxCsE,EAAI+E,SAAW,KAKI,iBAAhB/E,EAAI+O,QAAsB,CACjC,IAAIA,EAAU/O,EAAI+O,QAClB/O,EAAI+O,QAAU,SAAS7M,EAAIuB,GACvB,QAA8B,IAAtBA,EAAIW,QAAQ,KAAc,IAAM,KAAO2K,CACnD,CACJ,CAIA,IAAIxI,EAAOzD,EAAOyD,KACdyI,EAAO,CACH5I,OAAO,EACPC,SAAS,EACTvD,QAAQ,EACR+E,KAAK,GAGb7G,SAAShB,EAAK,SAAUpD,EAAOkE,GACvBkO,EAAKlO,IACAgC,EAAOhC,KACRgC,EAAOhC,GAAQ,CAAC,GAEpBG,MAAM6B,EAAOhC,GAAOlE,GAAO,GAAM,IAEjCkG,EAAOhC,GAAQlE,CAEvB,GAGIoD,EAAIqG,SACJrF,SAAShB,EAAIqG,QAAS,SAAUzJ,EAAOkE,GACnCN,KAAK5D,EAAO,SAAUqS,GACdA,IAAMnO,IACN+F,EAAWoI,GAAKnO,EAExB,EACJ,GAIAd,EAAIuG,OACJvF,SAAShB,EAAIuG,KAAM,SAAU3J,EAAOsF,GAE5B5H,QAAQsC,KACRA,EAAQ,CACJ6F,KAAM7F,KAGTA,EAAMvD,UAAWuD,EAAMuP,MAAUvP,EAAMsS,YACxCtS,EAAMsS,UAAYrM,EAAQsM,gBAAgBvS,IAE9C2J,EAAKrE,GAAMtF,CACf,GACAkG,EAAOyD,KAAOA,GAIdvG,EAAIoP,UACJ5O,KAAKR,EAAIoP,SAAU,SAAUC,GACzB,IAAchK,EAIdA,GAFAgK,EAA2B,iBAAXA,EAAsB,CAAChK,KAAMgK,GAAUA,GAEzChK,KACHgK,EAAOC,WAEdxM,EAAOsD,MAAMf,GAAQgK,EAAOC,UAQhCxM,EAAOwD,KAAKjB,GAAQgK,EAAOhK,KAAO,KAAOgK,EAAOE,MAAQ,QAC1CrK,QAAQlG,cAAe,IACvBkG,QAAQnG,eAAgB,GAC1C,GAMJiC,SAASwF,EAAU,SAAUwD,EAAK9H,GAIzB8H,EAAI+B,QAAW/B,EAAInC,IAAIgC,eACxBG,EAAInC,IAAMqB,EAAchH,EAAI,MAAM,GAE1C,IAKIlC,EAAIyC,MAAQzC,EAAI0C,WAChBG,EAAQ7E,QAAQgC,EAAIyC,MAAQ,GAAIzC,EAAI0C,SAE5C,EAEAyM,gBAAiB,SAAUvS,GAQvB,OAPA,WACI,IAAI4S,EAIJ,OAHI5S,EAAMuP,OACNqD,EAAM5S,EAAMuP,KAAK5K,MAAMrD,OAAQsD,YAE5BgO,GAAQ5S,EAAMvD,SAAWwI,UAAUjF,EAAMvD,QACpD,CAEJ,EAEAuP,YAAa,SAAU6G,EAAQtC,GAG3B,SAASmB,EAAa7L,EAAMC,EAAUC,GAClC,IAAIT,EAASwN,EAMb,OAJIvC,EAAQK,qBAAuB9K,GAAYpC,WAAWoC,KACtDA,EAASiN,kBAAmB,GAGZ,iBAATlN,EACHnC,WAAWoC,GAEJY,EAAQrB,UAAU,cAAe,wBAAyBU,GAMjE8M,GAAU7O,QAAQqF,EAAUxD,GACrBwD,EAASxD,GAAM+D,EAASiJ,EAAOvN,KAKtC/D,IAAI/D,IACG+D,IAAI/D,IAAIyI,EAASJ,EAAMgN,EAAQnB,IAK1CpM,EADMgH,EAAczG,EAAMgN,GAAQ,GAAO,GAChCvN,GAEJtB,QAAQ+F,EAASzE,GAOfyE,EAAQzE,GANJoB,EAAQrB,UAAU,YAAa,gBAC1BC,EACA,0CACAa,GACC0M,EAAS,GAAK,yBAMnC7C,IAGA/J,EAAQK,SAAS,WAGb0J,KAEA8C,EAAa5F,EAAUZ,EAAc,KAAMuG,KAIhC5G,QAAUsE,EAAQtE,QAE7B6G,EAAWvD,KAAK1J,EAAMC,EAAUC,EAAS,CACrCmJ,SAAS,IAGbZ,GACJ,GAEOoD,EACX,CA6EA,OA9IAnB,EAAUA,GAAW,CAAC,EAmEtBlM,MAAMqN,EAAc,CAChBlP,UAAWA,UAOXwQ,MAAO,SAAUC,GACb,IAAIC,EACA9G,EAAQ6G,EAAkBE,YAAY,KACtCC,EAAUH,EAAkB9N,MAAM,KAAK,GAU3C,OALe,IAAXiH,MAJyB,MAAZgH,GAA+B,OAAZA,IAIAhH,EAAQ,KACxC8G,EAAMD,EAAkB5G,UAAUD,EAAO6G,EAAkBnU,QAC3DmU,EAAoBA,EAAkB5G,UAAU,EAAGD,IAGhDnG,EAAQ8G,UAAU3C,EAAU6I,EACXJ,GAAUA,EAAOvN,IAAI,GAAO4N,GAAM,EAC9D,EAEAnJ,QAAS,SAAUzE,GACf,OAAOtB,QAAQ+F,EAASuC,EAAchH,EAAIuN,GAAQ,GAAO,GAAMvN,GACnE,EAEA+N,UAAW,SAAU/N,GAEjB,OADAA,EAAKgH,EAAchH,EAAIuN,GAAQ,GAAO,GAAMvN,GACrCtB,QAAQ+F,EAASzE,IAAOtB,QAAQ4F,EAAUtE,EACrD,IAICuN,IACDnB,EAAa3F,MAAQ,SAAUzG,GAG3BqI,IAEA,IAAI1C,EAAMqB,EAAchH,EAAIuN,GAAQ,GAChCzF,EAAMjJ,OAAOyF,EAAUtE,GAE3B8H,EAAI4E,SAAU,EACdvG,EAAanG,UAENyE,EAAQzE,UACR0E,EAAWiB,EAAIpE,YACfiD,EAAYxE,GAKnBvB,YAAY6E,EAAU,SAAS0G,EAAMjS,GAC7BiS,EAAK,KAAOhK,GACZsD,EAAS0C,OAAOjO,EAAG,EAE3B,UACO4I,EAAQ4C,YAAYvD,GAEvB8H,IAIIA,EAAIM,OAAO3D,UACXD,EAAYxE,GAAM8H,EAAIM,QAG1BG,EAAcvI,GAEtB,GAGGoM,CACX,EAQAjB,OAAQ,SAAUtD,GACJhJ,OAAOyF,EAAUuD,EAAO7H,KAE9B4H,EAAUC,GAAQsD,QAE1B,EAQA1I,aAAc,SAAUnB,GACpB,IAAI0M,EAAOhE,EAAMlC,EACbzD,EAAOxF,OAAO+B,EAAOyD,KAAM/C,IAAe,CAAC,EAC3C2M,EAAY5J,EAAKlN,QAIrB,IAFAkR,IAEO/E,EAAS9J,QAAQ,CAEpB,GAAgB,QADhBwQ,EAAO1G,EAASkD,SACP,GAAa,CAKlB,GAJAwD,EAAK,GAAK1I,EAIN0M,EACA,MAEJA,GAAQ,CACZ,MAAWhE,EAAK,KAAO1I,IAEnB0M,GAAQ,GAGZjE,EAAcC,EAClB,CAOA,GANArJ,EAAQ4C,YAAc,CAAC,EAIvBuE,EAAMjJ,OAAOyF,EAAUhD,IAElB0M,IAAUtP,QAAQ+F,EAASnD,IAAewG,IAAQA,EAAI+B,OAAQ,CAC/D,MAAIjJ,EAAOsN,eAAmBD,GAActO,UAAUsO,IAClD,OAAI3H,EAAgBhF,QAChB,EAEOF,EAAQrB,UAAU,WACR,sBAAwBuB,EACxB,KACA,CAACA,KAKtByI,EAAc,CAACzI,EAAa+C,EAAK9D,MAAQ,GAAK8D,EAAK2I,WAE3D,CAEAhE,GACJ,EASAvB,UAAW,SAAUnG,EAAYsM,EAAKO,GAClC,IAAIjK,EAAOkK,EAAMrW,EAAiBwJ,EAC9B8M,EAAYlC,EACZmC,EAAUzP,OAAO+B,EAAOwD,KAAM9C,GAQlC,GANIgN,IACAhN,EAAagN,GAGjBnC,EAAWtN,OAAO8F,EAAYrD,GAG1B,OAAOX,EAAQ8G,UAAU0E,EAAUyB,EAAKO,GAO5C,GAAIlS,IAAIgF,YAAYgC,KAAK3B,GAIrBC,EAAMD,GAAcsM,GAAO,QACxB,CAQH,IANA1J,EAAQtD,EAAOsD,MAMVnM,GAJLqW,EAAO9M,EAAWzB,MAAM,MAIVrG,OAAQzB,EAAI,EAAGA,GAAK,EAI9B,GADAsW,EAAaxP,OAAOqF,EAFLkK,EAAKrI,MAAM,EAAGhO,GAAGgL,KAAK,MAGrB,CAGR3K,QAAQiW,KACRA,EAAaA,EAAW,IAE5BD,EAAKpI,OAAO,EAAGjO,EAAGsW,GAClB,KACJ,CAIJ9M,EAAM6M,EAAKrL,KAAK,KAEhBxB,GAAyB,OADzBA,GAAQqM,IAAQ,qBAAqB3K,KAAK1B,IAAQ4M,EAAU,GAAK,QACtDrI,OAAO,IAAcvE,EAAIrD,MAAM,iBAAmB,GAAK0C,EAAOiC,SAAWtB,CACxF,CAEA,OAAOX,EAAOiM,UAAY,UAAU5J,KAAK1B,GAClCA,EAAMX,EAAOiM,QAAQvL,EAAYC,GAAOA,CACnD,EAIAQ,KAAM,SAAU/B,EAAIuB,GAChBtF,IAAI8F,KAAKpB,EAASX,EAAIuB,EAC1B,EASAmK,OAAQ,SAAUvI,EAAM3C,EAAUwJ,EAAM7S,GACpC,OAAOqJ,EAASnB,MAAMlI,EAAS6S,EACnC,EAQA5H,aAAc,SAAUmI,GAIpB,GAAiB,SAAbA,EAAI5I,MACCnE,YAAYyF,MAAMsH,EAAIC,eAAiBD,EAAIE,YAAY8D,YAAc,CAG1EjS,kBAAoB,KAGpB,IAAIkS,EAAOlE,EAAcC,GACzB5J,EAAQ8B,aAAa+L,EAAKxO,GAC9B,CACJ,EAKAqC,cAAe,SAAUkI,GACrB,IAAIiE,EAAOlE,EAAcC,GACzB,IAAKjE,EAAgBkI,EAAKxO,IAAK,CAC3B,IAAIyO,EAAU,GAWd,OAVA3P,SAASwF,EAAU,SAAS5J,EAAOhB,GACJ,IAAvBA,EAAIwI,QAAQ,QACZ5D,KAAK5D,EAAMiO,QAAS,SAASd,GACzB,GAAIA,EAAO7H,KAAOwO,EAAKxO,GAEnB,OADAyO,EAAQ1V,KAAKW,IACN,CAEf,EAER,GACO0H,EAAQrB,UAAU,cAAe,qBAAuByO,EAAKxO,IAC1CyO,EAAQjV,OACT,iBAAmBiV,EAAQ1L,KAAK,MAChC,KAAMwH,EAAK,CAACiE,EAAKxO,KAC9C,CACJ,GAGJW,EAAQ7E,QAAU6E,EAAQ+F,cACnB/F,CACX,CAqPA,SAAS0C,uBACL,OAAI/G,mBAAsD,gBAAjCA,kBAAkBiS,YAI3C9P,YAAYc,UAAW,SAAUoD,GAC7B,GAA0B,gBAAtBA,EAAO4L,WACP,OAAQjS,kBAAoBqG,CAEpC,GAPWrG,iBASf,CAgJJ,EAzlEA,CAylEEa,OAA+B,oBAAf9D,gBAA6BiH,EAAYjH,W,GClmEvDqV,yBAA2B,CAAC,EAGhC,SAASC,oBAAoBC,GAE5B,IAAIC,EAAeH,yBAAyBE,GAC5C,QAAqBtO,IAAjBuO,EACH,OAAOA,EAAa1X,QAGrB,IAAID,EAASwX,yBAAyBE,GAAY,CAGjDzX,QAAS,CAAC,GAOX,OAHA2X,oBAAoBF,GAAU1X,EAAQA,EAAOC,QAASwX,qBAG/CzX,EAAOC,OACf,CCrBAwX,oBAAoB7W,EAAI,SAASZ,GAChC,IAAI6X,EAAS7X,GAAUA,EAAO4D,WAC7B,WAAa,OAAO5D,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAyX,oBAAoBlX,EAAEsX,EAAQ,CAAEhU,EAAGgU,IAC5BA,CACR,ECNAJ,oBAAoBlX,EAAI,SAASN,EAAS6X,GACzC,IAAI,IAAItV,KAAOsV,EACXL,oBAAoB9W,EAAEmX,EAAYtV,KAASiV,oBAAoB9W,EAAEV,EAASuC,IAC5ES,OAAOM,eAAetD,EAASuC,EAAK,CAAEiB,YAAY,EAAMzC,IAAK8W,EAAWtV,IAG3E,ECPAiV,oBAAoB9W,EAAI,SAAS8G,EAAKC,GAAQ,OAAOzE,OAAOC,UAAUG,eAAeC,KAAKmE,EAAKC,EAAO,E,kFCAlG,EAA+BqQ,ICA/B,EAA+B7X,MAAM8X,IAAIC,O,2BCA7C,SAASC,IACP,OAAOA,EAAWjV,OAAOkV,OAASlV,OAAOkV,OAAOlQ,OAAS,SAAUrH,GACjE,IAAK,IAAIT,EAAI,EAAGA,EAAIiI,UAAU9F,OAAQnC,IAAK,CACzC,IAAIE,EAAI+H,UAAUjI,GAClB,IAAK,IAAIG,KAAKD,GAAG,CAAG,GAAEgD,eAAeC,KAAKjD,EAAGC,KAAOM,EAAEN,GAAKD,EAAEC,GAC/D,CACA,OAAOM,CACT,EAAGsX,EAAS/P,MAAM,KAAMC,UAC1B,C,mFCLO,MAAM,YACXgQ,EACAhW,SAAQ,UACRiW,EACAhW,KAAI,EACJ0B,UAAS,WACTuU,EAAQ,SACRC,GACE,IAAIC,KAED,SAASC,IACd,MAAMC,EAActW,IACdgB,EAAOH,OAAOG,KAAKsV,GACnBC,EAA6B,CAAC,EAMpC,OAJAvV,EAAKxB,QAASY,IACZmW,EAAMnW,GAAOkW,EAAYlW,KAGpBmW,CACT,CClBO,MAAMC,EAAiC3U,IAC5C,MAAM4U,EAAYC,EAAuB7U,EAAM8U,MAAO,8BACtD,OACEC,IAAAA,cAAA,OAAKH,UAAWA,GAAW,YAIlBI,EAA0CA,EAAGC,SAAQC,UAASJ,YACzE,MAAMF,EAAYC,EAAuBC,EAAO,oCAChD,OACEC,IAAAA,cAAA,OAAKH,UAAWA,GACdG,IAAAA,cAAA,UAAKE,EAAOzO,MACZuO,IAAAA,cAAA,SAAIE,EAAOE,SACXJ,IAAAA,cAAA,UAAQvO,KAAK,SAAS4O,QAASF,GAAS,YCuF9C,UA1FA,MAeE7X,WAAAA,GACEE,KAAK8X,kBAAoBV,EACzBpX,KAAK+X,uBAAyBN,EAC9BzX,KAAKgY,aAAe,CAAC,EACrBhY,KAAKiY,iBAAmB,CAAC,EACzBjY,KAAKkY,YAAc,CAAC,EACpBlY,KAAKmY,YAAc,CAAC,CACtB,CAEAC,cAAAA,CAAeC,GACbrY,KAAKmY,YAAcE,CACrB,CAEAC,cAAAA,GACE,OAAOtY,KAAKmY,WACd,CAEAI,aAAAA,CAAcC,EAA8BtQ,GAC1C,MAAMuC,EAAOgO,EAAkBD,GAC/BxY,KAAKkY,YAAYzN,GAAQ,IAAKzK,KAAKkY,YAAYzN,MAAUvC,EAC3D,CAEAwQ,aAAAA,CAAcF,GACZ,MAAM/N,EAAOgO,EAAkBD,GAC/B,OAAOxY,KAAKkY,YAAYzN,EAC1B,CAEAkO,mBAAAA,CAAoBzQ,GAClBlI,KAAK4Y,iBAAmB,IAAK5Y,KAAK4Y,oBAAqB1Q,EACzD,CAEA2Q,mBAAAA,GACE,OAAO7Y,KAAK4Y,gBACd,CAEAE,mBAAAA,CAAoBN,EAA8BO,GAChD,MAAMtO,EAAOgO,EAAkBD,GAC/BxY,KAAKiY,iBAAiBxN,GAAQsO,CAChC,CAEAC,sBAAAA,CAAuBR,GACrB,MAAM/N,EAAOgO,EAAkBD,UACxBxY,KAAKiY,iBAAiBxN,EAC/B,CAEAwO,mBAAAA,CAAoBT,GAClB,MAAM/N,EAAOgO,EAAkBD,GAC/B,OAAOxY,KAAKiY,iBAAiBxN,EAC/B,CAEAyO,eAAAA,CAAgBH,GACd/Y,KAAKgY,aAAee,CACtB,CAEAI,eAAAA,GACE,OAAOnZ,KAAKgY,YACd,CAEAoB,oBAAAA,CAAqBtB,GACnB9X,KAAK8X,kBAAoBA,CAC3B,CAEAuB,oBAAAA,GACE,OAAOrZ,KAAK8X,iBACd,CAEAwB,yBAAAA,CAA0BvB,GACxB/X,KAAK+X,uBAAyBA,CAChC,CAEAwB,yBAAAA,GACE,OAAOvZ,KAAK+X,sBACd,GC/FF,MAAMyB,EAAUlI,IACd,MAAM6G,EAAcsB,EAAUnB,iBACxBoB,EAASvB,GAAawB,QAAQrI,GAEpC,IAAe,IAAXoI,EACF,OAGF,MAKME,EALqC,CACzCC,KAAM,OACNC,KAAM,SACNvK,MAAO,OAEc+B,EAAKyI,OAEtBC,EAAS,CACZ,MAAKvB,EAAkBnH,MACvB,cAAasI,sBAA0BA,wDAGtCtI,EAAKrI,OACP+Q,EAAO,GAAM,GAAEA,EAAO,QAAQ1I,EAAKrI,UACnC+Q,EAAO3Z,KACJ,oBAAmBuZ,iDAAqDA,KACzE,2BAIe,SAAftI,EAAKyI,QACPC,EAAO,GAAM,IAAGA,EAAO,MAGzBvV,OAAOwV,QAAQ3I,EAAKyI,UAAUC,EAAQ1I,EAAKsG,UAgC7C,MA7BiCY,IAAa,CAC5CqB,IAAAA,CAAKjC,EAAS3O,GACZuQ,EAAO,IACFhB,EAAeuB,MAAO,OAAQ9Q,OAAM2O,WAE3C,EACAkC,IAAAA,CAAKlC,EAAS3O,GACZuQ,EAAO,IACFhB,EAAeuB,MAAO,OAAQ9Q,OAAM2O,WAE3C,EACArI,KAAAA,CAAMqI,EAAS3O,GACb,MAAMkP,EAAcsB,EAAUnB,iBACxB/I,EAAQqI,aAAmBsC,EAC7BtC,EACA,IAAIsC,EAAa,IACd1B,EACHvP,KAAMA,GAAQ,SACdtB,cAAeiQ,aAAmBnQ,MAAQmQ,EAAU,IAAInQ,MAAMmQ,KAGlEO,GAAazP,UAAU6G,GAEvBiK,EAAO,IACFhB,EAAeuB,MAAO,QAAS9Q,OAAM2O,WAE5C,ICpEK,MAAMuC,EAAyBC,OAAO,sBAEhCC,EAAcD,OAAO,WAErBE,EAAaF,OAAO,UAEpBG,EAAmBH,OAAO,gBAE1BI,EAAuB,CAClC,eACA,UACA,cACA,UACA,eACA,UACA,gBACA,YACA,gBACA,gBACA,kBACA,YACA,cACA,QACA,OACA,UClBWC,EAAiCjC,GAAkBpP,MAAOsR,EAAO1Y,KAC5E,MAAMmW,EAAcsB,EAAUnB,iBACxBkB,EAASmB,EAAanC,GAE5B,IAAIoC,EAAO,CAAEpa,QAASgY,EAAekC,QAAO1Y,SAE5C,GAAImW,GAAa0C,UAAW,CAC1B,MAAMxK,QAAc8H,EAAY0C,UAAUD,GAE1C,IAAc,IAAVvK,EAEF,YADAmJ,EAAOM,KAAK,wBAAyB,iBAIzB,IAAVzJ,IACFuK,EAAO,IAAKA,KAASvK,GAEzB,CAEAxP,EAAK,CACH,CAACwZ,GAAc,CACbS,WAAY,IAAInK,KAChB+J,MAAOE,EAAKF,MACZla,QAASgY,EACTxW,MAAO4Y,EAAK5Y,UCsCX,SAAS+Y,EACdvC,EACAwC,GAEA,MAAMxS,EAAYA,CAACxH,EAAKgZ,EAAQiB,KAC9B,MAAMC,EAAazB,EAAUf,cAAcF,IAAkBiB,EAAUZ,sBAEvE,IAAIsC,EAAcF,EAKlB,QAJoBrT,IAAhBuT,IACFA,EAAgC,iBAAXnB,EAAsBA,EAAShZ,IAGjDka,EAMH,OALAxS,EAAQ,IAAIwR,EAAa,IACpB1B,EACHvP,KAAM,OACNtB,cAAe,IAAIF,MAAM,uBAEpB0T,EAGT,GAAID,EAAWE,QACb,OAAOD,EAGT,MAAM,YAAEE,EAAW,UAAEC,GAAcJ,EAC7BK,EAA6B3a,EAASya,GAE5C,QAAoBzT,IAAhByT,QAAwCzT,IAAX2T,EAM/B,OALA7S,EAAQ,IAAIwR,EAAa,IACpB1B,EACHvP,KAAM,OACNtB,cAAe,IAAIF,MAAM,6BAEpB0T,EAGT,MAAMK,EAAWF,IAAYC,GAE7B,IAAKC,EAMH,OALA9S,EAAQ,IAAIwR,EAAa,IACpB1B,EACHvP,KAAM,OACNtB,cAAe,IAAIF,MAAO,qBAAoB8T,oBAEzCJ,EAGT,IAAKK,EAASxa,GAMZ,OALA0H,EAAQ,IAAIwR,EAAa,IACpB1B,EACHvP,KAAM,OACNtB,cAAe,IAAIF,MAAO,gBAAezG,oBAEpCma,EAGT,MAAMlQ,EAAOuQ,EAASxa,GAEtB,IAAKgZ,GAA4B,iBAAXA,GAAkE,oBAA3CvY,OAAOC,UAAUC,SAASG,KAAKkY,GAC1E,OAAO/O,EAGT,MAAMqG,EAAO7P,OAAOG,KAAKoY,GAEzB,OAAK1I,EAAKxQ,OAIHwQ,EAAKpR,OAAO,CAAC0a,EAAMa,KACxB,MAAMC,EAAQ,IAAIra,OAAQ,QAAOoa,SAAY,KAC7C,OAAOb,EAAKtQ,QAAQoR,EAAO1B,EAAOyB,GAAK9Z,aACtCsJ,GANMA,GAwBX,OAfAzC,EAAImT,OAAS,CAACzT,EAAQe,KACpB,MAGM2R,EAAO,IAHe,QAAT3R,EACfwQ,EAAUZ,sBACVY,EAAUf,cAAcF,MACKtQ,GAEpB,QAATe,EACFwQ,EAAUd,oBAAoBiC,GAE9BnB,EAAUlB,cAAcC,EAAeoC,GAGzCI,KAGKxS,CACT,CCnIA,MAAMoT,EAAc/S,GAAiB,GAAEA,MAAQ,IAAI8H,OAgCtCkL,EAA6BpR,GAAShG,OAAOtB,UAAU4I,QAAQtB,GAE/DqR,EAAqBrR,GAAiBhG,OAAOtB,UAAUkS,UAAU5K,GAEjEsR,EAAuBA,IAAMnb,EAASuZ,GAsBtC6B,EAAwBA,CAACvR,EAAc5B,KAClD,MAAMoT,EAAerb,EAAS2Z,GAG9B,GAAI1R,GAAOpE,OAAOtB,UAAU4I,QAAQtB,GAClC,OAGF,IAAIyR,EAAON,EAAWK,EAAaxR,IAGnC,GAAI5B,EAAK,CACPqT,EAAQ,GAAErT,KAAO4B,IAEjB,IACE,MAAM,SAAEmB,GAAanH,OAAOtB,UAAUjE,EAAEiG,SAASgX,EAC7CvQ,IAAWnB,GAAM8E,QACnB2M,EAAON,EAAW/S,GAEtB,CAAE,MAAOlK,GACP,CAEJ,CAEA8F,OAAOtB,UAAU4K,MAAMtD,GACvBhG,OAAOtB,UAAU+E,OAAO,CACtBsD,MAAO,CAAE,CAACf,GAAOyR,MAGRzD,EAAqBD,IAChC,MAAM,KAAE/N,EAAI,OAAEjM,GAAWga,EACzB,OAAOha,EAAU,GAAEiM,KAAQjM,IAAWiM,GAO3B/B,EAAW/J,IACtB,MAAM,KAAE8L,EAAI,OAAEjM,EAAM,KAAEyK,GAAStK,EAChBgc,EAAa,CAAElQ,OAAMjM,WAC7B+Q,MAAM5Q,EAAGsK,IAGX,MAAMiR,UAAqBzS,MAShC3H,WAAAA,CAAYgW,GAMVxT,MAAMwT,EAAKnO,cAAciQ,SACzB5X,KAAKiJ,KAAO6M,EAAK7M,KACjBjJ,KAAK2H,cAAgBmO,EAAKnO,cAC1B3H,KAAKxB,OAASsX,EAAKtX,OACnBwB,KAAKyK,KAAOqL,EAAKrL,IACnB,EA6CK,SAAS2R,EAAsBpC,GAKpC,MAAM,cACJqC,EAAa,KACb5R,EAAI,OACJjM,EAAM,KACNyK,EAAI,WACJqT,GACEtC,EAEEjB,EAAyB,CAAC,EAChC,IAAIwD,EACAC,EA6BJ,OA3BA/a,OACGsB,oBAAoBsZ,GACpBjc,QAASqc,IAC6B,mBAA1BJ,EAAcI,KAGV,eAAXA,EAIW,UAAXA,EAIS,SAATxT,GAAmBuR,EAAqBxX,SAASyZ,KAIrD1D,EAAQ0D,GAAUJ,EAAcI,IAP9BD,EAAaH,EAAcI,GAJ3BF,EAAkBF,EAAcI,MAclCD,GD/NC,SACLC,EACAjE,EACA1Q,GAEA,IAAK2U,EACH,OAGF,MAAMvB,EAAauB,ICqJd,IAA0Bza,EACf,OADeA,EDnJZkZ,ICoJoC,mBAAvBlZ,EAAc0a,MD3I1ClE,EACFiB,EAAUlB,cAAcC,EAAe,CACrC4C,SAAS,EACTC,YAAa,GACbC,UAAW,CAAC,IAGd7B,EAAUd,oBAAoB,CAC5ByC,SAAS,EACTC,YAAa,GACbC,UAAW,CAAC,IAIhBJ,EACGwB,KAAMC,IACL,GAAInE,EAGF,OAFAiB,EAAUlB,cAAcC,EAAe,IAAKmE,EAAKvB,SAAS,SAC1DtT,MAIF,MAAMyT,EAAS3a,EAAS+b,EAAItB,aAE5Bxa,EAAK,CAAE,CAAC8b,EAAItB,kBAAczT,IAAa,GACvC/G,EAAK,CAAE,CAAC8b,EAAItB,aAAcE,IAAU,GACpC9B,EAAUd,oBAAoB,IAAKgE,EAAKvB,SAAS,MAElDwB,MAAOje,IACN+J,EAAQ,IAAIwR,EAAa,CACvBzP,KAAM+N,GAAe/N,MAAQ,MAC7BjM,OAAQga,GAAeha,OACvByK,KAAM,OACNtB,cAAehJ,QAzCf6Z,EACFiB,EAAUlB,cAAcC,EAAe0C,GAEvCzB,EAAUd,oBAAoBuC,EAyCpC,CCwKI2B,CAAiBL,EAAY,CAAE/R,OAAMjM,UAAU8d,GAGjD7C,EAAUX,oBAAoB,CAAErO,OAAMjM,UAAUua,GAE5CwD,GF5M0B/D,EE6ML,CAAE/N,OAAMjM,UF7M2Bqc,EE6MjB0B,EF7M0Cha,EAAU,CAC/F,CAAC8X,GAAahG,GACZ,MAAM,QAAE7T,EAAO,MAAEwB,EAAK,MAAE0Y,GAAUrG,EAC9BmE,EAAc/N,OAASjK,EAAQiK,MAAQ+N,EAAcha,SAAWgC,EAAQhC,QAC1Eqc,EAAU,CAAEH,QAAO1Y,QAAOxB,WAE9B,KE0MO,IAAM,KFhNgBsc,IAACtE,EAA8BqC,CEiN9D,CAEO,SAASkC,EAAuBvE,GACrC,MAAMwE,EAAoBjB,IAzNVkB,IAA2Bze,IA2NTga,EAAnBwE,EA1NdE,KAAMje,GAAMA,EAAEwL,OAASjM,EAAOiM,MAAQxL,EAAET,SAAWA,EAAOA,SA2NzDwe,EAAkB3c,KAAKmY,GAGzB3X,EAAK,CAAE,CAACsZ,GAAyB6C,IAAqB,EACxD,CAEO,SAASG,EAAuB3E,GACrC,MAAM,KAAE/N,EAAI,OAAEjM,GAAWga,EACzB,IAAIwE,EAAoBjB,IAExBiB,EAAoBA,EACjB1c,OAAQ8c,GAASA,EAAK3S,OAASA,GAAQ2S,EAAK5e,SAAWA,GAE1DqC,EAAK,CAAE,CAACsZ,GAAyB6C,IAAqB,GACtDvD,EAAUT,uBAAuB,CAAEvO,OAAMjM,UAC3C,CAEO,SAAS6e,EAAYrD,GAC1B,MAAM,KAAEvP,EAAI,OAAEjM,EAAM,IAAEqK,GAAQmR,EACxBiC,EAAerb,EAAS2Z,GAE9B,MAAO,CACL9P,OACAjM,SACAqK,IAAKA,GAAOoT,EAAaxR,GAE7B,CAEO,SAAS6M,EAAuB1Y,EAAqBuP,GAC1D,MAAM,KAAE1D,EAAI,OAAEjM,GAAWI,EACzB,MAAQ,GAAEuP,KAAU,CAAC1D,EAAMjM,GAAQ8B,OAAOgd,SAASjT,KAAK,MAC1D,CCxMA,MA3EmCmO,GAAkBpP,eAAgB4Q,GACnE,MAAM7B,EAAcsB,EAAUnB,iBACxBkB,EAASmB,EAAanC,GAE5B,IAAI,KACF/N,EAAI,OACJjM,EAAM,OACN+e,EAAM,MACNvb,GACEgY,EAEJ,GAAI7B,GAAaqF,WAAY,CAC3B,MAAMnN,QAAc8H,EAAYqF,WAAW,CACzClX,OAAQ,CAAEmE,OAAMjM,UAChB+e,SACAvb,QACAxB,QAASgY,IAEX,IAAc,IAAVnI,EAEF,OADAmJ,EAAOM,KAAK,wBAAyB,YAC9B2D,QAAQC,WAEH,IAAVrN,IACF5F,EAAO4F,EAAM/J,OAAOmE,KACpBjM,EAAS6R,EAAM/J,OAAO9H,OACtB+e,EAASlN,EAAMkN,OACfvb,EAAQqO,EAAMrO,MAElB,CAEA,GAAa,QAATyI,EAAgB,CAClB,MACMkT,EADelE,EAAUN,kBACEoE,GACjC,IAAKI,EAAa,CAChB,MAAMC,EAAgB,WAAUL,oBAC1BhO,EAAQ,IAAI2K,EAAa,IAC1B1B,EACHvP,KAAM,WACNtB,cAAe,IAAIF,MAAMmW,KAG3B,MADAlV,EAAQ6G,GACFA,CACR,CACA,OAAOuH,EAAS6G,EAAa3b,EAAOwW,EACtC,CAEA,MAAMP,EAAmBwB,EAAUR,oBAAoB,CAAExO,OAAMjM,WAE/D,IAAKyZ,EAAkB,CACrB,MAAM2F,EAAe,yBACfrO,EAAQ,IAAI2K,EAAa,IAC1B1B,EACHvP,KAAM,WACNtB,cAAe,IAAIF,MAAMmW,KAG3B,MADAlV,EAAQ6G,GACFA,CACR,CAEA,MAAMsO,EAAkB5F,EAAiBsF,GAEzC,IAAKM,EAAiB,CACpB,MAAMD,EAAgB,WAAUL,oBAC1BhO,EAAQ,IAAI2K,EAAa,IAC1B1B,EACHvP,KAAM,WACNtB,cAAe,IAAIF,MAAMmW,KAG3B,MADAlV,EAAQ6G,GACFA,CACR,CAEA,OAAOkO,QAAQC,QAAQG,EAAgB7b,EAAOwW,GAChD,ECoCA,EAtGgCsF,CAAC5V,EAAQ6V,GAAW,KAClD,MAAM9B,EAAerb,EAAS2Z,GACxBpC,EAAcsB,EAAUnB,kBACxB,KAAE7N,EAAI,OAAEjM,EAAM,IAAEqK,GAAQX,EACxB8V,GAAa,IAAIrN,KAEjBsN,EAActf,IACdof,GACFrV,EAAQ/J,IAQZ,OAJIkK,GACFmT,EAAsBvR,EAAM5B,GAGvB,IAAI4U,QAAa,CAACC,EAASQ,KAChC,IAAKrV,IAAQoT,EAAaxR,KAAUqR,EAAkBrR,GAAO,CAC3D,MAAM8E,EAAQ,IAAI2K,EAAa,CAC7BzP,OACAjM,SACAyK,KAAM,cACNtB,cAAe,IAAIF,MAAO,WAAUgD,oBAKtC,OAFAwT,EAAW1O,QACX2O,EAAO3O,EAET,CAEA9K,OAAOtB,UAAU,CAACsH,GAAQ0T,IACxB,MAAMC,GAAW,IAAIzN,KAUrB,GARAwH,GAAakG,SAAS,CACpB5T,OACAjM,SACAwf,YACAI,UACAE,WAAYzC,EAAepR,MAGxB0T,EAAG,CACN,MAAM5O,EAAQ,IAAI2K,EAAa,CAC7BzP,OACAjM,SACAyK,KAAM,iBACNtB,cAAe,IAAIF,MAAO,WAAUgD,gBAMtC,OAHAuR,EAAsBvR,GACtBwT,EAAW1O,QACX2O,EAAO3O,EAET,CAEA,MAAMgP,EAAgB,YAAaJ,EAAIA,EAAEnf,QAAUmf,EAC7CK,EAAgBhgB,EAAyB2f,EAAE3f,GAAlB+f,EAE/B,QAAqB3W,IAAjB4W,GAA8BhgB,EAAQ,CACxC,MAAM+Q,EAAQ,IAAI2K,EAAa,CAC7BzP,OACAjM,SACAyK,KAAM,wBACNtB,cAAe,IAAIF,MAAO,cAAajJ,oBAMzC,OAHAwd,EAAsBvR,GACtBwT,EAAW1O,QACX2O,EAAO3O,EAET,CAEAmO,EAAQc,IACN7f,IACF,MAAO8f,GAAiB9f,EAAE6I,eAE1BwU,EAAsBvR,EAAM5B,GAC5BmT,EAAsByC,GAEtB,IAAIC,EAAkC,gBAElCD,IAAkBhU,IACpBiU,EAAY,2BAGT/f,EAAEiZ,QAAQ5U,SAAS,4CACtB0b,EAAYD,IAAkBhU,EAAO,eAAiB,0BAGxD,MAAM8E,EAAQ,IAAI2K,EAAa,CAC7BzP,OACAjM,OAAQigB,IAAkBhU,OAAO7C,EAAY6W,EAC7CxV,KAAMyV,EACN/W,cAAehJ,IAGjBsf,EAAW1O,GACX2O,EAAO3O,QCsDb,EAvIA,SAA0CrH,GAKxC,MAAM,KACJuC,EAAI,OACJjM,EAAM,IACNqK,EAAG,UACH8V,EAAS,UACTC,GACE1W,EACE2W,EAAaF,GAAald,OAAOG,KAAKhB,KAE5C,MAAMke,UAAUtc,EAAAA,UAIduc,mBAAqB,0BAErB5e,MAAQ,CACN6e,gBAAgB,EAChBC,SAAS,GASHC,mBAAqBA,IAAM,KAEnCC,iBAAAA,GACEnf,KAAKof,gBACP,CAEAxc,oBAAAA,GACE5C,KAAKuP,WAAQ3H,EACb5H,KAAKqf,cAAgB,KACrBrf,KAAKsf,aAAc,EACnBtf,KAAKkf,qBACL/B,EAAuB,CAAE1S,OAAMjM,UACjC,CAEA4gB,eAAiBhW,UACf,IACE,MAAMiT,QAAsByB,EAAgC,CAAErT,OAAMjM,SAAQqK,QAAO,GAEnF,GAAI7I,KAAKsf,YACP,aH0E0BC,EGvEFlD,EHuEgC7D,EGvEjB,CAAE/N,OAAMjM,UHwEhD,IAAIif,QAAc,CAAC+B,EAAStB,KAC7BqB,EAAUE,UAAYF,EAAU7d,WAAWge,kBAAyC,mBAAdH,EACxEC,IAIFtB,EAAO,IAAIhE,EAAa,IACnB1B,EACH7Q,cAAe,IAAIF,MAAM,+BACzBwB,KAAM,0BG/EJoT,EAAcsD,YAAclH,EAAkB,CAAEhO,OAAMjM,WAEtDue,EAAuB,CAAEtS,OAAMjM,WAE/BwB,KAAKkf,mBAAqB9C,EAAsB,CAC9CC,gBACA5R,OACAjM,SACA8d,WAAYA,IAAMtc,KAAK4f,gBAGzB5f,KAAKqf,cAAgBhD,EACrBrc,KAAK2C,SAAS,CAAEqc,gBAAgB,IAEhCJ,KACF,CAAE,MAAOjgB,GACP,GAAIqB,KAAKsf,YACP,OAGFtf,KAAKuP,MAAQ5Q,EACbqB,KAAK2C,SAAS,CAAEqc,gBAAgB,EAAMC,SAAS,GACjD,CH+CC,IAA6BM,EAA8B/G,GG5C9DqH,aAAepF,EAAkB,CAAEhQ,OAAMjM,WAEzCshB,UAAYC,EAAe,CAAEtV,OAAMjM,WAEnCwhB,GAAKjF,EAAW,CAAEtQ,OAAMjM,UAAU,IAAMwB,KAAK4f,eAE7CK,QAAUtF,EAAa,CAAElQ,OAAMjM,WAE/B+Y,MAAQ8F,EAAY,CAAE5S,OAAMjM,SAAQqK,QAEpChG,MAAAA,GACE,MAAMuU,EAAWqC,EAAUJ,wBACrB,QAAE6G,EAAO,gBAAEC,EAAe,KAAEC,GAASpgB,KAAKyC,OAC1C,eAAEuc,EAAc,QAAEC,GAAYjf,KAAKG,MACnCgX,EAAQF,IACRoI,EAAgBrf,KAAKqf,cAE3B,GAAIJ,EACF,MAAMjf,KAAKuP,MAGb,OAAKyP,EAcHxH,IAAAA,cAAC6H,EAAa3I,EAAA,GACRyJ,EAAe,CACnB5I,MAAOvX,KAAKuX,MACZuI,UAAW9f,KAAK8f,UAChBO,OAAQlJ,EACR0I,aAAc7f,KAAK6f,aACnBG,GAAIhgB,KAAKggB,GACTC,QAASjgB,KAAKigB,QACdK,IAAKF,KArBHF,GAAWrE,EAAepR,GACrB,KAIP+M,IAAAA,cAACJ,EAAQ,CACPG,MAAOvX,KAAKuX,MACZ8I,OAAQlJ,GAiBhB,EAGF,MAAMoJ,EAAY1J,KAAWgI,EAAXhI,CAAsBiI,GAGxC,OAFAyB,EAAUZ,YAAc,oBAEjBY,CACT,ECwEA,EAxMA,SAAwCrY,GAKtC,MAAM,KACJuC,EAAI,OACJjM,EAAM,IACNqK,EAAG,UACH8V,EAAS,UACTC,GACE1W,EACE2W,EAAaF,GAAald,OAAOG,KAAKhB,KAEtC4f,EAA0D/d,IAC9D,MAAM0U,EAAQJ,KAAY8H,GAEpB4B,GAASC,EAAAA,EAAAA,UACTC,GAAeD,EAAAA,EAAAA,SAAO,GACtBE,GAAWF,EAAAA,EAAAA,UACXG,GAAiBH,EAAAA,EAAAA,SAAO,GACxBI,GAAmBJ,EAAAA,EAAAA,UACnBK,GAAUL,EAAAA,EAAAA,QAAOrD,EAAY,CAAE5S,OAAMjM,SAAQqK,SAE7CmY,GAAkBN,EAAAA,EAAAA,QAA8B,MAChDO,GAAmBP,EAAAA,EAAAA,UACnBQ,GAAmBR,EAAAA,EAAAA,UACnBS,GAAaT,EAAAA,EAAAA,UACbU,GAAwBV,EAAAA,EAAAA,UACxBW,GAAwBX,EAAAA,EAAAA,WAEvB1B,EAAgBsC,IAAqBre,EAAAA,EAAAA,WAAS,IAC9Cgc,EAASsC,IAActe,EAAAA,EAAAA,WAAS,GAEjCmU,EAAWqC,EAAUJ,wBACrB,QAAE6G,EAAO,gBAAEC,GAAoB1d,EAE/B+e,GAAWC,EAAAA,EAAAA,aAAY,KAC3B,MAAMxB,EAAUtF,EAAa,CAAElQ,OAAMjM,WAC/BshB,EAAYC,EAAe,CAAEtV,OAAMjM,WACnCqhB,EAAepF,EAAkB,CAAEhQ,OAAMjM,WACzCwhB,EAAKjF,EAAW,CAAEtQ,OAAMjM,UAAU,KACtC6iB,EAAsBK,cAGxBT,EAAiBS,QAAUjB,EAAOiB,QAASpB,IAAkB,IAAKH,IAClEe,EAAiBQ,QAAUjB,EAAOiB,QAASpB,IAAkB,IAAKnJ,IAElE,MAAMwK,EAASlB,EAAOiB,QAASE,UAAU,CACvCC,KAAAA,GACE,MAAMC,EAAYrB,EAAOiB,QAASpB,IAAI,GAItC,OAHAe,EAAsBK,QAAU,KAC9BI,EAAU9f,OAAS,GAEd,CACLhB,IAAK8gB,EAET,EAEAC,aAAAA,CAAcpjB,GACZ,MAAM4Q,EAAQ5Q,EACdiiB,EAASc,QAAUnS,EAAMqI,SAAS5U,SAAS,iBACvC,IAAIkX,EAAa,CACjBvS,cAAe,IAAIF,MAAM,6BACzBgD,OACAjM,SACAyK,KAAM,sBAENsG,EACJgS,GAAW,EACb,EAEA1e,MAAAA,GACE,OAAO4d,EAAOiB,QAASM,EAAElB,EAAiBY,QAAgB,IACrDT,EAAiBS,QAAS1f,MAC7BigB,QAAS,CACPnC,YACAG,UACAJ,eACAG,KACAK,OAAQa,EAAiBQ,QAAS1f,MAClCuV,MAAOwJ,EAAQW,SAGjB1gB,IAAKhB,KAAKgB,KAEd,IAGF2gB,EAAOO,MAAMlB,EAAgBU,SAC7Bf,EAAae,SAAU,EACvBP,EAAWO,QAAU,IAAMC,EAAOQ,WACjC,CAAChC,EAAiBhJ,IAEfiI,GAAiBqC,EAAAA,EAAAA,aAAYrY,UACjC,IACE,MAAMmN,QAAYuH,EAAyB,CAAErT,KAAM,QACnDgW,EAAOiB,QAAUnL,EAEjB,MAAM8F,QAAsByB,EAAgC,CAAErT,OAAMjM,SAAQqK,QAAO,GAEnF,GAAIgY,EAAea,QACjB,aJoCH,SAA2BnC,EAA8B/G,GAC9D,MAAM4J,EAAe,IAAI/gB,OAAQ,SAEjC,OAAO,IAAIoc,QAAc,CAACC,EAASQ,KACjCzZ,OAAOtB,UAAU,CAAC,OAASkf,IACpBD,EAAa7X,KAAK8X,EAAIre,UACzBka,EAAO,IAAIzW,MAAO,sDAGa,mBAAtB8X,GAAW1c,QAAqD,mBAArB0c,GAAWsC,MAKjE3D,EAAO,IAAIhE,EAAa,IACnB1B,EACH7Q,cAAe,IAAIF,MAAM,6BACzBwB,KAAM,uBAPNyU,OAWR,CItDc4E,CAAkBjG,EAAe,CAAE5R,OAAMjM,WAE/Cue,EAAuB,CAAEtS,OAAMjM,WAE/B4iB,EAAsBM,QAAUtF,EAAsB,CACpDC,gBACA5R,OACAjM,SACAyK,KAAM,OACNqT,UAAAA,GACE+E,EAAsBK,WACxB,IAGFZ,EAAiBY,QAAUrF,EAE3B1b,WAAW6gB,GACXF,GAAkB,GAElB1C,KACF,CAAE,MAAOjgB,GACP,GAAIkiB,EAAea,QACjB,OAGFd,EAASc,QAAU/iB,EACnB2iB,GAAkB,GAClBC,GAAW,EACb,GACC,CAACC,IA+BJ,IA7BAe,EAAAA,EAAAA,WAAU,IAAM,KACd3B,EAASc,aAAU9Z,EACnBkZ,EAAiBY,aAAU9Z,EAC3BiZ,EAAea,SAAU,EACzBvE,EAAuB,CAAE1S,OAAMjM,WAC/B2iB,EAAWO,YACXN,EAAsBM,YACtBf,EAAae,SAAU,GACtB,KAEHa,EAAAA,EAAAA,WAAU,KACJ5B,EAAae,SAGjBtC,KACC,CAACA,KAEJmD,EAAAA,EAAAA,WAAU,KACJtB,EAAiBS,UACnBT,EAAiBS,QAAQ1f,MAAQ,IAAKme,KAEvC,CAACA,KAEJoC,EAAAA,EAAAA,WAAU,KACJrB,EAAiBQ,UACnBR,EAAiBQ,QAAQ1f,MAAQ,IAAKmV,KAEvC,CAACA,IAEA8H,EACF,MAAM2B,EAASc,QAGjB,OACElK,IAAAA,cAAAA,IAAAA,SAAA,KAEKwH,GAAmBkB,GAAYrE,EAAepR,GAO3C,KALA+M,IAAAA,cAACJ,EAAQ,CACPG,MAAOwJ,EAAQW,QACfrB,OAAQlJ,IAKhBK,IAAAA,cAAA,OACEH,UAAWC,EAAuB,CAAE7M,OAAMjM,UAAU,yBACpD8hB,IAAKU,MAMbR,EAAEb,YAAclH,EAAkB,CAAEhO,OAAMjM,WAE1C,MAAMgkB,EAED/f,GAAW+U,IAAAA,cAACgJ,EAAM/d,GAIvB,OAFA+f,EAAa7C,YAAc,wBAEpB6C,CACT,EC3NA,MAAMC,UAAsBjgB,EAAAA,UAC1Buc,mBAAqB,yBAErB5e,MAAQ,CACNuiB,UAAU,GAKZC,iBAAAA,CAAkBhkB,GAChB,MAAM,KAAE8L,EAAI,OAAEjM,GAAWwB,KAAKyC,MACxB8M,EAAQ5Q,aAAaub,EACvBvb,EACA,IAAIub,EAAa,CACjBzP,OACAjM,SACAyK,KAAe,QAATwB,EAAiB,YAAc,eACrC9C,cAAehJ,IAGnBqB,KAAK2C,SAAS,CAAE+f,UAAU,IAC1B1iB,KAAKuP,MAAQA,EACb7G,EAAQ6G,GACRyM,EAAsBhc,KAAKyC,MAAMgI,MACjC0S,EAAuB,CAAE1S,OAAMjM,UACjC,CAEA+Y,MAAQ8F,EAAYrd,KAAKyC,OAEzBmgB,OAASA,KACP5iB,KAAKuP,WAAQ3H,EACb5H,KAAK2C,SAAS,CAAE+f,UAAU,KAG5B7f,MAAAA,GACE,MAAMggB,EAAoBpJ,EAAUF,4BAC9BpC,EAAQF,IAEd,OAAIjX,KAAKG,MAAMuiB,SAEXlL,IAAAA,cAACqL,EAAiB,CAChBtL,MAAOvX,KAAKuX,MACZI,QAAS3X,KAAK4iB,OACdvC,OAAQlJ,EACRO,OAAQ1X,KAAKuP,QAKZvP,KAAKyC,MAAMqgB,QACpB,EAGF,QC5BA,EA/B6CC,CAAC7a,EAAQ2W,KACpD,MAAM,KACJpU,EAAI,OACJjM,EAAM,IACNqK,EAAG,KACHI,EAAO,SACLf,EAEEiW,GAAc,SAATlV,EAAkB+Z,EAAqBC,GAAsB,CACtExY,OACAjM,SACAqK,MACA8V,UAAWE,IAGPU,EAAa9c,IACjB,MAAM,QAAEyd,EAAO,KAAEE,KAAS8C,GAASzgB,GAAS,CAAC,EACvC0gB,EAAY,CAChBhD,gBAAiB+C,EAAMhD,UAASE,QAElC,OACE5I,IAAAA,cAACiL,EAAa,CAAChY,KAAMA,EAAMjM,OAAQA,EAAQqK,IAAKA,GAC9C2O,IAAAA,cAAC2G,EAAMgF,KAMb,OADA5D,EAAUI,YAAc,kBACjBJ,GChCT,IAAI6D,EAEG,SAASC,EAAc3Y,GAC5B,GAAI0Y,EACF,OAAOA,EAGT,MAAME,EAAU,IAAI7F,QAAe,CAACC,EAASQ,KAC3C,GAAKxT,EAAL,CASA,GAAmB,iBAARA,EAAkB,CAC3B,MAAMT,EAAStF,SAAS7B,cAAc,UAKtC,OAJAmH,EAAOtG,IAAM+G,EACbT,EAAOsZ,OAAU5kB,GAAM+e,EAAQ/e,GAC/BsL,EAAOuZ,QAAW7kB,GAAMuf,EAAOvf,QAC/BgG,SAASnB,KAAKsG,YAAYG,EAE5B,CAGAxF,OAAOtB,UAAYuH,EACnBgT,EAAQ,IAAI+F,MAAM,qBAblB,MANEvF,EAAO,IAAIhE,EAAa,CACtBzP,KAAM,aACNxB,KAAM,cACNtB,cAAe,IAAIF,MAAM,8BAqB/B,OAFA2b,EAAmBE,EAEZF,CACT,CAEO,SAASM,EACd7b,GAEApG,OAAOkiB,QAAQ9b,GAAMzH,QAAQ,EAAEY,EAAKgB,MAC9B8Z,EAAkB9a,KAID,iBAAVgB,EAKXyC,OAAOpB,OAAOrC,EAAK,GAAI,IAAMgB,GAJ3ByC,OAAOtB,UAAU+E,OAAO,CAAEsD,MAAO,CAAE,CAACxK,GAAO,GAAEgB,KAAShB,SAM5D,CC/BA4V,EAAY,CACV,CAACuD,GAAyB,GAC1B,CAACE,GAAc,KACf,CAACC,GAAa,CAAC,EACf,CAACC,GAAmB,CAAC,IAGvB,MAAMqJ,EAEDnhB,IACH,MAAM,aACJwZ,EAAY,IACZpT,EAAG,KACH4B,EAAI,OACJjM,EAAM,KACNyK,EAAI,gBACJkX,EAAe,KACfC,EAAI,UACJvB,GACEpc,GACGuc,EAAgBsC,IAAqBre,EAAAA,EAAAA,WAAS,GAC/CoZ,GAAgBqE,EAAAA,EAAAA,UAChBE,GAAWF,EAAAA,EAAAA,WACVzB,EAASsC,IAActe,EAAAA,EAAAA,WAAS,GAuBvC,IArBAsf,EAAAA,EAAAA,WAAU,KACRc,EAAcpH,GAAc9Y,WACzBuZ,KAAK,KAEJ,MAAM,UAAEvZ,KAAc+f,GAASjH,GAAgB,CAAC,EAChDyH,EAAcR,GAEd7G,EAAcqF,QAAUmC,EAAoB,CAC1CpZ,OACAjM,SACAqK,MACAI,QACC4V,GACHyC,GAAkB,KAEnB1E,MAAOje,IACNiiB,EAASc,QAAU/iB,EACnB4iB,GAAW,MAEd,CAAC9W,EAAM5B,EAAKrK,EAAQyd,EAAchT,EAAM4V,IAEvCI,EACF,MAAM2B,EAASc,QAGjB,IAAK1C,EAAgB,CACnB,MAAM8E,EAAWrK,EAAUJ,uBAC3B,OAAO7B,IAAAA,cAACsM,EAAQ,CAACvM,MAAO,CAAE9M,OAAMjM,SAAQqK,OAAOwX,OAAQpJ,KACzD,CAEA,MAAMkH,EAAI9B,EAAcqF,QAExB,OACElK,IAAAA,cAAC2G,EAACzH,EAAA,GAAKyJ,EAAe,CAAEG,IAAKF,MAIjCwD,EAAWjE,YAAc,qBAElB,MAAMoD,EAA8BzR,IACzC,MAAMiO,EAAiB9c,GACrB+U,IAAAA,cAACiL,EAAa,CAAChY,KAAK,aAAa5B,IAAKyI,EAAKzI,IAAKrK,OAAQ8S,EAAK9S,QAC3DgZ,IAAAA,cAACoM,EAAUlN,EAAA,CAACyJ,gBAAiB1d,GAAW6O,KAQ5C,OADAiO,EAAUI,YAAc,6BACjBle,OAAOkV,OAAO4I,EAAW,CAAEzI,SALmB8D,IACnD/Z,EAAK+Z,GAAM,OCvFTmJ,EADQ,IAAIC,gBAAgBvf,OAAOiQ,SAASuP,QAC3BzkB,IAAI,SAAW,UD8FG0I,KACvC,MAAM,iBACJgc,EAAgB,cAChBC,EAAa,SACbC,EAAQ,MACRjN,GACEjP,GACE,UAAE/E,KAAc+f,GAASgB,EAE3BC,GACF1K,EAAUH,0BAA0B6K,GAGlCC,GACF3K,EAAUL,qBAAqBgL,GAG7BjN,GACFtW,EAAKsW,GAGPkM,EAAclgB,GACXuZ,KAAK,KACJgH,EAAcR,KAEftG,MAAOje,IACN+J,EAAQ,IAAIwR,EAAa,CACvBzP,KAAM,aACNxB,KAAM,eACNtB,cAAehJ,QC9FvB0lB,CA3ByE,CACvErlB,QAAS,CACPklB,iBAAkB,CAChB/gB,UAAWsB,OAAOtB,UAClBzE,MAAO8Y,IACPjB,IAAK8L,EACL,mBAAoBiC,KAEtBnN,MAAO,CAAEoE,OAAQ,KAAMgJ,QAAS,MAElCC,UAAW,CACTN,iBAAkB,CAAC,EACnBE,SAAUA,IAAM,KAChBD,cAAeA,EAAG5M,WAAYC,IAAAA,cAAA,SAAG,WAASD,EAAM1O,MAElD4b,cAAe,CACbP,iBAAkB,CAChB/gB,UAAW,0BAGfuhB,mBAAoB,CAClBR,iBAAkB,CAChB/gB,UAAW,2BAKO4gB,IAExB,MAAMY,GAAK5B,EAAoC,CAC7CtY,KAAM,IACNjM,OAAQ,IACRqK,IAAK,wBACLoT,aAAc,CACZ,qBAAsB,iBACtB,mBAAoBqI,OAGlBM,GAAK7B,EAAoC,CAC7CtY,KAAM,IACN5B,IAAK,wBACLI,KAAM,OACN4V,UAAW,CAAC,aAGd,SAASgG,KACP,MAAMvE,GAAMI,EAAAA,EAAAA,QAAoC,MAEhD,OACElJ,IAAAA,cAAA,OAAKsN,MAAO,CAAEC,QAAS,KACrBvN,IAAAA,cAACmN,GAAE,CAACvE,KAAME,EAAK0E,OAAO,WACtBxN,IAAAA,cAAA,UACEK,QAASA,KACP8M,GAAG7N,SAAS,CAAEyE,OAAQ,SAEzB,cAGD/D,IAAAA,cAAA,UACEK,QAASA,KACPyI,EAAIoB,SAAS/hB,IAAI,aAEpB,YAGD6X,IAAAA,cAACoN,GAAE,CAACK,OAAO,WAGjB,CAEA,MAAMC,GAAYvgB,SAASwgB,eAAe,SAC7BC,EAAAA,EAAAA,YAAWF,IACnBriB,OAAO2U,IAAAA,cAACqN,GAAG,M","sources":["webpack://@variousjs/various/external var \"react\"","webpack://@variousjs/various/./node_modules/nycticorax/dist/index.js","webpack://@variousjs/various/./node_modules/@variousjs/requirejs/require.js","webpack://@variousjs/various/webpack/bootstrap","webpack://@variousjs/various/webpack/runtime/compat get default export","webpack://@variousjs/various/webpack/runtime/define property getters","webpack://@variousjs/various/webpack/runtime/hasOwnProperty shorthand","webpack://@variousjs/various/external var \"vue\"","webpack://@variousjs/various/external var \"react-dom/client\"","webpack://@variousjs/various/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@variousjs/various/./src/core/store.ts","webpack://@variousjs/various/./src/core/default-component.tsx","webpack://@variousjs/various/./src/core/connector.ts","webpack://@variousjs/various/./src/core/logger.ts","webpack://@variousjs/various/./src/core/config.ts","webpack://@variousjs/various/./src/core/message.ts","webpack://@variousjs/various/./src/core/i18n.ts","webpack://@variousjs/various/./src/core/helper.ts","webpack://@variousjs/various/./src/core/dispatch.ts","webpack://@variousjs/various/./src/core/create-module.ts","webpack://@variousjs/various/./src/core/react-component.tsx","webpack://@variousjs/various/./src/core/vue-component.tsx","webpack://@variousjs/various/./src/core/error-boundary.tsx","webpack://@variousjs/various/./src/core/create-component.tsx","webpack://@variousjs/various/./src/standalone/helper.ts","webpack://@variousjs/various/./src/standalone/index.tsx","webpack://@variousjs/various/./test/standalone/index.tsx"],"sourcesContent":["module.exports = react;","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"react\")):\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Nycticorax=e(require(\"react\")):t.Nycticorax=e(t.React)}(self,(t=>(()=>{\"use strict\";var e={294:(t,e,r)=>{r.d(e,{default:()=>c});var s=r(942),o=r(63),n=r.n(o);function i(t,e=new WeakMap){if(\"object\"!=typeof t||null===t)return t;if(e.has(t))return e.get(t);const r=Array.isArray(t)?[]:{};e.set(t,r);const s=Reflect.ownKeys(t);for(const o of s)r[o]=i(t[o],e);return r}class c{constructor(){var t;(0,s.Z)(this,\"state\",void 0),(0,s.Z)(this,\"listeners\",void 0),(0,s.Z)(this,\"emits\",void 0),(0,s.Z)(this,\"timer\",void 0),(0,s.Z)(this,\"onStateChange\",void 0),(0,s.Z)(this,\"getStore\",void 0),(0,s.Z)(this,\"createStore\",(t=>{this.listeners=Reflect.ownKeys(t).reduce(((e,r)=>{const s=r;return this.state[s]=t[s],{...e,[r]:[]}}),{})})),(0,s.Z)(this,\"subscribe\",(t=>{const e={};return Reflect.ownKeys(t).forEach((r=>{const s=r;this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(t[s]),e[s]=t[s]})),()=>{Reflect.ownKeys(e).forEach((t=>{const r=t;this.listeners[r]=this.listeners[r].filter((t=>t!==e[r]))}))}})),(0,s.Z)(this,\"emit\",((t,e)=>{this.emits={...this.emits,...t},e?this.trigger():(clearTimeout(this.timer),this.timer=setTimeout(this.trigger))})),(0,s.Z)(this,\"dispatch\",((t,...e)=>t({getStore:this.getStore,emit:t=>this.emit(t,!0)},...e))),(0,s.Z)(this,\"trigger\",(()=>{const t=this.emits,e=[],r=Reflect.ownKeys(t);for(let s=0;s<r.length;s+=1){const o=r[s];if(n()(this.state[o],t[o]))continue;const c=t[o],u=this.state[o];this.state[o]=i(t[o]),e.push({key:o,newValue:c,oldValue:u})}const s={};e.forEach((t=>{s[t.key]=[t.newValue,t.oldValue],this.listeners[t.key]&&this.listeners[t.key].forEach((e=>e(t.newValue,t.oldValue)))})),e.length&&this.onStateChange(s),this.emits={},this.timer=void 0})),this.state={},this.listeners={},this.emits={},this.timer=void 0,this.onStateChange=()=>null,this.getStore=(t=this.state,function(e){return e?i(t[e]):t})}set onChange(t){this.onStateChange=t}}},63:t=>{t.exports=function t(e,r){if(e===r)return!0;if(e&&r&&\"object\"==typeof e&&\"object\"==typeof r){if(e.constructor!==r.constructor)return!1;var s,o,n;if(Array.isArray(e)){if((s=e.length)!=r.length)return!1;for(o=s;0!=o--;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((s=(n=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,n[o]))return!1;for(o=s;0!=o--;){var i=n[o];if(!t(e[i],r[i]))return!1}return!0}return e!=e&&r!=r}},250:e=>{e.exports=t},942:(t,e,r)=>{function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:()=>s})}},r={};function s(t){var o=r[t];if(void 0!==o)return o.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,s),n.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o={};return(()=>{s.d(o,{default:()=>u});var t=s(942),e=s(294),r=s(250),n=s.n(r);const i=[\"name\",\"prototype\",\"length\",\"propTypes\",\"defaultProps\",\"getDerivedStateFromProps\",\"contextTypes\",\"displayName\"];class c extends e.default{constructor(...e){super(...e),(0,t.Z)(this,\"connect\",function(e){const{getStore:s,subscribe:o}=e;return function(...e){return function(c){class u extends r.Component{constructor(r){super(r),(0,t.Z)(this,\"unsubscribe\",void 0),(0,t.Z)(this,\"state\",{props:s()}),this.unsubscribe=o(e.reduce(((t,e)=>({...t,[e]:()=>{this.setState({props:s()})}})),{}))}componentWillUnmount(){this.unsubscribe()}render(){const{props:t}=this.state,e={...t,...this.props};return n().createElement(c,e)}}return Object.getOwnPropertyNames(c).forEach((t=>{const e=t;i.includes(t)||(u[e]=c[e])})),u}}}(this)),(0,t.Z)(this,\"useStore\",function(t){const{getStore:e,subscribe:s}=t;return function(...t){const[o,n]=(0,r.useState)(e());return(0,r.useLayoutEffect)((()=>s(t.reduce(((t,r)=>({...t,[r]:()=>{n((t=>({...t,[r]:e()[r]})))}})),{})))),o}}(this))}}const u=c})(),o.default})()));\n//# sourceMappingURL=index.js.map","/** vim: et:ts=4:sw=4:sts=4\n * @license RequireJS 2.3.6 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE\n */\n//Not using strict: uneven strict support in browsers, #392, and causes\n//problems with requirejs.exec()/transpiler plugins that may not be strict.\n/*jslint regexp: true, nomen: true, sloppy: true */\n/*global window, navigator, document, importScripts, setTimeout, opera */\n\nvar requirejs, require, define;\n(function (global, setTimeout) {\n    var req, s, head, baseElement, dataMain, src,\n        interactiveScript, currentlyAddingScript, mainScript, subPath,\n        version = '2.3.6',\n        commentRegExp = /\\/\\*[\\s\\S]*?\\*\\/|([^:\"'=]|^)\\/\\/.*$/mg,\n        cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]+)[\"']\\s*\\)/g,\n        jsSuffixRegExp = /\\.js$/,\n        currDirRegExp = /^\\.\\//,\n        op = Object.prototype,\n        ostring = op.toString,\n        hasOwn = op.hasOwnProperty,\n        isBrowser = !!(typeof window !== 'undefined' && typeof navigator !== 'undefined' && window.document),\n        isWebWorker = !isBrowser && typeof importScripts !== 'undefined',\n        //PS3 indicates loaded and complete, but need to wait for complete\n        //specifically. Sequence is 'loading', 'loaded', execution,\n        // then 'complete'. The UA check is unfortunate, but not sure how\n        //to feature test w/o causing perf issues.\n        readyRegExp = isBrowser && navigator.platform === 'PLAYSTATION 3' ?\n                      /^complete$/ : /^(complete|loaded)$/,\n        defContextName = '_',\n        //Oh the tragedy, detecting opera. See the usage of isOpera for reason.\n        isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]',\n        contexts = {},\n        cfg = {},\n        globalDefQueue = [],\n        useInteractive = false;\n\n    //Could match something like ')//comment', do not lose the prefix to comment.\n    function commentReplace(match, singlePrefix) {\n        return singlePrefix || '';\n    }\n\n    function isFunction(it) {\n        return ostring.call(it) === '[object Function]';\n    }\n\n    function isArray(it) {\n        return ostring.call(it) === '[object Array]';\n    }\n\n    /**\n     * Helper function for iterating over an array. If the func returns\n     * a true value, it will break out of the loop.\n     */\n    function each(ary, func) {\n        if (ary) {\n            var i;\n            for (i = 0; i < ary.length; i += 1) {\n                if (ary[i] && func(ary[i], i, ary)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    /**\n     * Helper function for iterating over an array backwards. If the func\n     * returns a true value, it will break out of the loop.\n     */\n    function eachReverse(ary, func) {\n        if (ary) {\n            var i;\n            for (i = ary.length - 1; i > -1; i -= 1) {\n                if (ary[i] && func(ary[i], i, ary)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    function getOwn(obj, prop) {\n        return hasProp(obj, prop) && obj[prop];\n    }\n\n    /**\n     * Cycles over properties in an object and calls a function for each\n     * property value. If the function returns a truthy value, then the\n     * iteration is stopped.\n     */\n    function eachProp(obj, func) {\n        var prop;\n        for (prop in obj) {\n            if (hasProp(obj, prop)) {\n                if (func(obj[prop], prop)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    /**\n     * Simple function to mix in properties from source into target,\n     * but only if target does not already have a property of the same name.\n     */\n    function mixin(target, source, force, deepStringMixin) {\n        if (source) {\n            eachProp(source, function (value, prop) {\n                if (force || !hasProp(target, prop)) {\n                    if (deepStringMixin && typeof value === 'object' && value &&\n                        !isArray(value) && !isFunction(value) &&\n                        !(value instanceof RegExp)) {\n\n                        if (!target[prop]) {\n                            target[prop] = {};\n                        }\n                        mixin(target[prop], value, force, deepStringMixin);\n                    } else {\n                        target[prop] = value;\n                    }\n                }\n            });\n        }\n        return target;\n    }\n\n    //Similar to Function.prototype.bind, but the 'this' object is specified\n    //first, since it is easier to read/figure out what 'this' will be.\n    function bind(obj, fn) {\n        return function () {\n            return fn.apply(obj, arguments);\n        };\n    }\n\n    function scripts() {\n        return document.getElementsByTagName('script');\n    }\n\n    function defaultOnError(err) {\n        throw err;\n    }\n\n    //Allow getting a global that is expressed in\n    //dot notation, like 'a.b.c'.\n    function getGlobal(value) {\n        if (!value) {\n            return value;\n        }\n        var g = global;\n        each(value.split('.'), function (part) {\n            g = g[part];\n        });\n        return g;\n    }\n\n    /**\n     * Constructs an error with a pointer to an URL with more information.\n     * @param {String} id the error ID that maps to an ID on a web page.\n     * @param {String} message human readable error.\n     * @param {Error} [err] the original error, if there is one.\n     *\n     * @returns {Error}\n     */\n    function makeError(id, msg, err, requireModules) {\n        var e = new Error(msg + '\\nhttps://requirejs.org/docs/errors.html#' + id);\n        e.requireType = id;\n        e.requireModules = requireModules;\n        if (err) {\n            e.originalError = err;\n        }\n        return e;\n    }\n\n    if (typeof define !== 'undefined') {\n        //If a define is already in play via another AMD loader,\n        //do not overwrite.\n        return;\n    }\n\n    if (typeof requirejs !== 'undefined') {\n        if (isFunction(requirejs)) {\n            //Do not overwrite an existing requirejs instance.\n            return;\n        }\n        cfg = requirejs;\n        requirejs = undefined;\n    }\n\n    //Allow for a require config object\n    if (typeof require !== 'undefined' && !isFunction(require)) {\n        //assume it is a config object.\n        cfg = require;\n        require = undefined;\n    }\n\n    function newContext(contextName) {\n        var inCheckLoaded, Module, context, handlers,\n            checkLoadedTimeoutId,\n            config = {\n                //Defaults. Do not set a default for map\n                //config to speed up normalize(), which\n                //will run faster if there is no default.\n                waitSeconds: 7,\n                baseUrl: './',\n                paths: {},\n                bundles: {},\n                pkgs: {},\n                shim: {},\n                config: {}\n            },\n            registry = {},\n            //registry of just enabled modules, to speed\n            //cycle breaking code when lots of modules\n            //are registered, but not activated.\n            enabledRegistry = {},\n            undefEvents = {},\n            defQueue = [],\n            defined = {},\n            urlFetched = {},\n            bundlesMap = {},\n            requireCounter = 1,\n            unnormalizedCounter = 1;\n\n        /**\n         * Trims the . and .. from an array of path segments.\n         * It will keep a leading path segment if a .. will become\n         * the first path segment, to help with module name lookups,\n         * which act like paths, but can be remapped. But the end result,\n         * all paths that use this function should look normalized.\n         * NOTE: this method MODIFIES the input array.\n         * @param {Array} ary the array of path segments.\n         */\n        function trimDots(ary) {\n            var i, part;\n            for (i = 0; i < ary.length; i++) {\n                part = ary[i];\n                if (part === '.') {\n                    ary.splice(i, 1);\n                    i -= 1;\n                } else if (part === '..') {\n                    // If at the start, or previous value is still ..,\n                    // keep them so that when converted to a path it may\n                    // still work when converted to a path, even though\n                    // as an ID it is less than ideal. In larger point\n                    // releases, may be better to just kick out an error.\n                    if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {\n                        continue;\n                    } else if (i > 0) {\n                        ary.splice(i - 1, 2);\n                        i -= 2;\n                    }\n                }\n            }\n        }\n\n        /**\n         * Given a relative module name, like ./something, normalize it to\n         * a real name that can be mapped to a path.\n         * @param {String} name the relative name\n         * @param {String} baseName a real name that the name arg is relative\n         * to.\n         * @param {Boolean} applyMap apply the map config to the value. Should\n         * only be done if this normalization is for a dependency ID.\n         * @returns {String} normalized name\n         */\n        function normalize(name, baseName, applyMap) {\n            var pkgMain, mapValue, nameParts, i, j, nameSegment, lastIndex,\n                foundMap, foundI, foundStarMap, starI, normalizedBaseParts,\n                baseParts = (baseName && baseName.split('/')),\n                map = config.map,\n                starMap = map && map['*'];\n\n            //Adjust any relative paths.\n            if (name) {\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // If wanting node ID compatibility, strip .js from end\n                // of IDs. Have to do this here, and not in nameToUrl\n                // because node allows either .js or non .js to map\n                // to same file.\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                // Starts with a '.' so need the baseName\n                if (name[0].charAt(0) === '.' && baseParts) {\n                    //Convert baseName to array, and lop off the last part,\n                    //so that . matches that 'directory' and not name of the baseName's\n                    //module. For instance, baseName of 'one/two/three', maps to\n                    //'one/two/three.js', but we want the directory, 'one/two' for\n                    //this normalization.\n                    normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n                    name = normalizedBaseParts.concat(name);\n                }\n\n                trimDots(name);\n                name = name.join('/');\n            }\n\n            //Apply map config if available.\n            if (applyMap && map && (baseParts || starMap)) {\n                nameParts = name.split('/');\n\n                outerLoop: for (i = nameParts.length; i > 0; i -= 1) {\n                    nameSegment = nameParts.slice(0, i).join('/');\n\n                    if (baseParts) {\n                        //Find the longest baseName segment match in the config.\n                        //So, do joins on the biggest to smallest lengths of baseParts.\n                        for (j = baseParts.length; j > 0; j -= 1) {\n                            mapValue = getOwn(map, baseParts.slice(0, j).join('/'));\n\n                            //baseName segment has config, find if it has one for\n                            //this name.\n                            if (mapValue) {\n                                mapValue = getOwn(mapValue, nameSegment);\n                                if (mapValue) {\n                                    //Match, update name to the new value.\n                                    foundMap = mapValue;\n                                    foundI = i;\n                                    break outerLoop;\n                                }\n                            }\n                        }\n                    }\n\n                    //Check for a star map match, but just hold on to it,\n                    //if there is a shorter segment match later in a matching\n                    //config, then favor over this star map.\n                    if (!foundStarMap && starMap && getOwn(starMap, nameSegment)) {\n                        foundStarMap = getOwn(starMap, nameSegment);\n                        starI = i;\n                    }\n                }\n\n                if (!foundMap && foundStarMap) {\n                    foundMap = foundStarMap;\n                    foundI = starI;\n                }\n\n                if (foundMap) {\n                    nameParts.splice(0, foundI, foundMap);\n                    name = nameParts.join('/');\n                }\n            }\n\n            // If the name points to a package's name, use\n            // the package main instead.\n            pkgMain = getOwn(config.pkgs, name);\n\n            return pkgMain ? pkgMain : name;\n        }\n\n        function removeScript(name) {\n            if (isBrowser) {\n                each(scripts(), function (scriptNode) {\n                    if (scriptNode.getAttribute('data-requiremodule') === name &&\n                            scriptNode.getAttribute('data-requirecontext') === context.contextName) {\n                        scriptNode.parentNode.removeChild(scriptNode);\n                        return true;\n                    }\n                });\n            }\n        }\n\n        function hasPathFallback(id) {\n            var pathConfig = getOwn(config.paths, id);\n            if (pathConfig && isArray(pathConfig) && pathConfig.length > 1) {\n                //Pop off the first array value, since it failed, and\n                //retry\n                pathConfig.shift();\n                context.require.undef(id);\n\n                //Custom require that does not do map translation, since\n                //ID is \"absolute\", already mapped/resolved.\n                context.makeRequire(null, {\n                    skipMap: true\n                })([id]);\n\n                return true;\n            }\n        }\n\n        //Turns a plugin!resource to [plugin, resource]\n        //with the plugin being undefined if the name\n        //did not have a plugin prefix.\n        function splitPrefix(name) {\n            var prefix,\n                index = name ? name.indexOf('!') : -1;\n            if (index > -1) {\n                prefix = name.substring(0, index);\n                name = name.substring(index + 1, name.length);\n            }\n            return [prefix, name];\n        }\n\n        /**\n         * Creates a module mapping that includes plugin prefix, module\n         * name, and path. If parentModuleMap is provided it will\n         * also normalize the name via require.normalize()\n         *\n         * @param {String} name the module name\n         * @param {String} [parentModuleMap] parent module map\n         * for the module name, used to resolve relative names.\n         * @param {Boolean} isNormalized: is the ID already normalized.\n         * This is true if this call is done for a define() module ID.\n         * @param {Boolean} applyMap: apply the map config to the ID.\n         * Should only be true if this map is for a dependency.\n         *\n         * @returns {Object}\n         */\n        function makeModuleMap(name, parentModuleMap, isNormalized, applyMap) {\n            var url, pluginModule, suffix, nameParts,\n                prefix = null,\n                parentName = parentModuleMap ? parentModuleMap.name : null,\n                originalName = name,\n                isDefine = true,\n                normalizedName = '';\n\n            //If no name, then it means it is a require call, generate an\n            //internal name.\n            if (!name) {\n                isDefine = false;\n                name = '_@r' + (requireCounter += 1);\n            }\n\n            nameParts = splitPrefix(name);\n            prefix = nameParts[0];\n            name = nameParts[1];\n\n            if (prefix) {\n                prefix = normalize(prefix, parentName, applyMap);\n                pluginModule = getOwn(defined, prefix);\n            }\n\n            //Account for relative paths if there is a base name.\n            if (name) {\n                if (prefix) {\n                    if (isNormalized) {\n                        normalizedName = name;\n                    } else if (pluginModule && pluginModule.normalize) {\n                        //Plugin is loaded, use its normalize method.\n                        normalizedName = pluginModule.normalize(name, function (name) {\n                            return normalize(name, parentName, applyMap);\n                        });\n                    } else {\n                        // If nested plugin references, then do not try to\n                        // normalize, as it will not normalize correctly. This\n                        // places a restriction on resourceIds, and the longer\n                        // term solution is not to normalize until plugins are\n                        // loaded and all normalizations to allow for async\n                        // loading of a loader plugin. But for now, fixes the\n                        // common uses. Details in #1131\n                        normalizedName = name.indexOf('!') === -1 ?\n                                         normalize(name, parentName, applyMap) :\n                                         name;\n                    }\n                } else {\n                    //A regular module.\n                    normalizedName = normalize(name, parentName, applyMap);\n\n                    //Normalized name may be a plugin ID due to map config\n                    //application in normalize. The map config values must\n                    //already be normalized, so do not need to redo that part.\n                    nameParts = splitPrefix(normalizedName);\n                    prefix = nameParts[0];\n                    normalizedName = nameParts[1];\n                    isNormalized = true;\n\n                    url = context.nameToUrl(normalizedName);\n                }\n            }\n\n            //If the id is a plugin id that cannot be determined if it needs\n            //normalization, stamp it with a unique ID so two matching relative\n            //ids that may conflict can be separate.\n            suffix = prefix && !pluginModule && !isNormalized ?\n                     '_unnormalized' + (unnormalizedCounter += 1) :\n                     '';\n\n            return {\n                prefix: prefix,\n                name: normalizedName,\n                parentMap: parentModuleMap,\n                unnormalized: !!suffix,\n                url: url,\n                originalName: originalName,\n                isDefine: isDefine,\n                id: (prefix ?\n                        prefix + '!' + normalizedName :\n                        normalizedName) + suffix\n            };\n        }\n\n        function getModule(depMap) {\n            var id = depMap.id,\n                mod = getOwn(registry, id);\n\n            if (!mod) {\n                mod = registry[id] = new context.Module(depMap);\n            }\n\n            return mod;\n        }\n\n        function on(depMap, name, fn) {\n            var id = depMap.id,\n                mod = getOwn(registry, id);\n\n            if (hasProp(defined, id) &&\n                    (!mod || mod.defineEmitComplete)) {\n                if (name === 'defined') {\n                    fn(defined[id]);\n                }\n            } else {\n                mod = getModule(depMap);\n                if (mod.error && name === 'error') {\n                    fn(mod.error);\n                } else {\n                    mod.on(name, fn);\n                }\n            }\n        }\n\n        function onError(err, errback) {\n            var ids = err.requireModules,\n                notified = false;\n\n            if (errback) {\n                errback(err);\n            } else {\n                each(ids, function (id) {\n                    var mod = getOwn(registry, id);\n                    if (mod) {\n                        //Set error on module, so it skips timeout checks.\n                        mod.error = err;\n                        if (mod.events.error) {\n                            notified = true;\n                            mod.emit('error', err);\n                        }\n                    }\n                });\n\n                if (!notified) {\n                    req.onError(err);\n                }\n            }\n        }\n\n        /**\n         * Internal method to transfer globalQueue items to this context's\n         * defQueue.\n         */\n        function takeGlobalQueue() {\n            //Push all the globalDefQueue items into the context's defQueue\n            if (globalDefQueue.length) {\n                each(globalDefQueue, function(queueItem) {\n                    var id = queueItem[0];\n                    if (typeof id === 'string') {\n                        context.defQueueMap[id] = true;\n                    }\n                    defQueue.push(queueItem);\n                });\n                globalDefQueue = [];\n            }\n        }\n\n        handlers = {\n            'require': function (mod) {\n                if (mod.require) {\n                    return mod.require;\n                } else {\n                    return (mod.require = context.makeRequire(mod.map));\n                }\n            },\n            'exports': function (mod) {\n                mod.usingExports = true;\n                if (mod.map.isDefine) {\n                    if (mod.exports) {\n                        return (defined[mod.map.id] = mod.exports);\n                    } else {\n                        return (mod.exports = defined[mod.map.id] = {});\n                    }\n                }\n            },\n            'module': function (mod) {\n                if (mod.module) {\n                    return mod.module;\n                } else {\n                    return (mod.module = {\n                        id: mod.map.id,\n                        uri: mod.map.url,\n                        config: function () {\n                            return getOwn(config.config, mod.map.id) || {};\n                        },\n                        exports: mod.exports || (mod.exports = {})\n                    });\n                }\n            }\n        };\n\n        function cleanRegistry(id) {\n            //Clean up machinery used for waiting modules.\n            delete registry[id];\n            delete enabledRegistry[id];\n        }\n\n        function breakCycle(mod, traced, processed) {\n            var id = mod.map.id;\n\n            if (mod.error) {\n                mod.emit('error', mod.error);\n            } else {\n                traced[id] = true;\n                each(mod.depMaps, function (depMap, i) {\n                    var depId = depMap.id,\n                        dep = getOwn(registry, depId);\n\n                    //Only force things that have not completed\n                    //being defined, so still in the registry,\n                    //and only if it has not been matched up\n                    //in the module already.\n                    if (dep && !mod.depMatched[i] && !processed[depId]) {\n                        if (getOwn(traced, depId)) {\n                            mod.defineDep(i, defined[depId]);\n                            mod.check(); //pass false?\n                        } else {\n                            breakCycle(dep, traced, processed);\n                        }\n                    }\n                });\n                processed[id] = true;\n            }\n        }\n\n        function checkLoaded() {\n            var err, usingPathFallback,\n                waitInterval = config.waitSeconds * 1000,\n                //It is possible to disable the wait interval by using waitSeconds of 0.\n                expired = waitInterval && (context.startTime + waitInterval) < new Date().getTime(),\n                noLoads = [],\n                reqCalls = [],\n                stillLoading = false,\n                needCycleCheck = true;\n\n            //Do not bother if this call was a result of a cycle break.\n            if (inCheckLoaded) {\n                return;\n            }\n\n            inCheckLoaded = true;\n\n            //Figure out the state of all the modules.\n            eachProp(enabledRegistry, function (mod) {\n                var map = mod.map,\n                    modId = map.id;\n\n                //Skip things that are not enabled or in error state.\n                if (!mod.enabled) {\n                    return;\n                }\n\n                if (!map.isDefine) {\n                    reqCalls.push(mod);\n                }\n\n                if (!mod.error) {\n                    //If the module should be executed, and it has not\n                    //been inited and time is up, remember it.\n                    if (!mod.inited && expired) {\n                        if (hasPathFallback(modId)) {\n                            usingPathFallback = true;\n                            stillLoading = true;\n                        } else {\n                            noLoads.push(modId);\n                            removeScript(modId);\n                        }\n                    } else if (!mod.inited && mod.fetched && map.isDefine) {\n                        stillLoading = true;\n                        if (!map.prefix) {\n                            //No reason to keep looking for unfinished\n                            //loading. If the only stillLoading is a\n                            //plugin resource though, keep going,\n                            //because it may be that a plugin resource\n                            //is waiting on a non-plugin cycle.\n                            return (needCycleCheck = false);\n                        }\n                    }\n                }\n            });\n\n            if (expired && noLoads.length) {\n                //If wait time expired, throw error of unloaded modules.\n                err = makeError('timeout', 'Load timeout for modules: ' + noLoads, null, noLoads);\n                err.contextName = context.contextName;\n                return onError(err);\n            }\n\n            //Not expired, check for a cycle.\n            if (needCycleCheck) {\n                each(reqCalls, function (mod) {\n                    breakCycle(mod, {}, {});\n                });\n            }\n\n            //If still waiting on loads, and the waiting load is something\n            //other than a plugin resource, or there are still outstanding\n            //scripts, then just try back later.\n            if ((!expired || usingPathFallback) && stillLoading) {\n                //Something is still waiting to load. Wait for it, but only\n                //if a timeout is not already in effect.\n                if ((isBrowser || isWebWorker) && !checkLoadedTimeoutId) {\n                    checkLoadedTimeoutId = setTimeout(function () {\n                        checkLoadedTimeoutId = 0;\n                        checkLoaded();\n                    }, 50);\n                }\n            }\n\n            inCheckLoaded = false;\n        }\n\n        Module = function (map) {\n            this.events = getOwn(undefEvents, map.id) || {};\n            this.map = map;\n            this.shim = getOwn(config.shim, map.id);\n            this.depExports = [];\n            this.depMaps = [];\n            this.depMatched = [];\n            this.pluginMaps = {};\n            this.depCount = 0;\n\n            /* this.exports this.factory\n               this.depMaps = [],\n               this.enabled, this.fetched\n            */\n        };\n\n        Module.prototype = {\n            init: function (depMaps, factory, errback, options) {\n                options = options || {};\n\n                //Do not do more inits if already done. Can happen if there\n                //are multiple define calls for the same module. That is not\n                //a normal, common case, but it is also not unexpected.\n                if (this.inited) {\n                    return;\n                }\n\n                this.factory = factory;\n\n                if (errback) {\n                    //Register for errors on this module.\n                    this.on('error', errback);\n                } else if (this.events.error) {\n                    //If no errback already, but there are error listeners\n                    //on this module, set up an errback to pass to the deps.\n                    errback = bind(this, function (err) {\n                        this.emit('error', err);\n                    });\n                }\n\n                //Do a copy of the dependency array, so that\n                //source inputs are not modified. For example\n                //\"shim\" deps are passed in here directly, and\n                //doing a direct modification of the depMaps array\n                //would affect that config.\n                this.depMaps = depMaps && depMaps.slice(0);\n\n                this.errback = errback;\n\n                //Indicate this module has be initialized\n                this.inited = true;\n\n                this.ignore = options.ignore;\n\n                //Could have option to init this module in enabled mode,\n                //or could have been previously marked as enabled. However,\n                //the dependencies are not known until init is called. So\n                //if enabled previously, now trigger dependencies as enabled.\n                if (options.enabled || this.enabled) {\n                    //Enable this module and dependencies.\n                    //Will call this.check()\n                    this.enable();\n                } else {\n                    this.check();\n                }\n            },\n\n            defineDep: function (i, depExports) {\n                //Because of cycles, defined callback for a given\n                //export can be called more than once.\n                if (!this.depMatched[i]) {\n                    this.depMatched[i] = true;\n                    this.depCount -= 1;\n                    this.depExports[i] = depExports;\n                }\n            },\n\n            fetch: function () {\n                if (this.fetched) {\n                    return;\n                }\n                this.fetched = true;\n\n                context.startTime = (new Date()).getTime();\n\n                var map = this.map;\n\n                //If the manager is for a plugin managed resource,\n                //ask the plugin to load it now.\n                if (this.shim) {\n                    context.makeRequire(this.map, {\n                        enableBuildCallback: true\n                    })(this.shim.deps || [], bind(this, function () {\n                        return map.prefix ? this.callPlugin() : this.load();\n                    }));\n                } else {\n                    //Regular dependency.\n                    return map.prefix ? this.callPlugin() : this.load();\n                }\n            },\n\n            load: function () {\n                var url = this.map.url;\n\n                //Regular dependency.\n                if (!urlFetched[url]) {\n                    urlFetched[url] = true;\n                    context.load(this.map.id, url);\n                }\n            },\n\n            /**\n             * Checks if the module is ready to define itself, and if so,\n             * define it.\n             */\n            check: function () {\n                if (!this.enabled || this.enabling) {\n                    return;\n                }\n\n                var err, cjsModule,\n                    id = this.map.id,\n                    depExports = this.depExports,\n                    exports = this.exports,\n                    factory = this.factory;\n\n                if (!this.inited) {\n                    // Only fetch if not already in the defQueue.\n                    if (!hasProp(context.defQueueMap, id)) {\n                        this.fetch();\n                    }\n                } else if (this.error) {\n                    this.emit('error', this.error);\n                } else if (!this.defining) {\n                    //The factory could trigger another require call\n                    //that would result in checking this module to\n                    //define itself again. If already in the process\n                    //of doing that, skip this work.\n                    this.defining = true;\n\n                    if (this.depCount < 1 && !this.defined) {\n                        if (isFunction(factory)) {\n                            //If there is an error listener, favor passing\n                            //to that instead of throwing an error. However,\n                            //only do it for define()'d  modules. require\n                            //errbacks should not be called for failures in\n                            //their callbacks (#699). However if a global\n                            //onError is set, use that.\n                            if ((this.events.error && this.map.isDefine) ||\n                                req.onError !== defaultOnError) {\n                                try {\n                                    exports = context.execCb(id, factory, depExports, exports);\n                                } catch (e) {\n                                    err = e;\n                                }\n                            } else {\n                                exports = context.execCb(id, factory, depExports, exports);\n                            }\n\n                            // Favor return value over exports. If node/cjs in play,\n                            // then will not have a return value anyway. Favor\n                            // module.exports assignment over exports object.\n                            if (this.map.isDefine && exports === undefined) {\n                                cjsModule = this.module;\n                                if (cjsModule) {\n                                    exports = cjsModule.exports;\n                                } else if (this.usingExports) {\n                                    //exports already set the defined value.\n                                    exports = this.exports;\n                                }\n                            }\n\n                            if (err) {\n                                err.requireMap = this.map;\n                                err.requireModules = this.map.isDefine ? [this.map.id] : null;\n                                err.requireType = this.map.isDefine ? 'define' : 'require';\n                                return onError((this.error = err));\n                            }\n\n                        } else {\n                            //Just a literal value\n                            exports = factory;\n                        }\n\n                        this.exports = exports;\n\n                        if (this.map.isDefine && !this.ignore) {\n                            defined[id] = exports;\n\n                            if (req.onResourceLoad) {\n                                var resLoadMaps = [];\n                                each(this.depMaps, function (depMap) {\n                                    resLoadMaps.push(depMap.normalizedMap || depMap);\n                                });\n                                req.onResourceLoad(context, this.map, resLoadMaps);\n                            }\n                        }\n\n                        //Clean up\n                        cleanRegistry(id);\n\n                        this.defined = true;\n                    }\n\n                    //Finished the define stage. Allow calling check again\n                    //to allow define notifications below in the case of a\n                    //cycle.\n                    this.defining = false;\n\n                    if (this.defined && !this.defineEmitted) {\n                        this.defineEmitted = true;\n                        this.emit('defined', this.exports);\n                        this.defineEmitComplete = true;\n                    }\n\n                }\n            },\n\n            callPlugin: function () {\n                var map = this.map,\n                    id = map.id,\n                    //Map already normalized the prefix.\n                    pluginMap = makeModuleMap(map.prefix);\n\n                //Mark this as a dependency for this plugin, so it\n                //can be traced for cycles.\n                this.depMaps.push(pluginMap);\n\n                on(pluginMap, 'defined', bind(this, function (plugin) {\n                    var load, normalizedMap, normalizedMod,\n                        bundleId = getOwn(bundlesMap, this.map.id),\n                        name = this.map.name,\n                        parentName = this.map.parentMap ? this.map.parentMap.name : null,\n                        localRequire = context.makeRequire(map.parentMap, {\n                            enableBuildCallback: true\n                        });\n\n                    //If current map is not normalized, wait for that\n                    //normalized name to load instead of continuing.\n                    if (this.map.unnormalized) {\n                        //Normalize the ID if the plugin allows it.\n                        if (plugin.normalize) {\n                            name = plugin.normalize(name, function (name) {\n                                return normalize(name, parentName, true);\n                            }) || '';\n                        }\n\n                        //prefix and name should already be normalized, no need\n                        //for applying map config again either.\n                        normalizedMap = makeModuleMap(map.prefix + '!' + name,\n                                                      this.map.parentMap,\n                                                      true);\n                        on(normalizedMap,\n                            'defined', bind(this, function (value) {\n                                this.map.normalizedMap = normalizedMap;\n                                this.init([], function () { return value; }, null, {\n                                    enabled: true,\n                                    ignore: true\n                                });\n                            }));\n\n                        normalizedMod = getOwn(registry, normalizedMap.id);\n                        if (normalizedMod) {\n                            //Mark this as a dependency for this plugin, so it\n                            //can be traced for cycles.\n                            this.depMaps.push(normalizedMap);\n\n                            if (this.events.error) {\n                                normalizedMod.on('error', bind(this, function (err) {\n                                    this.emit('error', err);\n                                }));\n                            }\n                            normalizedMod.enable();\n                        }\n\n                        return;\n                    }\n\n                    //If a paths config, then just load that file instead to\n                    //resolve the plugin, as it is built into that paths layer.\n                    if (bundleId) {\n                        this.map.url = context.nameToUrl(bundleId);\n                        this.load();\n                        return;\n                    }\n\n                    load = bind(this, function (value) {\n                        this.init([], function () { return value; }, null, {\n                            enabled: true\n                        });\n                    });\n\n                    load.error = bind(this, function (err) {\n                        this.inited = true;\n                        this.error = err;\n                        err.requireModules = [id];\n\n                        //Remove temp unnormalized modules for this module,\n                        //since they will never be resolved otherwise now.\n                        eachProp(registry, function (mod) {\n                            if (mod.map.id.indexOf(id + '_unnormalized') === 0) {\n                                cleanRegistry(mod.map.id);\n                            }\n                        });\n\n                        onError(err);\n                    });\n\n                    //Allow plugins to load other code without having to know the\n                    //context or how to 'complete' the load.\n                    load.fromText = bind(this, function (text, textAlt) {\n                        /*jslint evil: true */\n                        var moduleName = map.name,\n                            moduleMap = makeModuleMap(moduleName),\n                            hasInteractive = useInteractive;\n\n                        //As of 2.1.0, support just passing the text, to reinforce\n                        //fromText only being called once per resource. Still\n                        //support old style of passing moduleName but discard\n                        //that moduleName in favor of the internal ref.\n                        if (textAlt) {\n                            text = textAlt;\n                        }\n\n                        //Turn off interactive script matching for IE for any define\n                        //calls in the text, then turn it back on at the end.\n                        if (hasInteractive) {\n                            useInteractive = false;\n                        }\n\n                        //Prime the system by creating a module instance for\n                        //it.\n                        getModule(moduleMap);\n\n                        //Transfer any config to this other module.\n                        if (hasProp(config.config, id)) {\n                            config.config[moduleName] = config.config[id];\n                        }\n\n                        try {\n                            req.exec(text);\n                        } catch (e) {\n                            return onError(makeError('fromtexteval',\n                                             'fromText eval for ' + id +\n                                            ' failed: ' + e,\n                                             e,\n                                             [id]));\n                        }\n\n                        if (hasInteractive) {\n                            useInteractive = true;\n                        }\n\n                        //Mark this as a dependency for the plugin\n                        //resource\n                        this.depMaps.push(moduleMap);\n\n                        //Support anonymous modules.\n                        context.completeLoad(moduleName);\n\n                        //Bind the value of that module to the value for this\n                        //resource ID.\n                        localRequire([moduleName], load);\n                    });\n\n                    //Use parentName here since the plugin's name is not reliable,\n                    //could be some weird string with no path that actually wants to\n                    //reference the parentName's path.\n                    plugin.load(map.name, localRequire, load, config);\n                }));\n\n                context.enable(pluginMap, this);\n                this.pluginMaps[pluginMap.id] = pluginMap;\n            },\n\n            enable: function () {\n                enabledRegistry[this.map.id] = this;\n                this.enabled = true;\n\n                //Set flag mentioning that the module is enabling,\n                //so that immediate calls to the defined callbacks\n                //for dependencies do not trigger inadvertent load\n                //with the depCount still being zero.\n                this.enabling = true;\n\n                //Enable each dependency\n                each(this.depMaps, bind(this, function (depMap, i) {\n                    var id, mod, handler;\n\n                    if (typeof depMap === 'string') {\n                        //Dependency needs to be converted to a depMap\n                        //and wired up to this module.\n                        depMap = makeModuleMap(depMap,\n                                               (this.map.isDefine ? this.map : this.map.parentMap),\n                                               false,\n                                               !this.skipMap);\n                        this.depMaps[i] = depMap;\n\n                        handler = getOwn(handlers, depMap.id);\n\n                        if (handler) {\n                            this.depExports[i] = handler(this);\n                            return;\n                        }\n\n                        this.depCount += 1;\n\n                        on(depMap, 'defined', bind(this, function (depExports) {\n                            if (this.undefed) {\n                                return;\n                            }\n                            this.defineDep(i, depExports);\n                            this.check();\n                        }));\n\n                        if (this.errback) {\n                            on(depMap, 'error', bind(this, this.errback));\n                        } else if (this.events.error) {\n                            // No direct errback on this module, but something\n                            // else is listening for errors, so be sure to\n                            // propagate the error correctly.\n                            on(depMap, 'error', bind(this, function(err) {\n                                this.emit('error', err);\n                            }));\n                        }\n                    }\n\n                    id = depMap.id;\n                    mod = registry[id];\n\n                    //Skip special modules like 'require', 'exports', 'module'\n                    //Also, don't call enable if it is already enabled,\n                    //important in circular dependency cases.\n                    if (!hasProp(handlers, id) && mod && !mod.enabled) {\n                        context.enable(depMap, this);\n                    }\n                }));\n\n                //Enable each plugin that is used in\n                //a dependency\n                eachProp(this.pluginMaps, bind(this, function (pluginMap) {\n                    var mod = getOwn(registry, pluginMap.id);\n                    if (mod && !mod.enabled) {\n                        context.enable(pluginMap, this);\n                    }\n                }));\n\n                this.enabling = false;\n\n                this.check();\n            },\n\n            on: function (name, cb) {\n                var cbs = this.events[name];\n                if (!cbs) {\n                    cbs = this.events[name] = [];\n                }\n                cbs.push(cb);\n            },\n\n            emit: function (name, evt) {\n                each(this.events[name], function (cb) {\n                    cb(evt);\n                });\n                if (name === 'error') {\n                    //Now that the error handler was triggered, remove\n                    //the listeners, since this broken Module instance\n                    //can stay around for a while in the registry.\n                    delete this.events[name];\n                }\n            }\n        };\n\n        function callGetModule(args) {\n            //Skip modules already defined.\n            if (!hasProp(defined, args[0])) {\n                getModule(makeModuleMap(args[0], null, true)).init(args[1], args[2]);\n            }\n        }\n\n        function removeListener(node, func, name, ieName) {\n            //Favor detachEvent because of IE9\n            //issue, see attachEvent/addEventListener comment elsewhere\n            //in this file.\n            if (node.detachEvent && !isOpera) {\n                //Probably IE. If not it will throw an error, which will be\n                //useful to know.\n                if (ieName) {\n                    node.detachEvent(ieName, func);\n                }\n            } else {\n                node.removeEventListener(name, func, false);\n            }\n        }\n\n        /**\n         * Given an event from a script node, get the requirejs info from it,\n         * and then removes the event listeners on the node.\n         * @param {Event} evt\n         * @returns {Object}\n         */\n        function getScriptData(evt) {\n            //Using currentTarget instead of target for Firefox 2.0's sake. Not\n            //all old browsers will be supported, but this one was easy enough\n            //to support and still makes sense.\n            var node = evt.currentTarget || evt.srcElement;\n\n            //Remove the listeners once here.\n            removeListener(node, context.onScriptLoad, 'load', 'onreadystatechange');\n            removeListener(node, context.onScriptError, 'error');\n\n            return {\n                node: node,\n                id: node && node.getAttribute('data-requiremodule')\n            };\n        }\n\n        function intakeDefines() {\n            var args;\n\n            //Any defined modules in the global queue, intake them now.\n            takeGlobalQueue();\n\n            //Make sure any remaining defQueue items get properly processed.\n            while (defQueue.length) {\n                args = defQueue.shift();\n                if (args[0] === null) {\n                    return onError(makeError('mismatch', 'Mismatched anonymous define() module: ' +\n                        args[args.length - 1]));\n                } else {\n                    //args are id, deps, factory. Should be normalized by the\n                    //define() function.\n                    callGetModule(args);\n                }\n            }\n            context.defQueueMap = {};\n        }\n\n        context = {\n            config: config,\n            contextName: contextName,\n            registry: registry,\n            defined: defined,\n            urlFetched: urlFetched,\n            defQueue: defQueue,\n            defQueueMap: {},\n            Module: Module,\n            makeModuleMap: makeModuleMap,\n            nextTick: req.nextTick,\n            onError: onError,\n\n            /**\n             * Set a configuration for the context.\n             * @param {Object} cfg config object to integrate.\n             */\n            configure: function (cfg) {\n                //Make sure the baseUrl ends in a slash.\n                if (cfg.baseUrl) {\n                    if (cfg.baseUrl.charAt(cfg.baseUrl.length - 1) !== '/') {\n                        cfg.baseUrl += '/';\n                    }\n                }\n\n                // Convert old style urlArgs string to a function.\n                if (typeof cfg.urlArgs === 'string') {\n                    var urlArgs = cfg.urlArgs;\n                    cfg.urlArgs = function(id, url) {\n                        return (url.indexOf('?') === -1 ? '?' : '&') + urlArgs;\n                    };\n                }\n\n                //Save off the paths since they require special processing,\n                //they are additive.\n                var shim = config.shim,\n                    objs = {\n                        paths: true,\n                        bundles: true,\n                        config: true,\n                        map: true\n                    };\n\n                eachProp(cfg, function (value, prop) {\n                    if (objs[prop]) {\n                        if (!config[prop]) {\n                            config[prop] = {};\n                        }\n                        mixin(config[prop], value, true, true);\n                    } else {\n                        config[prop] = value;\n                    }\n                });\n\n                //Reverse map the bundles\n                if (cfg.bundles) {\n                    eachProp(cfg.bundles, function (value, prop) {\n                        each(value, function (v) {\n                            if (v !== prop) {\n                                bundlesMap[v] = prop;\n                            }\n                        });\n                    });\n                }\n\n                //Merge shim\n                if (cfg.shim) {\n                    eachProp(cfg.shim, function (value, id) {\n                        //Normalize the structure\n                        if (isArray(value)) {\n                            value = {\n                                deps: value\n                            };\n                        }\n                        if ((value.exports || value.init) && !value.exportsFn) {\n                            value.exportsFn = context.makeShimExports(value);\n                        }\n                        shim[id] = value;\n                    });\n                    config.shim = shim;\n                }\n\n                //Adjust packages if necessary.\n                if (cfg.packages) {\n                    each(cfg.packages, function (pkgObj) {\n                        var location, name;\n\n                        pkgObj = typeof pkgObj === 'string' ? {name: pkgObj} : pkgObj;\n\n                        name = pkgObj.name;\n                        location = pkgObj.location;\n                        if (location) {\n                            config.paths[name] = pkgObj.location;\n                        }\n\n                        //Save pointer to main module ID for pkg name.\n                        //Remove leading dot in main, so main paths are normalized,\n                        //and remove any trailing .js, since different package\n                        //envs have different conventions: some use a module name,\n                        //some use a file name.\n                        config.pkgs[name] = pkgObj.name + '/' + (pkgObj.main || 'main')\n                                     .replace(currDirRegExp, '')\n                                     .replace(jsSuffixRegExp, '');\n                    });\n                }\n\n                //If there are any \"waiting to execute\" modules in the registry,\n                //update the maps for them, since their info, like URLs to load,\n                //may have changed.\n                eachProp(registry, function (mod, id) {\n                    //If module already has init called, since it is too\n                    //late to modify them, and ignore unnormalized ones\n                    //since they are transient.\n                    if (!mod.inited && !mod.map.unnormalized) {\n                        mod.map = makeModuleMap(id, null, true);\n                    }\n                });\n\n                //If a deps array or a config callback is specified, then call\n                //require with those args. This is useful when require is defined as a\n                //config object before require.js is loaded.\n                if (cfg.deps || cfg.callback) {\n                    context.require(cfg.deps || [], cfg.callback);\n                }\n            },\n\n            makeShimExports: function (value) {\n                function fn() {\n                    var ret;\n                    if (value.init) {\n                        ret = value.init.apply(global, arguments);\n                    }\n                    return ret || (value.exports && getGlobal(value.exports));\n                }\n                return fn;\n            },\n\n            makeRequire: function (relMap, options) {\n                options = options || {};\n\n                function localRequire(deps, callback, errback) {\n                    var id, map, requireMod;\n\n                    if (options.enableBuildCallback && callback && isFunction(callback)) {\n                        callback.__requireJsBuild = true;\n                    }\n\n                    if (typeof deps === 'string') {\n                        if (isFunction(callback)) {\n                            //Invalid call\n                            return onError(makeError('requireargs', 'Invalid require call'), errback);\n                        }\n\n                        //If require|exports|module are requested, get the\n                        //value for them from the special handlers. Caveat:\n                        //this only works while module is being defined.\n                        if (relMap && hasProp(handlers, deps)) {\n                            return handlers[deps](registry[relMap.id]);\n                        }\n\n                        //Synchronous access to one module. If require.get is\n                        //available (as in the Node adapter), prefer that.\n                        if (req.get) {\n                            return req.get(context, deps, relMap, localRequire);\n                        }\n\n                        //Normalize module name, if it contains . or ..\n                        map = makeModuleMap(deps, relMap, false, true);\n                        id = map.id;\n\n                        if (!hasProp(defined, id)) {\n                            return onError(makeError('notloaded', 'Module name \"' +\n                                        id +\n                                        '\" has not been loaded yet for context: ' +\n                                        contextName +\n                                        (relMap ? '' : '. Use require([])')));\n                        }\n                        return defined[id];\n                    }\n\n                    //Grab defines waiting in the global queue.\n                    intakeDefines();\n\n                    //Mark all the dependencies as needing to be loaded.\n                    context.nextTick(function () {\n                        //Some defines could have been added since the\n                        //require call, collect them.\n                        intakeDefines();\n\n                        requireMod = getModule(makeModuleMap(null, relMap));\n\n                        //Store if map config should be applied to this require\n                        //call for dependencies.\n                        requireMod.skipMap = options.skipMap;\n\n                        requireMod.init(deps, callback, errback, {\n                            enabled: true\n                        });\n\n                        checkLoaded();\n                    });\n\n                    return localRequire;\n                }\n\n                mixin(localRequire, {\n                    isBrowser: isBrowser,\n\n                    /**\n                     * Converts a module name + .extension into an URL path.\n                     * *Requires* the use of a module name. It does not support using\n                     * plain URLs like nameToUrl.\n                     */\n                    toUrl: function (moduleNamePlusExt) {\n                        var ext,\n                            index = moduleNamePlusExt.lastIndexOf('.'),\n                            segment = moduleNamePlusExt.split('/')[0],\n                            isRelative = segment === '.' || segment === '..';\n\n                        //Have a file extension alias, and it is not the\n                        //dots from a relative path.\n                        if (index !== -1 && (!isRelative || index > 1)) {\n                            ext = moduleNamePlusExt.substring(index, moduleNamePlusExt.length);\n                            moduleNamePlusExt = moduleNamePlusExt.substring(0, index);\n                        }\n\n                        return context.nameToUrl(normalize(moduleNamePlusExt,\n                                                relMap && relMap.id, true), ext,  true);\n                    },\n\n                    defined: function (id) {\n                        return hasProp(defined, makeModuleMap(id, relMap, false, true).id);\n                    },\n\n                    specified: function (id) {\n                        id = makeModuleMap(id, relMap, false, true).id;\n                        return hasProp(defined, id) || hasProp(registry, id);\n                    }\n                });\n\n                //Only allow undef on top level require calls\n                if (!relMap) {\n                    localRequire.undef = function (id) {\n                        //Bind any waiting define() calls to this context,\n                        //fix for #408\n                        takeGlobalQueue();\n\n                        var map = makeModuleMap(id, relMap, true),\n                            mod = getOwn(registry, id);\n\n                        mod.undefed = true;\n                        removeScript(id);\n\n                        delete defined[id];\n                        delete urlFetched[map.url];\n                        delete undefEvents[id];\n\n                        //Clean queued defines too. Go backwards\n                        //in array so that the splices do not\n                        //mess up the iteration.\n                        eachReverse(defQueue, function(args, i) {\n                            if (args[0] === id) {\n                                defQueue.splice(i, 1);\n                            }\n                        });\n                        delete context.defQueueMap[id];\n\n                        if (mod) {\n                            //Hold on to listeners in case the\n                            //module will be attempted to be reloaded\n                            //using a different config.\n                            if (mod.events.defined) {\n                                undefEvents[id] = mod.events;\n                            }\n\n                            cleanRegistry(id);\n                        }\n                    };\n                }\n\n                return localRequire;\n            },\n\n            /**\n             * Called to enable a module if it is still in the registry\n             * awaiting enablement. A second arg, parent, the parent module,\n             * is passed in for context, when this method is overridden by\n             * the optimizer. Not shown here to keep code compact.\n             */\n            enable: function (depMap) {\n                var mod = getOwn(registry, depMap.id);\n                if (mod) {\n                    getModule(depMap).enable();\n                }\n            },\n\n            /**\n             * Internal method used by environment adapters to complete a load event.\n             * A load event could be a script load or just a load pass from a synchronous\n             * load call.\n             * @param {String} moduleName the name of the module to potentially complete.\n             */\n            completeLoad: function (moduleName) {\n                var found, args, mod,\n                    shim = getOwn(config.shim, moduleName) || {},\n                    shExports = shim.exports;\n\n                takeGlobalQueue();\n\n                while (defQueue.length) {\n                    args = defQueue.shift();\n                    if (args[0] === null) {\n                        args[0] = moduleName;\n                        //If already found an anonymous module and bound it\n                        //to this name, then this is some other anon module\n                        //waiting for its completeLoad to fire.\n                        if (found) {\n                            break;\n                        }\n                        found = true;\n                    } else if (args[0] === moduleName) {\n                        //Found matching define call for this script!\n                        found = true;\n                    }\n\n                    callGetModule(args);\n                }\n                context.defQueueMap = {};\n\n                //Do this after the cycle of callGetModule in case the result\n                //of those calls/init calls changes the registry.\n                mod = getOwn(registry, moduleName);\n\n                if (!found && !hasProp(defined, moduleName) && mod && !mod.inited) {\n                    if (config.enforceDefine && (!shExports || !getGlobal(shExports))) {\n                        if (hasPathFallback(moduleName)) {\n                            return;\n                        } else {\n                            return onError(makeError('nodefine',\n                                             'No define call for ' + moduleName,\n                                             null,\n                                             [moduleName]));\n                        }\n                    } else {\n                        //A script that does not call define(), so just simulate\n                        //the call for it.\n                        callGetModule([moduleName, (shim.deps || []), shim.exportsFn]);\n                    }\n                }\n\n                checkLoaded();\n            },\n\n            /**\n             * Converts a module name to a file path. Supports cases where\n             * moduleName may actually be just an URL.\n             * Note that it **does not** call normalize on the moduleName,\n             * it is assumed to have already been normalized. This is an\n             * internal API, not a public one. Use toUrl for the public API.\n             */\n            nameToUrl: function (moduleName, ext, skipExt) {\n                var paths, syms, i, parentModule, url,\n                    parentPath, bundleId,\n                    pkgMain = getOwn(config.pkgs, moduleName);\n\n                if (pkgMain) {\n                    moduleName = pkgMain;\n                }\n\n                bundleId = getOwn(bundlesMap, moduleName);\n\n                if (bundleId) {\n                    return context.nameToUrl(bundleId, ext, skipExt);\n                }\n\n                //If a colon is in the URL, it indicates a protocol is used and it is just\n                //an URL to a file, or if it starts with a slash, contains a query arg (i.e. ?)\n                //or ends with .js, then assume the user meant to use an url and not a module id.\n                //The slash is important for protocol-less URLs as well as full paths.\n                if (req.jsExtRegExp.test(moduleName)) {\n                    //Just a plain path, not module name lookup, so just return it.\n                    //Add extension if it is included. This is a bit wonky, only non-.js things pass\n                    //an extension, this method probably needs to be reworked.\n                    url = moduleName + (ext || '');\n                } else {\n                    //A module that needs to be converted to a path.\n                    paths = config.paths;\n\n                    syms = moduleName.split('/');\n                    //For each module name segment, see if there is a path\n                    //registered for it. Start with most specific name\n                    //and work up from it.\n                    for (i = syms.length; i > 0; i -= 1) {\n                        parentModule = syms.slice(0, i).join('/');\n\n                        parentPath = getOwn(paths, parentModule);\n                        if (parentPath) {\n                            //If an array, it means there are a few choices,\n                            //Choose the one that is desired\n                            if (isArray(parentPath)) {\n                                parentPath = parentPath[0];\n                            }\n                            syms.splice(0, i, parentPath);\n                            break;\n                        }\n                    }\n\n                    //Join the path parts together, then figure out if baseUrl is needed.\n                    url = syms.join('/');\n                    url += (ext || (/^data\\:|^blob\\:|\\?/.test(url) || skipExt ? '' : '.js'));\n                    url = (url.charAt(0) === '/' || url.match(/^[\\w\\+\\.\\-]+:/) ? '' : config.baseUrl) + url;\n                }\n\n                return config.urlArgs && !/^blob\\:/.test(url) ?\n                       url + config.urlArgs(moduleName, url) : url;\n            },\n\n            //Delegates to req.load. Broken out as a separate function to\n            //allow overriding in the optimizer.\n            load: function (id, url) {\n                req.load(context, id, url);\n            },\n\n            /**\n             * Executes a module callback function. Broken out as a separate function\n             * solely to allow the build system to sequence the files in the built\n             * layer in the right sequence.\n             *\n             * @private\n             */\n            execCb: function (name, callback, args, exports) {\n                return callback.apply(exports, args);\n            },\n\n            /**\n             * callback for script loads, used to check status of loading.\n             *\n             * @param {Event} evt the event from the browser for the script\n             * that was loaded.\n             */\n            onScriptLoad: function (evt) {\n                //Using currentTarget instead of target for Firefox 2.0's sake. Not\n                //all old browsers will be supported, but this one was easy enough\n                //to support and still makes sense.\n                if (evt.type === 'load' ||\n                        (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {\n                    //Reset interactive script so a script node is not held onto for\n                    //to long.\n                    interactiveScript = null;\n\n                    //Pull out the name of the module and the context.\n                    var data = getScriptData(evt);\n                    context.completeLoad(data.id);\n                }\n            },\n\n            /**\n             * Callback for script errors.\n             */\n            onScriptError: function (evt) {\n                var data = getScriptData(evt);\n                if (!hasPathFallback(data.id)) {\n                    var parents = [];\n                    eachProp(registry, function(value, key) {\n                        if (key.indexOf('_@r') !== 0) {\n                            each(value.depMaps, function(depMap) {\n                                if (depMap.id === data.id) {\n                                    parents.push(key);\n                                    return true;\n                                }\n                            });\n                        }\n                    });\n                    return onError(makeError('scripterror', 'Script error for \"' + data.id +\n                                             (parents.length ?\n                                             '\", needed by: ' + parents.join(', ') :\n                                             '\"'), evt, [data.id]));\n                }\n            }\n        };\n\n        context.require = context.makeRequire();\n        return context;\n    }\n\n    /**\n     * Main entry point.\n     *\n     * If the only argument to require is a string, then the module that\n     * is represented by that string is fetched for the appropriate context.\n     *\n     * If the first argument is an array, then it will be treated as an array\n     * of dependency string names to fetch. An optional function callback can\n     * be specified to execute when all of those dependencies are available.\n     *\n     * Make a local req variable to help Caja compliance (it assumes things\n     * on a require that are not standardized), and to give a short\n     * name for minification/local scope use.\n     */\n    req = requirejs = function (deps, callback, errback, optional) {\n\n        //Find the right context, use default\n        var context, config,\n            contextName = defContextName;\n\n        // Determine if have config object in the call.\n        if (!isArray(deps) && typeof deps !== 'string') {\n            // deps is a config object\n            config = deps;\n            if (isArray(callback)) {\n                // Adjust args if there are dependencies\n                deps = callback;\n                callback = errback;\n                errback = optional;\n            } else {\n                deps = [];\n            }\n        }\n\n        if (config && config.context) {\n            contextName = config.context;\n        }\n\n        context = getOwn(contexts, contextName);\n        if (!context) {\n            context = contexts[contextName] = req.s.newContext(contextName);\n        }\n\n        if (config) {\n            context.configure(config);\n        }\n\n        return context.require(deps, callback, errback);\n    };\n\n    /**\n     * Support require.config() to make it easier to cooperate with other\n     * AMD loaders on globally agreed names.\n     */\n    req.config = function (config) {\n        return req(config);\n    };\n\n    /**\n     * Execute something after the current tick\n     * of the event loop. Override for other envs\n     * that have a better solution than setTimeout.\n     * @param  {Function} fn function to execute later.\n     */\n    req.nextTick = typeof setTimeout !== 'undefined' ? function (fn) {\n        setTimeout(fn, 4);\n    } : function (fn) { fn(); };\n\n    /**\n     * Export require as a global, but only if it does not already exist.\n     */\n    if (!require) {\n        require = req;\n    }\n\n    req.version = version;\n\n    //Used to filter out dependencies that are already paths.\n    req.jsExtRegExp = /^\\/|:|\\?|\\.js$/;\n    req.isBrowser = isBrowser;\n    s = req.s = {\n        contexts: contexts,\n        newContext: newContext\n    };\n\n    //Create default context.\n    req({});\n\n    //Exports some context-sensitive methods on global require.\n    each([\n        'toUrl',\n        'undef',\n        'defined',\n        'specified'\n    ], function (prop) {\n        //Reference from contexts instead of early binding to default context,\n        //so that during builds, the latest instance of the default context\n        //with its config gets used.\n        req[prop] = function () {\n            var ctx = contexts[defContextName];\n            return ctx.require[prop].apply(ctx, arguments);\n        };\n    });\n\n    if (isBrowser) {\n        head = s.head = document.getElementsByTagName('head')[0];\n        //If BASE tag is in play, using appendChild is a problem for IE6.\n        //When that browser dies, this can be removed. Details in this jQuery bug:\n        //http://dev.jquery.com/ticket/2709\n        baseElement = document.getElementsByTagName('base')[0];\n        if (baseElement) {\n            head = s.head = baseElement.parentNode;\n        }\n    }\n\n    /**\n     * Any errors that require explicitly generates will be passed to this\n     * function. Intercept/override it if you want custom error handling.\n     * @param {Error} err the error object.\n     */\n    req.onError = defaultOnError;\n\n    /**\n     * Creates the node for the load command. Only used in browser envs.\n     */\n    req.createNode = function (config, moduleName, url) {\n        var node = config.xhtml ?\n                document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') :\n                document.createElement('script');\n        node.type = config.scriptType || 'text/javascript';\n        node.charset = 'utf-8';\n        node.async = true;\n        return node;\n    };\n\n    /**\n     * Does the request to load a module for the browser case.\n     * Make this a separate function to allow other environments\n     * to override it.\n     *\n     * @param {Object} context the require context to find state.\n     * @param {String} moduleName the name of the module.\n     * @param {Object} url the URL to the module.\n     */\n    req.load = function (context, moduleName, url) {\n        var config = (context && context.config) || {},\n            node;\n        if (isBrowser) {\n            //In the browser so use a script tag\n            node = req.createNode(config, moduleName, url);\n\n            node.setAttribute('data-requirecontext', context.contextName);\n            node.setAttribute('data-requiremodule', moduleName);\n\n            //Set up load listener. Test attachEvent first because IE9 has\n            //a subtle issue in its addEventListener and script onload firings\n            //that do not match the behavior of all other browsers with\n            //addEventListener support, which fire the onload event for a\n            //script right after the script execution. See:\n            //https://connect.microsoft.com/IE/feedback/details/648057/script-onload-event-is-not-fired-immediately-after-script-execution\n            //UNFORTUNATELY Opera implements attachEvent but does not follow the script\n            //script execution mode.\n            if (node.attachEvent &&\n                    //Check if node.attachEvent is artificially added by custom script or\n                    //natively supported by browser\n                    //read https://github.com/requirejs/requirejs/issues/187\n                    //if we can NOT find [native code] then it must NOT natively supported.\n                    //in IE8, node.attachEvent does not have toString()\n                    //Note the test for \"[native code\" with no closing brace, see:\n                    //https://github.com/requirejs/requirejs/issues/273\n                    !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&\n                    !isOpera) {\n                //Probably IE. IE (at least 6-8) do not fire\n                //script onload right after executing the script, so\n                //we cannot tie the anonymous define call to a name.\n                //However, IE reports the script as being in 'interactive'\n                //readyState at the time of the define call.\n                useInteractive = true;\n\n                node.attachEvent('onreadystatechange', context.onScriptLoad);\n                //It would be great to add an error handler here to catch\n                //404s in IE9+. However, onreadystatechange will fire before\n                //the error handler, so that does not help. If addEventListener\n                //is used, then IE will fire error before load, but we cannot\n                //use that pathway given the connect.microsoft.com issue\n                //mentioned above about not doing the 'script execute,\n                //then fire the script load event listener before execute\n                //next script' that other browsers do.\n                //Best hope: IE10 fixes the issues,\n                //and then destroys all installs of IE 6-9.\n                //node.attachEvent('onerror', context.onScriptError);\n            } else {\n                node.addEventListener('load', context.onScriptLoad, false);\n                node.addEventListener('error', context.onScriptError, false);\n            }\n            node.src = url;\n\n            //Calling onNodeCreated after all properties on the node have been\n            //set, but before it is placed in the DOM.\n            if (config.onNodeCreated) {\n                config.onNodeCreated(node, config, moduleName, url);\n            }\n\n            //For some cache cases in IE 6-8, the script executes before the end\n            //of the appendChild execution, so to tie an anonymous define\n            //call to the module name (which is stored on the node), hold on\n            //to a reference to this node, but clear after the DOM insertion.\n            currentlyAddingScript = node;\n            if (baseElement) {\n                head.insertBefore(node, baseElement);\n            } else {\n                head.appendChild(node);\n            }\n            currentlyAddingScript = null;\n\n            return node;\n        } else if (isWebWorker) {\n            try {\n                //In a web worker, use importScripts. This is not a very\n                //efficient use of importScripts, importScripts will block until\n                //its script is downloaded and evaluated. However, if web workers\n                //are in play, the expectation is that a build has been done so\n                //that only one script needs to be loaded anyway. This may need\n                //to be reevaluated if other use cases become common.\n\n                // Post a task to the event loop to work around a bug in WebKit\n                // where the worker gets garbage-collected after calling\n                // importScripts(): https://webkit.org/b/153317\n                setTimeout(function() {}, 0);\n                importScripts(url);\n\n                //Account for anonymous modules\n                context.completeLoad(moduleName);\n            } catch (e) {\n                context.onError(makeError('importscripts',\n                                'importScripts failed for ' +\n                                    moduleName + ' at ' + url,\n                                e,\n                                [moduleName]));\n            }\n        }\n    };\n\n    function getInteractiveScript() {\n        if (interactiveScript && interactiveScript.readyState === 'interactive') {\n            return interactiveScript;\n        }\n\n        eachReverse(scripts(), function (script) {\n            if (script.readyState === 'interactive') {\n                return (interactiveScript = script);\n            }\n        });\n        return interactiveScript;\n    }\n\n    //Look for a data-main script attribute, which could also adjust the baseUrl.\n    if (isBrowser && !cfg.skipDataMain) {\n        //Figure out baseUrl. Get it from the script tag with require.js in it.\n        eachReverse(scripts(), function (script) {\n            //Set the 'head' where we can append children by\n            //using the script's parent.\n            if (!head) {\n                head = script.parentNode;\n            }\n\n            //Look for a data-main attribute to set main script for the page\n            //to load. If it is there, the path to data main becomes the\n            //baseUrl, if it is not already set.\n            dataMain = script.getAttribute('data-main');\n            if (dataMain) {\n                //Preserve dataMain in case it is a path (i.e. contains '?')\n                mainScript = dataMain;\n\n                //Set final baseUrl if there is not already an explicit one,\n                //but only do so if the data-main value is not a loader plugin\n                //module ID.\n                if (!cfg.baseUrl && mainScript.indexOf('!') === -1) {\n                    //Pull off the directory of data-main for use as the\n                    //baseUrl.\n                    src = mainScript.split('/');\n                    mainScript = src.pop();\n                    subPath = src.length ? src.join('/')  + '/' : './';\n\n                    cfg.baseUrl = subPath;\n                }\n\n                //Strip off any trailing .js since mainScript is now\n                //like a module name.\n                mainScript = mainScript.replace(jsSuffixRegExp, '');\n\n                //If mainScript is still a path, fall back to dataMain\n                if (req.jsExtRegExp.test(mainScript)) {\n                    mainScript = dataMain;\n                }\n\n                //Put the data-main script in the files to load.\n                cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript];\n\n                return true;\n            }\n        });\n    }\n\n    /**\n     * The function that handles definitions of modules. Differs from\n     * require() in that a string for the module should be the first argument,\n     * and the function to execute after dependencies are loaded should\n     * return a value to define the module corresponding to the first argument's\n     * name.\n     */\n    define = function (name, deps, callback) {\n        var node, context;\n\n        //Allow for anonymous modules\n        if (typeof name !== 'string') {\n            //Adjust args appropriately\n            callback = deps;\n            deps = name;\n            name = null;\n        }\n\n        //This module may not have dependencies\n        if (!isArray(deps)) {\n            callback = deps;\n            deps = null;\n        }\n\n        //If no name, and callback is a function, then figure out if it a\n        //CommonJS thing with dependencies.\n        if (!deps && isFunction(callback)) {\n            deps = [];\n            //Remove comments from the callback string,\n            //look for require calls, and pull them into the dependencies,\n            //but only if there are function args.\n            if (callback.length) {\n                callback\n                    .toString()\n                    .replace(commentRegExp, commentReplace)\n                    .replace(cjsRequireRegExp, function (match, dep) {\n                        deps.push(dep);\n                    });\n\n                //May be a CommonJS thing even without require calls, but still\n                //could use exports, and module. Avoid doing exports and module\n                //work though if it just needs require.\n                //REQUIRES the function to expect the CommonJS variables in the\n                //order listed below.\n                deps = (callback.length === 1 ? ['require'] : ['require', 'exports', 'module']).concat(deps);\n            }\n        }\n\n        //If in IE 6-8 and hit an anonymous define() call, do the interactive\n        //work.\n        if (useInteractive) {\n            node = currentlyAddingScript || getInteractiveScript();\n            if (node) {\n                if (!name) {\n                    name = node.getAttribute('data-requiremodule');\n                }\n                context = contexts[node.getAttribute('data-requirecontext')];\n            }\n        }\n\n        //Always save off evaluating the def call until the script onload handler.\n        //This allows multiple modules to be in a file without prematurely\n        //tracing dependencies, and allows for anonymous module support,\n        //where the module name is not known until the script onload event\n        //occurs. If no context, use the global queue, and get it processed\n        //in the onscript load callback.\n        if (context) {\n            context.defQueue.push([name, deps, callback]);\n            context.defQueueMap[name] = true;\n        } else {\n            globalDefQueue.push([name, deps, callback]);\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n\n    /**\n     * Executes the text. Normally just uses eval, but can be modified\n     * to use a better, environment-specific call. Only used for transpiling\n     * loader plugins, not for plain JS modules.\n     * @param {String} text the text to execute/evaluate.\n     */\n    req.exec = function (text) {\n        /*jslint evil: true */\n        return eval(text);\n    };\n\n    //Set up with config info.\n    req(cfg);\n\n    global.requirejs = global.require = req;\n    global.define = define;\n}(window, (typeof setTimeout === 'undefined' ? undefined : setTimeout)));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = vue;","var __WEBPACK_NAMESPACE_OBJECT__ = react-dom/client;","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import Nycticorax from 'nycticorax'\nimport { Store } from '../types'\n\nexport const {\n  createStore,\n  getStore,\n  connect,\n  emit,\n  subscribe,\n  dispatch,\n  useStore,\n} = new Nycticorax<Store>()\n\nexport function getUserStore<S extends object = {}>() {\n  const globalStore = getStore()\n  const keys = Object.keys(globalStore)\n  const store: Record<string, any> = {}\n\n  keys.forEach((key) => {\n    store[key] = globalStore[key]\n  })\n\n  return store as S\n}\n","import React, { ComponentType } from 'react'\nimport { FallbackNode, ErrorFallbackNode } from '@variousjs/various'\nimport { getClassNameWithModule } from './helper'\nimport { Store } from '../types'\n\nexport const Fallback: FallbackNode<Store> = (props) => {\n  const className = getClassNameWithModule(props.$self, 'various-component-fallback')\n  return (\n    <div className={className}>Loading</div>\n  )\n}\n\nexport const ErrorFallback: ErrorFallbackNode<Store> = ({ $error, $reload, $self }) => {\n  const className = getClassNameWithModule($self, 'various-component-error_fallback')\n  return (\n    <div className={className}>\n      <h3>{$error.type}</h3>\n      <p>{$error.message}</p>\n      <button type=\"button\" onClick={$reload}>\n        Reload\n      </button>\n    </div>\n  )\n}\n\nexport const Root: ComponentType = () => (\n  <div>App Container is not defined</div>\n)\n","import {\n  FallbackNode,\n  ErrorFallbackNode,\n  App,\n  ModuleDefined,\n} from '@variousjs/various'\nimport { Fallback, ErrorFallback } from './default-component'\nimport {\n  PublicActions,\n  Store,\n  ConnectorI18nConfig,\n  Actions,\n} from '../types'\nimport { getNameWithModule } from './helper'\n\nclass Connector {\n  private fallbackComponent: FallbackNode<Store>\n\n  private errorFallbackComponent: ErrorFallbackNode<Store>\n\n  private storeActions: Actions<Store>\n\n  private componentActions: Record<string, PublicActions>\n\n  private i18nConfigs: Record<string, ConnectorI18nConfig | undefined>\n\n  private globalI18nConfig: ConnectorI18nConfig | undefined\n\n  private middlewares: App['middlewares']\n\n  constructor() {\n    this.fallbackComponent = Fallback\n    this.errorFallbackComponent = ErrorFallback\n    this.storeActions = {}\n    this.componentActions = {}\n    this.i18nConfigs = {}\n    this.middlewares = {}\n  }\n\n  setMiddlewares(m: App['middlewares']) {\n    this.middlewares = m\n  }\n\n  getMiddlewares() {\n    return this.middlewares\n  }\n\n  setI18nConfig(moduleDefined: ModuleDefined, config: ConnectorI18nConfig) {\n    const name = getNameWithModule(moduleDefined)\n    this.i18nConfigs[name] = { ...this.i18nConfigs[name], ...config }\n  }\n\n  getI18nConfig(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.i18nConfigs[name]\n  }\n\n  setGlobalI18nConfig(config: ConnectorI18nConfig) {\n    this.globalI18nConfig = { ...this.globalI18nConfig, ...config }\n  }\n\n  getGlobalI18nConfig() {\n    return this.globalI18nConfig\n  }\n\n  setComponentActions(moduleDefined: ModuleDefined, actions: PublicActions) {\n    const name = getNameWithModule(moduleDefined)\n    this.componentActions[name] = actions\n  }\n\n  deleteComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    delete this.componentActions[name]\n  }\n\n  getComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.componentActions[name]\n  }\n\n  setStoreActions(actions: Actions<Store>) {\n    this.storeActions = actions\n  }\n\n  getStoreActions() {\n    return this.storeActions\n  }\n\n  setFallbackComponent(fallbackComponent: FallbackNode<Store>) {\n    this.fallbackComponent = fallbackComponent\n  }\n\n  getFallbackComponent() {\n    return this.fallbackComponent\n  }\n\n  setErrorFallbackComponent(errorFallbackComponent: ErrorFallbackNode<Store>) {\n    this.errorFallbackComponent = errorFallbackComponent\n  }\n\n  getErrorFallbackComponent() {\n    return this.errorFallbackComponent\n  }\n}\n\nexport default new Connector()\n","import { createLogger as cl, LogEvent } from '@variousjs/various'\nimport connector from './connector'\nimport { getNameWithModule, VariousError } from './helper'\n\ntype LogArgs = Parameters<LogEvent>[0]\ntype LogLevel = LogArgs['level']\n\nconst logger = (args: LogArgs) => {\n  const middlewares = connector.getMiddlewares()\n  const canLog = middlewares?.onLog?.(args)\n\n  if (canLog === false) {\n    return\n  }\n\n  const colorMap: Record<LogLevel, string> = {\n    info: 'blue',\n    warn: 'orange',\n    error: 'red',\n  }\n  const color = colorMap[args.level]\n\n  const params = [\n    `%c ${getNameWithModule(args)} `,\n    `background:${color};border:1px solid ${color};padding:1px;border-radius:2px 0 0 2px;color: #fff;`,\n  ]\n\n  if (args.type) {\n    params[0] = `${params[0]}%c ${args.type} %c`\n    params.push(\n      `border:1px solid ${color};padding:1px;border-radius:0 2px 2px 0;color:${color};`,\n      'background:transparent',\n    )\n  }\n\n  if (args.level !== 'info') {\n    params[0] = ` ${params[0]}`\n  }\n\n  window.console[args.level](...params, args.message)\n}\n\nconst createLogger: typeof cl = (moduleDefined) => ({\n  info(message, type) {\n    logger({\n      ...moduleDefined, level: 'info', type, message,\n    })\n  },\n  warn(message, type) {\n    logger({\n      ...moduleDefined, level: 'warn', type, message,\n    })\n  },\n  error(message, type) {\n    const middlewares = connector.getMiddlewares()\n    const error = message instanceof VariousError\n      ? message\n      : new VariousError({\n        ...moduleDefined,\n        type: type || 'unknow',\n        originalError: message instanceof Error ? message : new Error(message),\n      })\n\n    middlewares?.onError?.(error)\n\n    logger({\n      ...moduleDefined, level: 'error', type, message,\n    })\n  },\n})\n\nexport default createLogger\n","export const MOUNTED_COMPONENTS_KEY = Symbol('MOUNTED_COMPONENTS')\n\nexport const MESSAGE_KEY = Symbol('MESSAGE')\n\nexport const CONFIG_KEY = Symbol('CONFIG')\n\nexport const DEPENDENCIES_KEY = Symbol('DEPENDENCIES')\n\nexport const VUE_FUNCTION_OPTIONS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeUnmount',\n  'unmounted',\n  'errorCaptured',\n  'renderTracked',\n  'renderTriggered',\n  'activated',\n  'deactivated',\n  'setup',\n  'data',\n  'render',\n]\n\nexport const VUE_VERSION = 3\n\nexport const BASE_DEPENDENCIES = [\n  'react',\n  'react-dom',\n  '@variousjs/various',\n  'app',\n]\n","import { ModuleDefined, OnMessage, createPostMessage as cpm } from '@variousjs/various'\nimport connector from './connector'\nimport createLogger from './logger'\nimport { emit, subscribe } from './store'\nimport { MESSAGE_KEY } from './config'\n\nexport const createPostMessage: typeof cpm = (moduleDefined) => async (event, value) => {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let next = { trigger: moduleDefined, event, value }\n\n  if (middlewares?.onMessage) {\n    const check = await middlewares.onMessage(next)\n\n    if (check === false) {\n      logger.warn('blocked by middleware', 'POST_MESSAGE')\n      return\n    }\n\n    if (check !== true) {\n      next = { ...next, ...check }\n    }\n  }\n\n  emit({\n    [MESSAGE_KEY]: {\n      timestamp: +new Date(),\n      event: next.event,\n      trigger: moduleDefined,\n      value: next.value,\n    },\n  })\n}\n\nexport const createOnMessage = (moduleDefined: ModuleDefined, onMessage: OnMessage) => subscribe({\n  [MESSAGE_KEY](v) {\n    const { trigger, value, event } = v as Parameters<OnMessage>[0]\n    if (moduleDefined.name !== trigger.name || moduleDefined.module !== trigger.module) {\n      onMessage({ event, value, trigger })\n    }\n  },\n})\n","import {\n  Intl,\n  ModuleDefined,\n  I18n,\n  I18nConfig,\n} from '@variousjs/various'\nimport connector from './connector'\nimport { VariousError, onError, isPromiseLike } from './helper'\nimport { getStore, emit } from './store'\n\nexport function createI18nConfig(\n  method?: I18n,\n  moduleDefined?: ModuleDefined,\n  callback?: () => void,\n) {\n  if (!method) {\n    return\n  }\n\n  const i18nConfig = method()\n\n  if (!isPromiseLike(i18nConfig)) {\n    if (moduleDefined) {\n      connector.setI18nConfig(moduleDefined, i18nConfig)\n    } else {\n      connector.setGlobalI18nConfig(i18nConfig)\n    }\n    return\n  }\n\n  if (moduleDefined) {\n    connector.setI18nConfig(moduleDefined, {\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  } else {\n    connector.setGlobalI18nConfig({\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  }\n\n  i18nConfig\n    .then((res) => {\n      if (moduleDefined) {\n        connector.setI18nConfig(moduleDefined, { ...res, loading: false })\n        callback?.()\n        return\n      }\n\n      const locale = getStore(res.lngStoreKey)\n\n      emit({ [res.lngStoreKey]: undefined }, true)\n      emit({ [res.lngStoreKey]: locale }, true)\n      connector.setGlobalI18nConfig({ ...res, loading: false })\n    })\n    .catch((e: Error) => {\n      onError(new VariousError({\n        name: moduleDefined?.name || 'app',\n        module: moduleDefined?.module,\n        type: 'I18N',\n        originalError: e,\n      }))\n    })\n}\n\nexport function createI18n(\n  moduleDefined: ModuleDefined,\n  updater: () => void,\n) {\n  const ctx: Intl = (key, params, defaultString) => {\n    const i18nConfig = connector.getI18nConfig(moduleDefined) || connector.getGlobalI18nConfig()\n\n    let defaultText = defaultString\n    if (defaultText === undefined) {\n      defaultText = typeof params === 'string' ? params : key\n    }\n\n    if (!i18nConfig) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('config not exist'),\n      }))\n      return defaultText\n    }\n\n    if (i18nConfig.loading) {\n      return defaultText\n    }\n\n    const { lngStoreKey, resources } = i18nConfig\n    const locale: string | undefined = getStore(lngStoreKey)\n\n    if (lngStoreKey === undefined || locale === undefined) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('locale key not defined'),\n      }))\n      return defaultText\n    }\n\n    const resource = resources?.[locale]\n\n    if (!resource) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale resource \\`${locale}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    if (!resource[key]) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale key \\`${key}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    const text = resource[key]\n\n    if (!params || typeof params === 'string' || Object.prototype.toString.call(params) !== '[object Object]') {\n      return text\n    }\n\n    const args = Object.keys(params)\n\n    if (!args.length) {\n      return text\n    }\n\n    return args.reduce((next, arg) => {\n      const regex = new RegExp(`{\\\\s*${arg}\\\\s*}`, 'g')\n      return next.replace(regex, params[arg].toString())\n    }, text)\n  }\n\n  ctx.update = (config, type) => {\n    const i18nConfig = type === 'app'\n      ? connector.getGlobalI18nConfig()\n      : connector.getI18nConfig(moduleDefined)\n    const next = { ...i18nConfig, ...config } as I18nConfig\n\n    if (type === 'app') {\n      connector.setGlobalI18nConfig(next)\n    } else {\n      connector.setI18nConfig(moduleDefined, next)\n    }\n\n    updater()\n  }\n\n  return ctx\n}\n","import {\n  onComponentMounted as ocm,\n  isModuleLoaded as im,\n  preloadModules as pp,\n  removeLoadedModules as rm,\n  defineDependencies as dd,\n  VariousError as ve,\n  ErrorType as et,\n  ModuleDefined,\n  OnMessage,\n  I18n,\n  VariousComponentType,\n} from '@variousjs/various'\nimport { getStore, subscribe, emit } from './store'\nimport createLogger from './logger'\nimport {\n  CONFIG_KEY,\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  VUE_VERSION,\n  VUE_FUNCTION_OPTIONS,\n  BASE_DEPENDENCIES,\n} from './config'\nimport { PublicActions, RequiredComponent } from '../types'\nimport connector from './connector'\nimport { createOnMessage } from './message'\nimport { createI18nConfig } from './i18n'\n\nconst getUrlHash = (url: string) => `${url}?${+new Date()}`\n\nconst hasModule = (modules: ModuleDefined[], module: ModuleDefined) => modules\n  .some((c) => c.name === module.name && c.module === module.module)\n\nexport const preloadModules: typeof pp = (names) => new Promise<void>((resolve, reject) => {\n  window.requirejs(names, resolve, reject)\n})\n\nexport const removeLoadedModules: typeof rm = (names) => {\n  names.forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      window.requirejs.undef(name)\n    }\n  })\n}\n\nexport const defineDependencies: typeof dd = (deps) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const next = {} as Record<string, string>\n\n  Object.keys(deps).forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      next[name] = `${deps[name]}#${name}`\n      window.requirejs.undef(name)\n    }\n  })\n\n  window.requirejs.config({ paths: next })\n  emit({ [DEPENDENCIES_KEY]: { ...dependencies, ...next } }, true)\n}\n\nexport const isModuleLoaded: typeof im = (name) => window.requirejs.defined(name)\n\nexport const isModuleSpecified = (name: string) => window.requirejs.specified(name)\n\nexport const getMountedComponents = () => getStore(MOUNTED_COMPONENTS_KEY)\n\nexport const onComponentMounted: typeof ocm = (module, callback) => {\n  const modules = Array.isArray(module) ? module : [module]\n\n  if (modules.every((m) => hasModule(getMountedComponents(), m))) {\n    callback()\n  }\n\n  const unSubscribe = subscribe({\n    [MOUNTED_COMPONENTS_KEY](value) {\n      const mountedModules = value as ModuleDefined[]\n      if (modules.every((n) => hasModule(mountedModules, n))) {\n        unSubscribe()\n        callback()\n      }\n    },\n  })\n\n  return unSubscribe\n}\n\nexport const resetDependencyConfig = (name: string, url?: string) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  // ignore multiple custom module url\n  if (url && window.requirejs.defined(name)) {\n    return\n  }\n\n  let path = getUrlHash(dependencies[name])\n\n  // custom module url, but module loaded error\n  if (url) {\n    path = `${url}#${name}`\n\n    try {\n      const { registry } = window.requirejs.s.contexts._\n      if (registry?.[name].error) {\n        path = getUrlHash(url)\n      }\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  window.requirejs.undef(name)\n  window.requirejs.config({\n    paths: { [name]: path },\n  })\n}\nexport const getNameWithModule = (moduleDefined: ModuleDefined) => {\n  const { name, module } = moduleDefined\n  return module ? `${name}.${module}` : name\n}\n\nexport function getConfig<C extends object = {}>() {\n  return getStore(CONFIG_KEY) as C\n}\n\nexport const onError = (e: VariousError) => {\n  const { name, module, type } = e\n  const logger = createLogger({ name, module })\n  logger.error(e, type)\n}\n\nexport class VariousError extends Error implements ve {\n  type: et\n\n  originalError: Error\n\n  module?: string\n\n  name: string\n\n  constructor(data: {\n    name: string,\n    module?: string,\n    type: et,\n    originalError: Error,\n  }) {\n    super(data.originalError.message)\n    this.type = data.type\n    this.originalError = data.originalError\n    this.module = data.module\n    this.name = data.name\n  }\n}\n\nexport function checkReactComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  return new Promise<void>((reslove, reject) => {\n    if (component.$$typeof || component.prototype?.isReactComponent || typeof component === 'function') {\n      reslove()\n      return\n    }\n\n    reject(new VariousError({\n      ...moduleDefined,\n      originalError: new Error('not a valid React component'),\n      type: 'INVALID_COMPONENT',\n    }))\n  })\n}\n\nexport function isPromiseLike<T>(value: T | PromiseLike<T>): value is PromiseLike<T> {\n  return value != null && typeof (value as any).then === 'function'\n}\n\nexport function checkVueComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  const versionRegex = new RegExp(`^${VUE_VERSION}\\\\.`)\n\n  return new Promise<void>((resolve, reject) => {\n    window.requirejs(['vue'], (Vue: { version: string }) => {\n      if (!versionRegex.test(Vue.version)) {\n        reject(new Error(`Vue ${VUE_VERSION}+ required, detected an incompatible version`))\n      }\n\n      if (typeof component?.render === 'function' || typeof component?.setup === 'function') {\n        resolve()\n        return\n      }\n\n      reject(new VariousError({\n        ...moduleDefined,\n        originalError: new Error('not a valid Vue component'),\n        type: 'INVALID_COMPONENT',\n      }))\n    })\n  })\n}\n\nexport function parseComponentActions(params: ModuleDefined & {\n  componentNode: RequiredComponent,\n  type?: VariousComponentType,\n  i18nUpdate: () => void,\n}) {\n  const {\n    componentNode,\n    name,\n    module,\n    type,\n    i18nUpdate,\n  } = params\n\n  const actions: PublicActions = {}\n  let onMessageAction: OnMessage | undefined\n  let i18nAction: I18n | undefined\n\n  Object\n    .getOwnPropertyNames(componentNode)\n    .forEach((method) => {\n      if (typeof componentNode[method] !== 'function') {\n        return\n      }\n      if (method === '$onMessage') {\n        onMessageAction = componentNode[method]\n        return\n      }\n      if (method === '$i18n') {\n        i18nAction = componentNode[method]\n        return\n      }\n      if (type === 'vue3' && VUE_FUNCTION_OPTIONS.includes(method)) {\n        return\n      }\n\n      actions[method] = componentNode[method]\n    })\n\n  if (i18nAction) {\n    createI18nConfig(i18nAction, { name, module }, i18nUpdate)\n  }\n\n  connector.setComponentActions({ name, module }, actions)\n\n  if (onMessageAction) {\n    return createOnMessage({ name, module }, onMessageAction)\n  }\n\n  return () => null\n}\n\nexport function updateMountedComponent(moduleDefined: ModuleDefined) {\n  const mountedComponents = getMountedComponents()\n\n  if (!hasModule(mountedComponents, moduleDefined)) {\n    mountedComponents.push(moduleDefined)\n  }\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n}\n\nexport function updateUnMountComponent(moduleDefined: ModuleDefined) {\n  const { name, module } = moduleDefined\n  let mountedComponents = getMountedComponents()\n\n  mountedComponents = mountedComponents\n    .filter((item) => item.name !== name || item.module !== module)\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n  connector.deleteComponentActions({ name, module })\n}\n\nexport function getSelfInfo(params: ModuleDefined & { url?: string }) {\n  const { name, module, url } = params\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  return {\n    name,\n    module,\n    url: url || dependencies[name],\n  }\n}\n\nexport function getClassNameWithModule(self: ModuleDefined, prefix: string) {\n  const { name, module } = self\n  return `${prefix} ${[name, module].filter(Boolean).join('-')}`\n}\n","import { createDispatch as cd } from '@variousjs/various'\nimport connector from './connector'\nimport { dispatch } from './store'\nimport { onError, VariousError } from './helper'\nimport createLogger from './logger'\n\nconst createDispatch: typeof cd = (moduleDefined) => async function (params) {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let {\n    name,\n    module,\n    action,\n    value,\n  } = params\n\n  if (middlewares?.onDispatch) {\n    const check = await middlewares.onDispatch({\n      target: { name, module },\n      action,\n      value,\n      trigger: moduleDefined,\n    })\n    if (check === false) {\n      logger.warn('blocked by middleware', 'DISPATCH')\n      return Promise.resolve()\n    }\n    if (check !== true) {\n      name = check.target.name\n      module = check.target.module\n      action = check.action\n      value = check.value\n    }\n  }\n\n  if (name === 'app') {\n    const storeActions = connector.getStoreActions()\n    const storeAction = storeActions[action]\n    if (!storeAction) {\n      const errorMessage = `action \"${action}\" is not present`\n      const error = new VariousError({\n        ...moduleDefined,\n        type: 'DISPATCH',\n        originalError: new Error(errorMessage),\n      })\n      onError(error)\n      throw error\n    }\n    return dispatch(storeAction, value, moduleDefined)\n  }\n\n  const componentActions = connector.getComponentActions({ name, module })\n\n  if (!componentActions) {\n    const errorMessage = 'component is not ready'\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  const componentAction = componentActions[action]\n\n  if (!componentAction) {\n    const errorMessage = `action \"${action}\" is not present`\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  return Promise.resolve(componentAction(value, moduleDefined))\n}\n\nexport default createDispatch\n","import { createModule as cm, ObjectRecord } from '@variousjs/various'\nimport { RequireError } from '../types'\nimport { DEPENDENCIES_KEY } from './config'\nimport { getStore } from './store'\nimport connector from './connector'\nimport {\n  isModuleLoaded,\n  resetDependencyConfig,\n  VariousError,\n  onError,\n  isModuleSpecified,\n} from './helper'\n\nconst createModule: typeof cm = (config, logError = true) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const middlewares = connector.getMiddlewares()\n  const { name, module, url } = config\n  const loadStart = +new Date()\n\n  const logOnError = (e: VariousError) => {\n    if (logError) {\n      onError(e)\n    }\n  }\n\n  if (url) {\n    resetDependencyConfig(name, url)\n  }\n\n  return new Promise<any>((resolve, reject) => {\n    if (!url && !dependencies[name] && !isModuleSpecified(name)) {\n      const error = new VariousError({\n        name,\n        module,\n        type: 'NOT_DEFINED',\n        originalError: new Error(`module \"${name}\" not defined`),\n      })\n\n      logOnError(error)\n      reject(error)\n      return\n    }\n\n    window.requirejs([name], (C?: ObjectRecord) => {\n      const loadEnd = +new Date()\n\n      middlewares?.onLoad?.({\n        name,\n        module,\n        loadStart,\n        loadEnd,\n        beenLoaded: isModuleLoaded(name),\n      })\n\n      if (!C) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'INVALID_MODULE',\n          originalError: new Error(`module \"${name}\" invalid`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      const defaultModule = 'default' in C ? C.default : C\n      const actualModule = !module ? defaultModule : C[module]\n\n      if (actualModule === undefined && module) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'SUBMODULE_NOT_DEFINED',\n          originalError: new Error(`submodule \"${module}\" not defined`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      resolve(actualModule)\n    }, (e: RequireError) => {\n      const [requireModule] = e.requireModules\n\n      resetDependencyConfig(name, url)\n      resetDependencyConfig(requireModule)\n\n      let errorType: VariousError['type'] = 'LOADING_ERROR'\n\n      if (requireModule !== name) {\n        errorType = 'SUBMODULE_LOADING_ERROR'\n      }\n\n      if (!e.message.includes('https://requirejs.org/docs/errors.html')) {\n        errorType = requireModule === name ? 'SCRIPT_ERROR' : 'SUBMODULE_SCRIPT_ERROR'\n      }\n\n      const error = new VariousError({\n        name,\n        module: requireModule === name ? undefined : requireModule,\n        type: errorType,\n        originalError: e,\n      })\n\n      logOnError(error)\n      reject(error)\n    })\n  })\n}\n\nexport default createModule\n","import React, { Component } from 'react'\nimport {\n  ComponentDefaultProps,\n  VariousError as ve,\n  ModuleDefined,\n} from '@variousjs/various'\nimport {\n  checkReactComponent,\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  getSelfInfo,\n} from './helper'\nimport { connect, getStore, getUserStore } from './store'\nimport connector from './connector'\nimport { createPostMessage } from './message'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createI18n } from './i18n'\nimport createModule from './create-module'\nimport {\n  CreateComponentState,\n  CreateComponentProps,\n  RequiredComponent,\n  Store,\n} from '../types'\n\nfunction reactComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  class R extends Component<\n    CreateComponentProps<P> & ComponentDefaultProps,\n    CreateComponentState\n  > {\n    static displayName = 'various-react-component'\n\n    state = {\n      componentReady: false,\n      isError: false,\n    }\n\n    private error?: ve | Error\n\n    private ComponentNode: RequiredComponent | null\n\n    private isUnMounted?: boolean\n\n    private unSubscribeMessage = () => null as unknown\n\n    componentDidMount() {\n      this.mountComponent()\n    }\n\n    componentWillUnmount() {\n      this.error = undefined\n      this.ComponentNode = null\n      this.isUnMounted = true\n      this.unSubscribeMessage()\n      updateUnMountComponent({ name, module })\n    }\n\n    mountComponent = async () => {\n      try {\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (this.isUnMounted) {\n          return\n        }\n\n        await checkReactComponent(componentNode, { name, module })\n\n        componentNode.displayName = getNameWithModule({ name, module })\n\n        updateMountedComponent({ name, module })\n\n        this.unSubscribeMessage = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          i18nUpdate: () => this.forceUpdate(),\n        })\n\n        this.ComponentNode = componentNode\n        this.setState({ componentReady: true })\n\n        onMounted?.()\n      } catch (e) {\n        if (this.isUnMounted) {\n          return\n        }\n\n        this.error = e as Error\n        this.setState({ componentReady: true, isError: true })\n      }\n    }\n\n    $postMessage = createPostMessage({ name, module })\n\n    $dispatch = createDispatch({ name, module })\n\n    $t = createI18n({ name, module }, () => this.forceUpdate())\n\n    $logger = createLogger({ name, module })\n\n    $self = getSelfInfo({ name, module, url })\n\n    render() {\n      const Fallback = connector.getFallbackComponent()\n      const { $silent, $componentProps, $ref } = this.props\n      const { componentReady, isError } = this.state\n      const store = getUserStore()\n      const ComponentNode = this.ComponentNode as RequiredComponent\n\n      if (isError) {\n        throw this.error\n      }\n\n      if (!componentReady) {\n        if ($silent || isModuleLoaded(name)) {\n          return null\n        }\n\n        return (\n          <Fallback\n            $self={this.$self}\n            $store={store as Store}\n          />\n        )\n      }\n\n      return (\n        <ComponentNode\n          {...$componentProps}\n          $self={this.$self}\n          $dispatch={this.$dispatch}\n          $store={store}\n          $postMessage={this.$postMessage}\n          $t={this.$t}\n          $logger={this.$logger}\n          ref={$ref}\n        />\n      )\n    }\n  }\n\n  const Connected = connect(...storeKeys)(R)\n  Connected.displayName = 'various-connector'\n\n  return Connected\n}\n\nexport default reactComponent\n","import React, {\n  FC,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport type Vue from 'vue'\nimport {\n  ComponentDefaultProps,\n  ModuleDefined,\n  VariousError as ve,\n  ObjectRecord,\n} from '@variousjs/various'\nimport connector from './connector'\nimport createModule from './create-module'\nimport { getStore, useStore } from './store'\nimport {\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  checkVueComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  VariousError,\n  getSelfInfo,\n  getClassNameWithModule,\n} from './helper'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createPostMessage } from './message'\nimport { CreateComponentProps, RequiredComponent } from '../types'\nimport { createI18n } from './i18n'\n\nfunction vueComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  const V: FC<CreateComponentProps<P> & ComponentDefaultProps> = (props) => {\n    const store = useStore(...storeKeys)\n\n    const vueRef = useRef<typeof Vue>()\n    const isVueMounted = useRef(false)\n    const errorRef = useRef<Error | ve>()\n    const isUnMountedRef = useRef(false)\n    const ComponentNodeRef = useRef<RequiredComponent>()\n    const selfRef = useRef(getSelfInfo({ name, module, url }))\n\n    const containerDivRef = useRef<HTMLDivElement | null>(null)\n    const propsReactiveRef = useRef<{ value: ObjectRecord }>()\n    const storeReactiveRef = useRef<{ value: ObjectRecord }>()\n    const unMountVue = useRef<() => void>()\n    const unSubscribeMessageRef = useRef<() => void>()\n    const updateVueComponentRef = useRef<() => void>()\n\n    const [componentReady, setComponentReady] = useState(false)\n    const [isError, setIsError] = useState(false)\n\n    const Fallback = connector.getFallbackComponent()\n    const { $silent, $componentProps } = props\n\n    const mountVue = useCallback(() => {\n      const $logger = createLogger({ name, module })\n      const $dispatch = createDispatch({ name, module })\n      const $postMessage = createPostMessage({ name, module })\n      const $t = createI18n({ name, module }, () => {\n        updateVueComponentRef.current?.()\n      })\n\n      propsReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...$componentProps })\n      storeReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...store })\n\n      const vueApp = vueRef.current!.createApp({\n        setup() {\n          const renderKey = vueRef.current!.ref(0)\n          updateVueComponentRef.current = () => {\n            renderKey.value += 1\n          }\n          return {\n            key: renderKey,\n          }\n        },\n\n        errorCaptured(e) {\n          const error = e as Error\n          errorRef.current = error.message?.includes('https://react')\n            ? new VariousError({\n              originalError: new Error('not a valid Vue component'),\n              name,\n              module,\n              type: 'INVALID_COMPONENT',\n            })\n            : error\n          setIsError(true)\n        },\n\n        render() {\n          return vueRef.current!.h(ComponentNodeRef.current as any, {\n            ...propsReactiveRef.current!.value,\n            various: {\n              $dispatch,\n              $logger,\n              $postMessage,\n              $t,\n              $store: storeReactiveRef.current!.value,\n              $self: selfRef.current,\n            },\n            // eslint-disable-next-line react/no-this-in-sfc\n            key: this.key,\n          })\n        },\n      })\n\n      vueApp.mount(containerDivRef.current!)\n      isVueMounted.current = true\n      unMountVue.current = () => vueApp.unmount()\n    }, [$componentProps, store])\n\n    const mountComponent = useCallback(async () => {\n      try {\n        const vue = await createModule<typeof Vue>({ name: 'vue' })\n        vueRef.current = vue\n\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        await checkVueComponent(componentNode, { name, module })\n\n        updateMountedComponent({ name, module })\n\n        unSubscribeMessageRef.current = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          type: 'vue3',\n          i18nUpdate() {\n            updateVueComponentRef.current?.()\n          },\n        })\n\n        ComponentNodeRef.current = componentNode\n\n        setTimeout(mountVue)\n        setComponentReady(true)\n\n        onMounted?.()\n      } catch (e) {\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        errorRef.current = e as Error\n        setComponentReady(true)\n        setIsError(true)\n      }\n    }, [mountVue])\n\n    useEffect(() => () => {\n      errorRef.current = undefined\n      ComponentNodeRef.current = undefined\n      isUnMountedRef.current = true\n      updateUnMountComponent({ name, module })\n      unMountVue.current?.()\n      unSubscribeMessageRef.current?.()\n      isVueMounted.current = false\n    }, [])\n\n    useEffect(() => {\n      if (isVueMounted.current) {\n        return\n      }\n      mountComponent()\n    }, [mountComponent])\n\n    useEffect(() => {\n      if (propsReactiveRef.current) {\n        propsReactiveRef.current.value = { ...$componentProps }\n      }\n    }, [$componentProps])\n\n    useEffect(() => {\n      if (storeReactiveRef.current) {\n        storeReactiveRef.current.value = { ...store }\n      }\n    }, [store])\n\n    if (isError) {\n      throw errorRef.current\n    }\n\n    return (\n      <>\n        {\n          !componentReady && !$silent && !isModuleLoaded(name)\n            ? (\n              <Fallback\n                $self={selfRef.current}\n                $store={store}\n              />\n            )\n            : null\n        }\n        <div\n          className={getClassNameWithModule({ name, module }, 'various-vue-component')}\n          ref={containerDivRef}\n        />\n      </>\n    )\n  }\n\n  V.displayName = getNameWithModule({ name, module })\n\n  const VueComponent: FC<\n    CreateComponentProps<P> & ComponentDefaultProps\n  > = (props) => (<V {...props} />)\n\n  VueComponent.displayName = 'various-vue-component'\n\n  return VueComponent\n}\n\nexport default vueComponent\n","import React, { Component } from 'react'\nimport { VariousError as ve } from '@variousjs/various'\nimport {\n  onError,\n  VariousError,\n  resetDependencyConfig,\n  updateUnMountComponent,\n  getSelfInfo,\n} from './helper'\nimport connector from './connector'\nimport { ErrorBoundaryProps, Store } from '../types'\nimport { getUserStore } from './store'\n\nclass ErrorBoundary extends Component<ErrorBoundaryProps> {\n  static displayName = 'various-error-boundary'\n\n  state = {\n    hasError: false,\n  }\n\n  private error?: ve\n\n  componentDidCatch(e: Error | VariousError) {\n    const { name, module } = this.props\n    const error = e instanceof VariousError\n      ? e\n      : new VariousError({\n        name,\n        module,\n        type: name === 'app' ? 'APP_ERROR' : 'SCRIPT_ERROR',\n        originalError: e,\n      })\n\n    this.setState({ hasError: true })\n    this.error = error\n    onError(error)\n    resetDependencyConfig(this.props.name)\n    updateUnMountComponent({ name, module })\n  }\n\n  $self = getSelfInfo(this.props)\n\n  reload = () => {\n    this.error = undefined\n    this.setState({ hasError: false })\n  }\n\n  render() {\n    const ErrorFallbackNode = connector.getErrorFallbackComponent()\n    const store = getUserStore()\n\n    if (this.state.hasError) {\n      return (\n        <ErrorFallbackNode\n          $self={this.$self}\n          $reload={this.reload}\n          $store={store as Store}\n          $error={this.error!}\n        />\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","import React from 'react'\nimport { createComponent as cc, ComponentDefaultProps } from '@variousjs/various'\nimport createReactComponent from './react-component'\nimport createVueComponent from './vue-component'\nimport ErrorBoundary from './error-boundary'\nimport { CreateComponentProps } from '../types'\n\nconst createComponent: typeof cc<any, any> = (config, storeKeys) => {\n  const {\n    name,\n    module,\n    url,\n    type = 'react',\n  } = config\n\n  const C = (type === 'vue3' ? createVueComponent : createReactComponent)({\n    name,\n    module,\n    url,\n    watchKeys: storeKeys as string[],\n  })\n\n  const component = (props: ComponentDefaultProps) => {\n    const { $silent, $ref, ...rest } = props || {}\n    const nextProps = {\n      $componentProps: rest, $silent, $ref,\n    } as ComponentDefaultProps & CreateComponentProps<any>\n    return (\n      <ErrorBoundary name={name} module={module} url={url}>\n        <C {...nextProps} />\n      </ErrorBoundary>\n    )\n  }\n\n  component.displayName = 'various-creator'\n  return component\n}\n\nexport default createComponent\n","import { DependencyType, createComponent } from '@variousjs/various/standalone'\nimport { isModuleSpecified, VariousError } from '../core/helper'\n\nlet requirejsPromise: Promise<Event> | undefined\n\nexport function loadRequireJS(dep?: DependencyType) {\n  if (requirejsPromise) {\n    return requirejsPromise\n  }\n\n  const promise = new Promise<Event>((resolve, reject) => {\n    if (!dep) {\n      reject(new VariousError({\n        name: 'standalone',\n        type: 'NOT_DEFINED',\n        originalError: new Error('requirejs not defined'),\n      }))\n      return\n    }\n\n    if (typeof dep === 'string') {\n      const script = document.createElement('script')\n      script.src = dep\n      script.onload = (e) => resolve(e)\n      script.onerror = (e) => reject(e)\n      document.head.appendChild(script)\n      return\n    }\n\n    // @ts-ignore\n    window.requirejs = dep\n    resolve(new Event('requirejs defined'))\n  })\n\n  requirejsPromise = promise\n\n  return requirejsPromise\n}\n\nexport function defineModules(\n  deps: NonNullable<Parameters<typeof createComponent>['0']['dependencies']>,\n) {\n  Object.entries(deps).forEach(([key, value]) => {\n    if (isModuleSpecified(key)) {\n      return\n    }\n\n    if (typeof value === 'string') {\n      window.requirejs.config({ paths: { [key]: `${value}#${key}` } })\n      return\n    }\n\n    window.define(key, [], () => value)\n  })\n}\n","import React, {\n  ComponentType,\n  FC,\n  RefObject,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport { createComponent as cc, createConfig as con } from '@variousjs/various/standalone'\nimport { ObjectRecord } from '@variousjs/various'\nimport createComponentCore from '../core/create-component'\nimport ErrorBoundary from '../core/error-boundary'\nimport connector from '../core/connector'\nimport { onError, VariousError } from '../core/helper'\nimport { defineModules, loadRequireJS } from './helper'\nimport { createStore, emit, getUserStore } from '../core/store'\nimport {\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  CONFIG_KEY,\n  MESSAGE_KEY,\n} from '../core/config'\n\ncreateStore({\n  [MOUNTED_COMPONENTS_KEY]: [],\n  [MESSAGE_KEY]: null,\n  [CONFIG_KEY]: {},\n  [DEPENDENCIES_KEY]: {},\n})\n\nconst Standalone: FC<\n  Parameters<typeof cc>['0'] & { $componentProps: ObjectRecord, $ref?: RefObject<unknown> }\n> = (props) => {\n  const {\n    dependencies,\n    url,\n    name,\n    module,\n    type,\n    $componentProps,\n    $ref,\n    storeKeys,\n  } = props\n  const [componentReady, setComponentReady] = useState(false)\n  const componentNode = useRef<ComponentType<any>>()\n  const errorRef = useRef<Error>()\n  const [isError, setIsError] = useState(false)\n\n  useEffect(() => {\n    loadRequireJS(dependencies?.requirejs)\n      .then(() => {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { requirejs, ...rest } = dependencies || {}\n        defineModules(rest)\n\n        componentNode.current = createComponentCore({\n          name,\n          module,\n          url,\n          type,\n        }, storeKeys)\n        setComponentReady(true)\n      })\n      .catch((e) => {\n        errorRef.current = e\n        setIsError(true)\n      })\n  }, [name, url, module, dependencies, type, storeKeys])\n\n  if (isError) {\n    throw errorRef.current\n  }\n\n  if (!componentReady) {\n    const FallBack = connector.getFallbackComponent()\n    return <FallBack $self={{ name, module, url }} $store={getUserStore()} />\n  }\n\n  const C = componentNode.current!\n\n  return (\n    <C {...$componentProps} ref={$ref} />\n  )\n}\n\nStandalone.displayName = 'various-standalone'\n\nexport const createComponent: typeof cc = (args) => {\n  const component: FC = (props: ObjectRecord) => (\n    <ErrorBoundary name=\"standalone\" url={args.url} module={args.module}>\n      <Standalone $componentProps={props} {...args} />\n    </ErrorBoundary>\n  )\n  const dispatch: ReturnType<typeof cc>['dispatch'] = (next) => {\n    emit(next, true)\n  }\n\n  component.displayName = 'various-standalone-creator'\n  return Object.assign(component, { dispatch })\n}\n\nexport const createConfig: typeof con = (config) => {\n  const {\n    baseDependencies,\n    errorFallback,\n    fallback,\n    store,\n  } = config\n  const { requirejs, ...rest } = baseDependencies\n\n  if (errorFallback) {\n    connector.setErrorFallbackComponent(errorFallback)\n  }\n\n  if (fallback) {\n    connector.setFallbackComponent(fallback)\n  }\n\n  if (store) {\n    emit(store)\n  }\n\n  loadRequireJS(requirejs)\n    .then(() => {\n      defineModules(rest)\n    })\n    .catch((e) => {\n      onError(new VariousError({\n        name: 'standalone',\n        type: 'CONFIG_ERROR',\n        originalError: e,\n      }))\n    })\n}\n","import React, { useRef } from 'react'\nimport * as Vue from 'vue'\nimport ReactDOM, { createRoot } from 'react-dom/client'\nimport '@variousjs/requirejs'\nimport { createComponent, createConfig } from '../../src/standalone'\n\nconst query = new URLSearchParams(window.location.search)\nconst testType = query.get('type') || 'default'\n\nconst baseConfig: Record<string, Parameters<typeof createConfig>['0']> = {\n  default: {\n    baseDependencies: {\n      requirejs: window.requirejs,\n      react: React,\n      vue: Vue,\n      'react-dom/client': ReactDOM,\n    },\n    store: { locale: 'zh', globalB: 'B' },\n  },\n  depsError: {\n    baseDependencies: {},\n    fallback: () => null,\n    errorFallback: ({ $self }) => <p>Error - {$self.url}</p>,\n  },\n  requirejsPath: {\n    baseDependencies: {\n      requirejs: './libs/require.min.js',\n    },\n  },\n  requirejsPathError: {\n    baseDependencies: {\n      requirejs: '.error/require.min.js',\n    },\n  },\n}\n\ncreateConfig(baseConfig[testType])\n\nconst RC = createComponent<{ propsA: string }>({\n  name: 'a',\n  module: 'A',\n  url: '/dist/standalone/a.js',\n  dependencies: {\n    '@variousjs/various': '/dist/index.js',\n    'react-dom/client': ReactDOM,\n  },\n})\nconst VC = createComponent<{ propsB: string }>({\n  name: 'b',\n  url: '/dist/standalone/b.js',\n  type: 'vue3',\n  storeKeys: ['globalB'],\n})\n\nfunction App() {\n  const ref = useRef<{ set:(t: string) => void }>(null)\n\n  return (\n    <div style={{ padding: 20 }}>\n      <RC $ref={ref} propsA=\"propsA\" />\n      <button\n        onClick={() => {\n          RC.dispatch({ locale: 'en' })\n        }}\n      >\n        change lng\n      </button>\n      <button\n        onClick={() => {\n          ref.current?.set('setText')\n        }}\n      >\n        set text\n      </button>\n      <VC propsB=\"propsB\" />\n    </div>\n  )\n}\n\nconst container = document.getElementById('root')\nconst root = createRoot(container!)\nroot.render(<App />)\n"],"names":["module","exports","react","e","self","t","r","d","default","c","s","o","n","i","WeakMap","has","get","Array","isArray","set","Reflect","ownKeys","constructor","Z","this","listeners","reduce","state","forEach","push","filter","emits","trigger","clearTimeout","timer","setTimeout","getStore","emit","length","u","key","newValue","oldValue","onStateChange","onChange","RegExp","source","flags","valueOf","Object","prototype","toString","keys","hasOwnProperty","call","defineProperty","value","enumerable","configurable","writable","__esModule","a","super","subscribe","Component","props","unsubscribe","setState","componentWillUnmount","render","createElement","getOwnPropertyNames","includes","useState","useLayoutEffect","requirejs","require","define","global","req","head","baseElement","dataMain","src","interactiveScript","currentlyAddingScript","mainScript","subPath","version","commentRegExp","cjsRequireRegExp","jsSuffixRegExp","currDirRegExp","op","ostring","hasOwn","isBrowser","window","navigator","document","isWebWorker","importScripts","readyRegExp","platform","defContextName","isOpera","opera","contexts","cfg","globalDefQueue","useInteractive","commentReplace","match","singlePrefix","isFunction","it","each","ary","func","eachReverse","hasProp","obj","prop","getOwn","eachProp","mixin","target","force","deepStringMixin","bind","fn","apply","arguments","scripts","getElementsByTagName","defaultOnError","err","getGlobal","g","split","part","makeError","id","msg","requireModules","Error","requireType","originalError","undefined","deps","callback","errback","optional","context","config","contextName","newContext","configure","nextTick","jsExtRegExp","ctx","parentNode","onError","createNode","moduleName","url","node","xhtml","createElementNS","type","scriptType","charset","async","load","setAttribute","attachEvent","indexOf","addEventListener","onScriptLoad","onScriptError","onNodeCreated","insertBefore","appendChild","completeLoad","skipDataMain","script","getAttribute","baseUrl","pop","join","replace","test","concat","name","dep","getInteractiveScript","defQueue","defQueueMap","amd","jQuery","exec","text","eval","inCheckLoaded","Module","handlers","checkLoadedTimeoutId","waitSeconds","paths","bundles","pkgs","shim","registry","enabledRegistry","undefEvents","defined","urlFetched","bundlesMap","requireCounter","unnormalizedCounter","normalize","baseName","applyMap","mapValue","nameParts","j","nameSegment","lastIndex","foundMap","foundI","foundStarMap","starI","baseParts","map","starMap","nodeIdCompat","charAt","slice","splice","trimDots","outerLoop","removeScript","scriptNode","removeChild","hasPathFallback","pathConfig","shift","undef","makeRequire","skipMap","splitPrefix","prefix","index","substring","makeModuleMap","parentModuleMap","isNormalized","pluginModule","suffix","parentName","originalName","isDefine","normalizedName","nameToUrl","parentMap","unnormalized","getModule","depMap","mod","on","defineEmitComplete","error","ids","notified","events","takeGlobalQueue","queueItem","cleanRegistry","breakCycle","traced","processed","depMaps","depId","depMatched","defineDep","check","checkLoaded","usingPathFallback","waitInterval","expired","startTime","Date","getTime","noLoads","reqCalls","stillLoading","needCycleCheck","modId","enabled","inited","fetched","callGetModule","args","init","removeListener","ieName","detachEvent","removeEventListener","getScriptData","evt","currentTarget","srcElement","intakeDefines","usingExports","uri","depExports","pluginMaps","depCount","factory","options","ignore","enable","fetch","callPlugin","enableBuildCallback","enabling","cjsModule","defining","execCb","requireMap","onResourceLoad","resLoadMaps","normalizedMap","defineEmitted","pluginMap","plugin","normalizedMod","bundleId","localRequire","fromText","textAlt","moduleMap","hasInteractive","handler","undefed","cb","cbs","urlArgs","objs","v","exportsFn","makeShimExports","packages","pkgObj","location","main","ret","relMap","requireMod","__requireJsBuild","toUrl","moduleNamePlusExt","ext","lastIndexOf","segment","specified","found","shExports","enforceDefine","skipExt","syms","parentPath","pkgMain","readyState","data","parents","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","vue","dom","client","_extends","assign","createStore","connect","dispatch","useStore","Nycticorax","getUserStore","globalStore","store","Fallback","className","getClassNameWithModule","$self","React","ErrorFallback","$error","$reload","message","onClick","fallbackComponent","errorFallbackComponent","storeActions","componentActions","i18nConfigs","middlewares","setMiddlewares","m","getMiddlewares","setI18nConfig","moduleDefined","getNameWithModule","getI18nConfig","setGlobalI18nConfig","globalI18nConfig","getGlobalI18nConfig","setComponentActions","actions","deleteComponentActions","getComponentActions","setStoreActions","getStoreActions","setFallbackComponent","getFallbackComponent","setErrorFallbackComponent","getErrorFallbackComponent","logger","connector","canLog","onLog","color","info","warn","level","params","console","VariousError","MOUNTED_COMPONENTS_KEY","Symbol","MESSAGE_KEY","CONFIG_KEY","DEPENDENCIES_KEY","VUE_FUNCTION_OPTIONS","createPostMessage","event","createLogger","next","onMessage","timestamp","createI18n","updater","defaultString","i18nConfig","defaultText","loading","lngStoreKey","resources","locale","resource","arg","regex","update","getUrlHash","isModuleLoaded","isModuleSpecified","getMountedComponents","resetDependencyConfig","dependencies","path","_","parseComponentActions","componentNode","i18nUpdate","onMessageAction","i18nAction","method","then","res","catch","createI18nConfig","createOnMessage","updateMountedComponent","mountedComponents","hasModule","some","updateUnMountComponent","item","getSelfInfo","Boolean","action","onDispatch","Promise","resolve","storeAction","errorMessage","componentAction","createModule","logError","loadStart","logOnError","reject","C","loadEnd","onLoad","beenLoaded","defaultModule","actualModule","requireModule","errorType","watchKeys","onMounted","storeKeys","R","static","componentReady","isError","unSubscribeMessage","componentDidMount","mountComponent","ComponentNode","isUnMounted","component","reslove","$$typeof","isReactComponent","displayName","forceUpdate","$postMessage","$dispatch","createDispatch","$t","$logger","$silent","$componentProps","$ref","$store","ref","Connected","V","vueRef","useRef","isVueMounted","errorRef","isUnMountedRef","ComponentNodeRef","selfRef","containerDivRef","propsReactiveRef","storeReactiveRef","unMountVue","unSubscribeMessageRef","updateVueComponentRef","setComponentReady","setIsError","mountVue","useCallback","current","vueApp","createApp","setup","renderKey","errorCaptured","h","various","mount","unmount","versionRegex","Vue","checkVueComponent","useEffect","VueComponent","ErrorBoundary","hasError","componentDidCatch","reload","ErrorFallbackNode","children","createComponent","createVueComponent","createReactComponent","rest","nextProps","requirejsPromise","loadRequireJS","promise","onload","onerror","Event","defineModules","entries","Standalone","createComponentCore","FallBack","testType","URLSearchParams","search","baseDependencies","errorFallback","fallback","createConfig","ReactDOM","globalB","depsError","requirejsPath","requirejsPathError","RC","VC","App","style","padding","propsA","propsB","container","getElementById","createRoot"],"sourceRoot":""}