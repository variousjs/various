{"version":3,"file":"standalone.js","mappings":"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","sources":["webpack://@variousjs/various/external var \"react\"","webpack://@variousjs/various/./node_modules/nycticorax/dist/index.js","webpack://@variousjs/various/webpack/bootstrap","webpack://@variousjs/various/webpack/runtime/compat get default export","webpack://@variousjs/various/webpack/runtime/define property getters","webpack://@variousjs/various/webpack/runtime/hasOwnProperty shorthand","webpack://@variousjs/various/external var \"vue\"","webpack://@variousjs/various/external var \"react-dom/client\"","webpack://@variousjs/various/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@variousjs/various/./src/core/store.ts","webpack://@variousjs/various/./src/core/default-component.tsx","webpack://@variousjs/various/./src/core/connector.ts","webpack://@variousjs/various/./src/core/logger.ts","webpack://@variousjs/various/./src/core/config.ts","webpack://@variousjs/various/./src/core/message.ts","webpack://@variousjs/various/./src/core/i18n.ts","webpack://@variousjs/various/./src/core/helper.ts","webpack://@variousjs/various/./src/core/dispatch.ts","webpack://@variousjs/various/./src/core/create-module.ts","webpack://@variousjs/various/./src/core/react-component.tsx","webpack://@variousjs/various/./src/core/vue-component.tsx","webpack://@variousjs/various/./src/core/error-boundary.tsx","webpack://@variousjs/various/./src/core/create-component.tsx","webpack://@variousjs/various/./src/standalone/helper.ts","webpack://@variousjs/various/./src/standalone/index.tsx","webpack://@variousjs/various/./test/standalone/index.tsx"],"sourcesContent":["module.exports = react;","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"react\")):\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Nycticorax=e(require(\"react\")):t.Nycticorax=e(t.React)}(self,(t=>(()=>{\"use strict\";var e={294:(t,e,r)=>{r.d(e,{default:()=>c});var s=r(942),o=r(63),n=r.n(o);function i(t,e=new WeakMap){if(\"object\"!=typeof t||null===t)return t;if(e.has(t))return e.get(t);const r=Array.isArray(t)?[]:{};e.set(t,r);const s=Reflect.ownKeys(t);for(const o of s)r[o]=i(t[o],e);return r}class c{constructor(){var t;(0,s.Z)(this,\"state\",void 0),(0,s.Z)(this,\"listeners\",void 0),(0,s.Z)(this,\"emits\",void 0),(0,s.Z)(this,\"timer\",void 0),(0,s.Z)(this,\"onStateChange\",void 0),(0,s.Z)(this,\"getStore\",void 0),(0,s.Z)(this,\"createStore\",(t=>{this.listeners=Reflect.ownKeys(t).reduce(((e,r)=>{const s=r;return this.state[s]=t[s],{...e,[r]:[]}}),{})})),(0,s.Z)(this,\"subscribe\",(t=>{const e={};return Reflect.ownKeys(t).forEach((r=>{const s=r;this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(t[s]),e[s]=t[s]})),()=>{Reflect.ownKeys(e).forEach((t=>{const r=t;this.listeners[r]=this.listeners[r].filter((t=>t!==e[r]))}))}})),(0,s.Z)(this,\"emit\",((t,e)=>{this.emits={...this.emits,...t},e?this.trigger():(clearTimeout(this.timer),this.timer=setTimeout(this.trigger))})),(0,s.Z)(this,\"dispatch\",((t,...e)=>t({getStore:this.getStore,emit:t=>this.emit(t,!0)},...e))),(0,s.Z)(this,\"trigger\",(()=>{const t=this.emits,e=[],r=Reflect.ownKeys(t);for(let s=0;s<r.length;s+=1){const o=r[s];if(n()(this.state[o],t[o]))continue;const c=t[o],u=this.state[o];this.state[o]=i(t[o]),e.push({key:o,newValue:c,oldValue:u})}const s={};e.forEach((t=>{s[t.key]=[t.newValue,t.oldValue],this.listeners[t.key]&&this.listeners[t.key].forEach((e=>e(t.newValue,t.oldValue)))})),e.length&&this.onStateChange(s),this.emits={},this.timer=void 0})),this.state={},this.listeners={},this.emits={},this.timer=void 0,this.onStateChange=()=>null,this.getStore=(t=this.state,function(e){return e?i(t[e]):t})}set onChange(t){this.onStateChange=t}}},63:t=>{t.exports=function t(e,r){if(e===r)return!0;if(e&&r&&\"object\"==typeof e&&\"object\"==typeof r){if(e.constructor!==r.constructor)return!1;var s,o,n;if(Array.isArray(e)){if((s=e.length)!=r.length)return!1;for(o=s;0!=o--;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((s=(n=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,n[o]))return!1;for(o=s;0!=o--;){var i=n[o];if(!t(e[i],r[i]))return!1}return!0}return e!=e&&r!=r}},250:e=>{e.exports=t},942:(t,e,r)=>{function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:()=>s})}},r={};function s(t){var o=r[t];if(void 0!==o)return o.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,s),n.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o={};return(()=>{s.d(o,{default:()=>u});var t=s(942),e=s(294),r=s(250),n=s.n(r);const i=[\"name\",\"prototype\",\"length\",\"propTypes\",\"defaultProps\",\"getDerivedStateFromProps\",\"contextTypes\",\"displayName\"];class c extends e.default{constructor(...e){super(...e),(0,t.Z)(this,\"connect\",function(e){const{getStore:s,subscribe:o}=e;return function(...e){return function(c){class u extends r.Component{constructor(r){super(r),(0,t.Z)(this,\"unsubscribe\",void 0),(0,t.Z)(this,\"state\",{props:s()}),this.unsubscribe=o(e.reduce(((t,e)=>({...t,[e]:()=>{this.setState({props:s()})}})),{}))}componentWillUnmount(){this.unsubscribe()}render(){const{props:t}=this.state,e={...t,...this.props};return n().createElement(c,e)}}return Object.getOwnPropertyNames(c).forEach((t=>{const e=t;i.includes(t)||(u[e]=c[e])})),u}}}(this)),(0,t.Z)(this,\"useStore\",function(t){const{getStore:e,subscribe:s}=t;return function(...t){const[o,n]=(0,r.useState)(e());return(0,r.useLayoutEffect)((()=>s(t.reduce(((t,r)=>({...t,[r]:()=>{n((t=>({...t,[r]:e()[r]})))}})),{})))),o}}(this))}}const u=c})(),o.default})()));\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = vue;","var __WEBPACK_NAMESPACE_OBJECT__ = react-dom/client;","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import Nycticorax from 'nycticorax'\nimport { Store } from '../types'\n\nexport const {\n  createStore,\n  getStore,\n  connect,\n  emit,\n  subscribe,\n  dispatch,\n  useStore,\n} = new Nycticorax<Store>()\n\nexport function getUserStore<S extends object = {}>() {\n  const globalStore = getStore()\n  const keys = Object.keys(globalStore)\n  const store: Record<string, any> = {}\n\n  keys.forEach((key) => {\n    store[key] = globalStore[key]\n  })\n\n  return store as S\n}\n","import React, { ComponentType } from 'react'\nimport { FallbackNode, ErrorFallbackNode } from '@variousjs/various'\nimport { getClassNameWithModule } from './helper'\nimport { Store } from '../types'\n\nexport const Fallback: FallbackNode<Store> = (props) => {\n  const className = getClassNameWithModule(props.$self, 'various-component-fallback')\n  return (\n    <div className={className}>Loading</div>\n  )\n}\n\nexport const ErrorFallback: ErrorFallbackNode<Store> = ({ $error, $reload, $self }) => {\n  const className = getClassNameWithModule($self, 'various-component-error_fallback')\n  return (\n    <div className={className}>\n      <h3>{$error.type}</h3>\n      <p>{$error.message}</p>\n      <button type=\"button\" onClick={$reload}>\n        Reload\n      </button>\n    </div>\n  )\n}\n\nexport const Root: ComponentType = () => (\n  <div>App Container is not defined</div>\n)\n","import {\n  FallbackNode,\n  ErrorFallbackNode,\n  App,\n  ModuleDefined,\n} from '@variousjs/various'\nimport { Fallback, ErrorFallback } from './default-component'\nimport {\n  PublicActions,\n  Store,\n  ConnectorI18nConfig,\n  Actions,\n} from '../types'\nimport { getNameWithModule } from './helper'\n\nclass Connector {\n  private fallbackComponent: FallbackNode<Store>\n\n  private errorFallbackComponent: ErrorFallbackNode<Store>\n\n  private storeActions: Actions<Store>\n\n  private componentActions: Record<string, PublicActions>\n\n  private i18nConfigs: Record<string, ConnectorI18nConfig | undefined>\n\n  private globalI18nConfig: ConnectorI18nConfig | undefined\n\n  private middlewares: App['middlewares']\n\n  constructor() {\n    this.fallbackComponent = Fallback\n    this.errorFallbackComponent = ErrorFallback\n    this.storeActions = {}\n    this.componentActions = {}\n    this.i18nConfigs = {}\n    this.middlewares = {}\n  }\n\n  setMiddlewares(m: App['middlewares']) {\n    this.middlewares = m\n  }\n\n  getMiddlewares() {\n    return this.middlewares\n  }\n\n  setI18nConfig(moduleDefined: ModuleDefined, config: ConnectorI18nConfig) {\n    const name = getNameWithModule(moduleDefined)\n    this.i18nConfigs[name] = { ...this.i18nConfigs[name], ...config }\n  }\n\n  getI18nConfig(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.i18nConfigs[name]\n  }\n\n  setGlobalI18nConfig(config: ConnectorI18nConfig) {\n    this.globalI18nConfig = { ...this.globalI18nConfig, ...config }\n  }\n\n  getGlobalI18nConfig() {\n    return this.globalI18nConfig\n  }\n\n  setComponentActions(moduleDefined: ModuleDefined, actions: PublicActions) {\n    const name = getNameWithModule(moduleDefined)\n    this.componentActions[name] = actions\n  }\n\n  deleteComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    delete this.componentActions[name]\n  }\n\n  getComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.componentActions[name]\n  }\n\n  setStoreActions(actions: Actions<Store>) {\n    this.storeActions = actions\n  }\n\n  getStoreActions() {\n    return this.storeActions\n  }\n\n  setFallbackComponent(fallbackComponent: FallbackNode<Store>) {\n    this.fallbackComponent = fallbackComponent\n  }\n\n  getFallbackComponent() {\n    return this.fallbackComponent\n  }\n\n  setErrorFallbackComponent(errorFallbackComponent: ErrorFallbackNode<Store>) {\n    this.errorFallbackComponent = errorFallbackComponent\n  }\n\n  getErrorFallbackComponent() {\n    return this.errorFallbackComponent\n  }\n}\n\nexport default new Connector()\n","import { createLogger as cl, LogEvent } from '@variousjs/various'\nimport connector from './connector'\nimport { getNameWithModule, VariousError } from './helper'\n\ntype LogArgs = Parameters<LogEvent>[0]\ntype LogLevel = LogArgs['level']\n\nconst logger = (args: LogArgs) => {\n  const middlewares = connector.getMiddlewares()\n  const canLog = middlewares?.onLog?.(args)\n\n  if (canLog === false) {\n    return\n  }\n\n  const colorMap: Record<LogLevel, string> = {\n    info: 'blue',\n    warn: 'orange',\n    error: 'red',\n  }\n  const color = colorMap[args.level]\n\n  const params = [\n    `%c ${getNameWithModule(args)} `,\n    `background:${color};border:1px solid ${color};padding:1px;border-radius:2px 0 0 2px;color: #fff;`,\n  ]\n\n  if (args.type) {\n    params[0] = `${params[0]}%c ${args.type} %c`\n    params.push(\n      `border:1px solid ${color};padding:1px;border-radius:0 2px 2px 0;color:${color};`,\n      'background:transparent',\n    )\n  }\n\n  if (args.level !== 'info') {\n    params[0] = ` ${params[0]}`\n  }\n\n  window.console[args.level](...params, args.message)\n}\n\nconst createLogger: typeof cl = (moduleDefined) => ({\n  info(message, type) {\n    logger({\n      ...moduleDefined, level: 'info', type, message,\n    })\n  },\n  warn(message, type) {\n    logger({\n      ...moduleDefined, level: 'warn', type, message,\n    })\n  },\n  error(message, type) {\n    const middlewares = connector.getMiddlewares()\n    const error = message instanceof VariousError\n      ? message\n      : new VariousError({\n        ...moduleDefined,\n        type: type || 'unknow',\n        originalError: message instanceof Error ? message : new Error(message),\n      })\n\n    middlewares?.onError?.(error)\n\n    logger({\n      ...moduleDefined, level: 'error', type, message,\n    })\n  },\n})\n\nexport default createLogger\n","export const MOUNTED_COMPONENTS_KEY = Symbol('MOUNTED_COMPONENTS')\n\nexport const MESSAGE_KEY = Symbol('MESSAGE')\n\nexport const CONFIG_KEY = Symbol('CONFIG')\n\nexport const DEPENDENCIES_KEY = Symbol('DEPENDENCIES')\n\nexport const ROOT = '#root'\n\nexport const VUE_FUNCTION_OPTIONS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeUnmount',\n  'unmounted',\n  'errorCaptured',\n  'renderTracked',\n  'renderTriggered',\n  'activated',\n  'deactivated',\n  'setup',\n  'data',\n  'render',\n]\n\nexport const VUE_VERSION = 3\n\nexport const BASE_DEPENDENCIES = [\n  'react',\n  'react-dom',\n  '@variousjs/various',\n  'app',\n]\n","import { ModuleDefined, OnMessage, createPostMessage as cpm } from '@variousjs/various'\nimport connector from './connector'\nimport createLogger from './logger'\nimport { emit, subscribe } from './store'\nimport { MESSAGE_KEY } from './config'\n\nexport const createPostMessage: typeof cpm = (moduleDefined) => async (event, value) => {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let next = { trigger: moduleDefined, event, value }\n\n  if (middlewares?.onMessage) {\n    const check = await middlewares.onMessage(next)\n\n    if (check === false) {\n      logger.warn('blocked by middleware', 'POST_MESSAGE')\n      return\n    }\n\n    if (check !== true) {\n      next = { ...next, ...check }\n    }\n  }\n\n  emit({\n    [MESSAGE_KEY]: {\n      timestamp: +new Date(),\n      event: next.event,\n      trigger: moduleDefined,\n      value: next.value,\n    },\n  })\n}\n\nexport const createOnMessage = (moduleDefined: ModuleDefined, onMessage: OnMessage) => subscribe({\n  [MESSAGE_KEY](v) {\n    const { trigger, value, event } = v as Parameters<OnMessage>[0]\n    if (moduleDefined.name !== trigger.name || moduleDefined.module !== trigger.module) {\n      onMessage({ event, value, trigger })\n    }\n  },\n})\n","import {\n  Intl,\n  ModuleDefined,\n  I18n,\n  I18nConfig,\n} from '@variousjs/various'\nimport connector from './connector'\nimport { VariousError, onError, isPromiseLike } from './helper'\nimport { getStore, emit } from './store'\n\nexport function createI18nConfig(\n  method?: I18n,\n  moduleDefined?: ModuleDefined,\n  callback?: () => void,\n) {\n  if (!method) {\n    return\n  }\n\n  const i18nConfig = method()\n\n  if (!isPromiseLike(i18nConfig)) {\n    if (moduleDefined) {\n      connector.setI18nConfig(moduleDefined, i18nConfig)\n    } else {\n      connector.setGlobalI18nConfig(i18nConfig)\n    }\n    return\n  }\n\n  if (moduleDefined) {\n    connector.setI18nConfig(moduleDefined, {\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  } else {\n    connector.setGlobalI18nConfig({\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  }\n\n  i18nConfig\n    .then((res) => {\n      if (moduleDefined) {\n        connector.setI18nConfig(moduleDefined, { ...res, loading: false })\n        callback?.()\n        return\n      }\n\n      const locale = getStore(res.lngStoreKey)\n\n      emit({ [res.lngStoreKey]: undefined }, true)\n      emit({ [res.lngStoreKey]: locale }, true)\n      connector.setGlobalI18nConfig({ ...res, loading: false })\n    })\n    .catch((e: Error) => {\n      onError(new VariousError({\n        name: moduleDefined?.name || 'app',\n        module: moduleDefined?.module,\n        type: 'I18N',\n        originalError: e,\n      }))\n    })\n}\n\nexport function createI18n(\n  moduleDefined: ModuleDefined,\n  updater: () => void,\n) {\n  const ctx: Intl = (key, params, defaultString) => {\n    const i18nConfig = connector.getI18nConfig(moduleDefined) || connector.getGlobalI18nConfig()\n\n    let defaultText = defaultString\n    if (defaultText === undefined) {\n      defaultText = typeof params === 'string' ? params : key\n    }\n\n    if (!i18nConfig) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('config not exist'),\n      }))\n      return defaultText\n    }\n\n    if (i18nConfig.loading) {\n      return defaultText\n    }\n\n    const { lngStoreKey, resources } = i18nConfig\n    const locale: string | undefined = getStore(lngStoreKey)\n\n    if (lngStoreKey === undefined || locale === undefined) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('locale key not defined'),\n      }))\n      return defaultText\n    }\n\n    const resource = resources?.[locale]\n\n    if (!resource) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale resource \\`${locale}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    if (!resource[key]) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale key \\`${key}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    const text = resource[key]\n\n    if (!params || typeof params === 'string' || Object.prototype.toString.call(params) !== '[object Object]') {\n      return text\n    }\n\n    const args = Object.keys(params)\n\n    if (!args.length) {\n      return text\n    }\n\n    return args.reduce((next, arg) => {\n      const regex = new RegExp(`{\\\\s*${arg}\\\\s*}`, 'g')\n      return next.replace(regex, params[arg].toString())\n    }, text)\n  }\n\n  ctx.update = (config, type) => {\n    const i18nConfig = type === 'app'\n      ? connector.getGlobalI18nConfig()\n      : connector.getI18nConfig(moduleDefined)\n    const next = { ...i18nConfig, ...config } as I18nConfig\n\n    if (type === 'app') {\n      connector.setGlobalI18nConfig(next)\n    } else {\n      connector.setI18nConfig(moduleDefined, next)\n    }\n\n    updater()\n  }\n\n  return ctx\n}\n","import {\n  onComponentMounted as ocm,\n  isModuleLoaded as im,\n  preloadModules as pp,\n  removeLoadedModules as rm,\n  defineDependencies as dd,\n  VariousError as ve,\n  ErrorType as et,\n  ModuleDefined,\n  OnMessage,\n  I18n,\n  VariousComponentType,\n} from '@variousjs/various'\nimport { getStore, subscribe, emit } from './store'\nimport createLogger from './logger'\nimport {\n  CONFIG_KEY,\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  VUE_VERSION,\n  VUE_FUNCTION_OPTIONS,\n  BASE_DEPENDENCIES,\n} from './config'\nimport { PublicActions, RequiredComponent } from '../types'\nimport connector from './connector'\nimport { createOnMessage } from './message'\nimport { createI18nConfig } from './i18n'\n\nconst getUrlHash = (url: string) => `${url}?${+new Date()}`\n\nconst hasModule = (modules: ModuleDefined[], module: ModuleDefined) => modules\n  .some((c) => c.name === module.name && c.module === module.module)\n\nexport const preloadModules: typeof pp = (names) => new Promise<void>((resolve, reject) => {\n  window.requirejs(names, resolve, reject)\n})\n\nexport const removeLoadedModules: typeof rm = (names) => {\n  names.forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      window.requirejs.undef(name)\n    }\n  })\n}\n\nexport const defineDependencies: typeof dd = (deps) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const next = {} as Record<string, string>\n\n  Object.keys(deps).forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      next[name] = `${deps[name]}#${name}`\n      window.requirejs.undef(name)\n    }\n  })\n\n  window.requirejs.config({ paths: next })\n  emit({ [DEPENDENCIES_KEY]: { ...dependencies, ...next } }, true)\n}\n\nexport const isModuleLoaded: typeof im = (name) => window.requirejs.defined(name)\n\nexport const isModuleSpecified = (name: string) => window.requirejs.specified(name)\n\nexport const getMountedComponents = () => getStore(MOUNTED_COMPONENTS_KEY)\n\nexport const onComponentMounted: typeof ocm = (module, callback) => {\n  const modules = Array.isArray(module) ? module : [module]\n\n  if (modules.every((m) => hasModule(getMountedComponents(), m))) {\n    callback()\n  }\n\n  const unSubscribe = subscribe({\n    [MOUNTED_COMPONENTS_KEY](value) {\n      const mountedModules = value as ModuleDefined[]\n      if (modules.every((n) => hasModule(mountedModules, n))) {\n        unSubscribe()\n        callback()\n      }\n    },\n  })\n\n  return unSubscribe\n}\n\nexport const resetDependencyConfig = (name: string, url?: string) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  // standalone\n  if (!window.requirejs) {\n    return\n  }\n\n  // ignore multiple custom module url\n  if (url && window.requirejs.defined(name)) {\n    return\n  }\n\n  let path = getUrlHash(dependencies[name])\n\n  // custom module url, but module loaded error\n  if (url) {\n    path = `${url}#${name}`\n\n    try {\n      const { registry } = window.requirejs.s.contexts._\n      if (registry?.[name].error) {\n        path = getUrlHash(url)\n      }\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  window.requirejs.undef(name)\n  window.requirejs.config({\n    paths: { [name]: path },\n  })\n}\nexport const getNameWithModule = (moduleDefined: ModuleDefined) => {\n  const { name, module } = moduleDefined\n  return module ? `${name}.${module}` : name\n}\n\nexport function getConfig<C extends object = {}>() {\n  return getStore(CONFIG_KEY) as C\n}\n\nexport const onError = (e: VariousError) => {\n  const { name, module, type } = e\n  const logger = createLogger({ name, module })\n  logger.error(e, type)\n}\n\nexport class VariousError extends Error implements ve {\n  type: et\n\n  originalError: Error\n\n  module?: string\n\n  name: string\n\n  constructor(data: {\n    name: string,\n    module?: string,\n    type: et,\n    originalError: Error,\n  }) {\n    super(data.originalError.message)\n    this.type = data.type\n    this.originalError = data.originalError\n    this.module = data.module\n    this.name = data.name\n  }\n}\n\nexport function checkReactComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  return new Promise<void>((reslove, reject) => {\n    if (component.$$typeof || component.prototype?.isReactComponent || typeof component === 'function') {\n      reslove()\n      return\n    }\n\n    reject(new VariousError({\n      ...moduleDefined,\n      originalError: new Error('not a valid React component'),\n      type: 'INVALID_COMPONENT',\n    }))\n  })\n}\n\nexport function isPromiseLike<T>(value: T | PromiseLike<T>): value is PromiseLike<T> {\n  return value != null && typeof (value as any).then === 'function'\n}\n\nexport function checkVueComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  const versionRegex = new RegExp(`^${VUE_VERSION}\\\\.`)\n\n  return new Promise<void>((resolve, reject) => {\n    window.requirejs(['vue'], (Vue: { version: string }) => {\n      if (!versionRegex.test(Vue.version)) {\n        reject(new Error(`Vue ${VUE_VERSION}+ required, detected an incompatible version`))\n      }\n\n      if (typeof component?.render === 'function' || typeof component?.setup === 'function') {\n        resolve()\n        return\n      }\n\n      reject(new VariousError({\n        ...moduleDefined,\n        originalError: new Error('not a valid Vue component'),\n        type: 'INVALID_COMPONENT',\n      }))\n    })\n  })\n}\n\nexport function parseComponentActions(params: ModuleDefined & {\n  componentNode: RequiredComponent,\n  type?: VariousComponentType,\n  i18nUpdate: () => void,\n}) {\n  const {\n    componentNode,\n    name,\n    module,\n    type,\n    i18nUpdate,\n  } = params\n\n  const actions: PublicActions = {}\n  let onMessageAction: OnMessage | undefined\n  let i18nAction: I18n | undefined\n\n  Object\n    .getOwnPropertyNames(componentNode)\n    .forEach((method) => {\n      if (typeof componentNode[method] !== 'function') {\n        return\n      }\n      if (method === '$onMessage') {\n        onMessageAction = componentNode[method]\n        return\n      }\n      if (method === '$i18n') {\n        i18nAction = componentNode[method]\n        return\n      }\n      if (type === 'vue3' && VUE_FUNCTION_OPTIONS.includes(method)) {\n        return\n      }\n\n      actions[method] = componentNode[method]\n    })\n\n  if (i18nAction) {\n    createI18nConfig(i18nAction, { name, module }, i18nUpdate)\n  }\n\n  connector.setComponentActions({ name, module }, actions)\n\n  if (onMessageAction) {\n    return createOnMessage({ name, module }, onMessageAction)\n  }\n\n  return () => null\n}\n\nexport function updateMountedComponent(moduleDefined: ModuleDefined) {\n  const mountedComponents = getMountedComponents()\n\n  if (!hasModule(mountedComponents, moduleDefined)) {\n    mountedComponents.push(moduleDefined)\n  }\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n}\n\nexport function updateUnMountComponent(moduleDefined: ModuleDefined) {\n  const { name, module } = moduleDefined\n  let mountedComponents = getMountedComponents()\n\n  mountedComponents = mountedComponents\n    .filter((item) => item.name !== name || item.module !== module)\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n  connector.deleteComponentActions({ name, module })\n}\n\nexport function getSelfInfo(params: ModuleDefined & { url?: string }) {\n  const { name, module, url } = params\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  return {\n    name,\n    module,\n    url: url || dependencies[name],\n  }\n}\n\nexport function getClassNameWithModule(self: ModuleDefined, prefix: string) {\n  const { name, module } = self\n  return `${prefix} ${[name, module].filter(Boolean).join('-')}`\n}\n","import { createDispatch as cd } from '@variousjs/various'\nimport connector from './connector'\nimport { dispatch } from './store'\nimport { onError, VariousError } from './helper'\nimport createLogger from './logger'\n\nconst createDispatch: typeof cd = (moduleDefined) => async function (params) {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let {\n    name,\n    module,\n    action,\n    value,\n  } = params\n\n  if (middlewares?.onDispatch) {\n    const check = await middlewares.onDispatch({\n      target: { name, module },\n      action,\n      value,\n      trigger: moduleDefined,\n    })\n    if (check === false) {\n      logger.warn('blocked by middleware', 'DISPATCH')\n      return Promise.resolve()\n    }\n    if (check !== true) {\n      name = check.target.name\n      module = check.target.module\n      action = check.action\n      value = check.value\n    }\n  }\n\n  if (name === 'app') {\n    const storeActions = connector.getStoreActions()\n    const storeAction = storeActions[action]\n    if (!storeAction) {\n      const errorMessage = `action \"${action}\" is not present`\n      const error = new VariousError({\n        ...moduleDefined,\n        type: 'DISPATCH',\n        originalError: new Error(errorMessage),\n      })\n      onError(error)\n      throw error\n    }\n    return dispatch(storeAction, value, moduleDefined)\n  }\n\n  const componentActions = connector.getComponentActions({ name, module })\n\n  if (!componentActions) {\n    const errorMessage = 'component is not ready'\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  const componentAction = componentActions[action]\n\n  if (!componentAction) {\n    const errorMessage = `action \"${action}\" is not present`\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  return Promise.resolve(componentAction(value, moduleDefined))\n}\n\nexport default createDispatch\n","import { createModule as cm, ObjectRecord } from '@variousjs/various'\nimport { RequireError } from '../types'\nimport { DEPENDENCIES_KEY } from './config'\nimport { getStore } from './store'\nimport connector from './connector'\nimport {\n  isModuleLoaded,\n  resetDependencyConfig,\n  VariousError,\n  onError,\n  isModuleSpecified,\n} from './helper'\n\nconst createModule: typeof cm = (config, logError = true) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const middlewares = connector.getMiddlewares()\n  const { name, module, url } = config\n  const loadStart = +new Date()\n\n  const logOnError = (e: VariousError) => {\n    if (logError) {\n      onError(e)\n    }\n  }\n\n  if (url) {\n    resetDependencyConfig(name, url)\n  }\n\n  return new Promise<any>((resolve, reject) => {\n    if (!url && !dependencies[name] && !isModuleSpecified(name)) {\n      const error = new VariousError({\n        name,\n        module,\n        type: 'NOT_DEFINED',\n        originalError: new Error(`module \"${name}\" not defined`),\n      })\n\n      logOnError(error)\n      reject(error)\n      return\n    }\n\n    window.requirejs([name], (C?: ObjectRecord) => {\n      const loadEnd = +new Date()\n\n      middlewares?.onLoad?.({\n        name,\n        module,\n        loadStart,\n        loadEnd,\n        beenLoaded: isModuleLoaded(name),\n      })\n\n      if (!C) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'INVALID_MODULE',\n          originalError: new Error(`module \"${name}\" invalid`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      const defaultModule = 'default' in C ? C.default : C\n      const actualModule = !module ? defaultModule : C[module]\n\n      if (actualModule === undefined && module) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'SUBMODULE_NOT_DEFINED',\n          originalError: new Error(`submodule \"${module}\" not defined`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      resolve(actualModule)\n    }, (e: RequireError) => {\n      const [requireModule] = e.requireModules\n\n      resetDependencyConfig(name, url)\n      resetDependencyConfig(requireModule)\n\n      let errorType: VariousError['type'] = 'LOADING_ERROR'\n\n      if (requireModule !== name) {\n        errorType = 'SUBMODULE_LOADING_ERROR'\n      }\n\n      if (!e.message.includes('https://requirejs.org/docs/errors.html')) {\n        errorType = requireModule === name ? 'SCRIPT_ERROR' : 'SUBMODULE_SCRIPT_ERROR'\n      }\n\n      const error = new VariousError({\n        name,\n        module: requireModule === name ? undefined : requireModule,\n        type: errorType,\n        originalError: e,\n      })\n\n      logOnError(error)\n      reject(error)\n    })\n  })\n}\n\nexport default createModule\n","import React, { Component } from 'react'\nimport {\n  ComponentDefaultProps,\n  VariousError as ve,\n  ModuleDefined,\n} from '@variousjs/various'\nimport {\n  checkReactComponent,\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  getSelfInfo,\n} from './helper'\nimport { connect, getStore, getUserStore } from './store'\nimport connector from './connector'\nimport { createPostMessage } from './message'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createI18n } from './i18n'\nimport createModule from './create-module'\nimport {\n  CreateComponentState,\n  CreateComponentProps,\n  RequiredComponent,\n  Store,\n} from '../types'\n\nfunction reactComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  class R extends Component<\n    CreateComponentProps<P> & ComponentDefaultProps,\n    CreateComponentState\n  > {\n    static displayName = 'various-react-component'\n\n    state = {\n      componentReady: false,\n      isError: false,\n    }\n\n    private error?: ve | Error\n\n    private ComponentNode: RequiredComponent | null\n\n    private isUnMounted?: boolean\n\n    private unSubscribeMessage = () => null as unknown\n\n    componentDidMount() {\n      this.mountComponent()\n    }\n\n    componentWillUnmount() {\n      this.error = undefined\n      this.ComponentNode = null\n      this.isUnMounted = true\n      this.unSubscribeMessage()\n      updateUnMountComponent({ name, module })\n    }\n\n    mountComponent = async () => {\n      try {\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (this.isUnMounted) {\n          return\n        }\n\n        await checkReactComponent(componentNode, { name, module })\n\n        componentNode.displayName = getNameWithModule({ name, module })\n\n        updateMountedComponent({ name, module })\n\n        this.unSubscribeMessage = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          i18nUpdate: () => this.forceUpdate(),\n        })\n\n        this.ComponentNode = componentNode\n        this.setState({ componentReady: true })\n\n        onMounted?.()\n      } catch (e) {\n        if (this.isUnMounted) {\n          return\n        }\n\n        this.error = e as Error\n        this.setState({ componentReady: true, isError: true })\n      }\n    }\n\n    $postMessage = createPostMessage({ name, module })\n\n    $dispatch = createDispatch({ name, module })\n\n    $t = createI18n({ name, module }, () => this.forceUpdate())\n\n    $logger = createLogger({ name, module })\n\n    $self = getSelfInfo({ name, module, url })\n\n    render() {\n      const Fallback = connector.getFallbackComponent()\n      const { $silent, $componentProps, $ref } = this.props\n      const { componentReady, isError } = this.state\n      const store = getUserStore()\n      const ComponentNode = this.ComponentNode as RequiredComponent\n\n      if (isError) {\n        throw this.error\n      }\n\n      if (!componentReady) {\n        if ($silent || isModuleLoaded(name)) {\n          return null\n        }\n\n        return (\n          <Fallback\n            $self={this.$self}\n            $store={store as Store}\n          />\n        )\n      }\n\n      return (\n        <ComponentNode\n          {...$componentProps}\n          $self={this.$self}\n          $dispatch={this.$dispatch}\n          $store={store}\n          $postMessage={this.$postMessage}\n          $t={this.$t}\n          $logger={this.$logger}\n          ref={$ref}\n        />\n      )\n    }\n  }\n\n  const Connected = connect(...storeKeys)(R)\n  Connected.displayName = 'various-connector'\n\n  return Connected\n}\n\nexport default reactComponent\n","import React, {\n  FC,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport type Vue from 'vue'\nimport {\n  ComponentDefaultProps,\n  ModuleDefined,\n  VariousError as ve,\n  ObjectRecord,\n} from '@variousjs/various'\nimport connector from './connector'\nimport createModule from './create-module'\nimport { getStore, useStore } from './store'\nimport {\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  checkVueComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  VariousError,\n  getSelfInfo,\n  getClassNameWithModule,\n} from './helper'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createPostMessage } from './message'\nimport { CreateComponentProps, RequiredComponent } from '../types'\nimport { createI18n } from './i18n'\n\nfunction vueComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  const V: FC<CreateComponentProps<P> & ComponentDefaultProps> = (props) => {\n    const store = useStore(...storeKeys)\n\n    const vueRef = useRef<typeof Vue>()\n    const isVueMounted = useRef(false)\n    const errorRef = useRef<Error | ve>()\n    const isUnMountedRef = useRef(false)\n    const ComponentNodeRef = useRef<RequiredComponent>()\n    const selfRef = useRef(getSelfInfo({ name, module, url }))\n\n    const containerDivRef = useRef<HTMLDivElement | null>(null)\n    const propsReactiveRef = useRef<{ value: ObjectRecord }>()\n    const storeReactiveRef = useRef<{ value: ObjectRecord }>()\n    const unMountVue = useRef<() => void>()\n    const unSubscribeMessageRef = useRef<() => void>()\n    const updateVueComponentRef = useRef<() => void>()\n\n    const [componentReady, setComponentReady] = useState(false)\n    const [isError, setIsError] = useState(false)\n\n    const Fallback = connector.getFallbackComponent()\n    const { $silent, $componentProps } = props\n\n    const mountVue = useCallback(() => {\n      const $logger = createLogger({ name, module })\n      const $dispatch = createDispatch({ name, module })\n      const $postMessage = createPostMessage({ name, module })\n      const $t = createI18n({ name, module }, () => {\n        updateVueComponentRef.current?.()\n      })\n\n      propsReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...$componentProps })\n      storeReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...store })\n\n      const vueApp = vueRef.current!.createApp({\n        setup() {\n          const renderKey = vueRef.current!.ref(0)\n          updateVueComponentRef.current = () => {\n            renderKey.value += 1\n          }\n          return {\n            key: renderKey,\n          }\n        },\n\n        errorCaptured(e) {\n          const error = e as Error\n          errorRef.current = error.message?.includes('https://react')\n            ? new VariousError({\n              originalError: new Error('not a valid Vue component'),\n              name,\n              module,\n              type: 'INVALID_COMPONENT',\n            })\n            : error\n          setIsError(true)\n        },\n\n        render() {\n          return vueRef.current!.h(ComponentNodeRef.current as any, {\n            ...propsReactiveRef.current!.value,\n            various: {\n              $dispatch,\n              $logger,\n              $postMessage,\n              $t,\n              $store: storeReactiveRef.current!.value,\n              $self: selfRef.current,\n            },\n            // eslint-disable-next-line react/no-this-in-sfc\n            key: this.key,\n          })\n        },\n      })\n\n      vueApp.mount(containerDivRef.current!)\n      isVueMounted.current = true\n      unMountVue.current = () => vueApp.unmount()\n    }, [$componentProps, store])\n\n    const mountComponent = useCallback(async () => {\n      try {\n        const vue = await createModule<typeof Vue>({ name: 'vue' })\n        vueRef.current = vue\n\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        await checkVueComponent(componentNode, { name, module })\n\n        updateMountedComponent({ name, module })\n\n        unSubscribeMessageRef.current = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          type: 'vue3',\n          i18nUpdate() {\n            updateVueComponentRef.current?.()\n          },\n        })\n\n        ComponentNodeRef.current = componentNode\n\n        setTimeout(mountVue)\n        setComponentReady(true)\n\n        onMounted?.()\n      } catch (e) {\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        errorRef.current = e as Error\n        setComponentReady(true)\n        setIsError(true)\n      }\n    }, [mountVue])\n\n    useEffect(() => () => {\n      errorRef.current = undefined\n      ComponentNodeRef.current = undefined\n      isUnMountedRef.current = true\n      updateUnMountComponent({ name, module })\n      unMountVue.current?.()\n      unSubscribeMessageRef.current?.()\n      isVueMounted.current = false\n    }, [])\n\n    useEffect(() => {\n      if (isVueMounted.current) {\n        return\n      }\n      mountComponent()\n    }, [mountComponent])\n\n    useEffect(() => {\n      if (propsReactiveRef.current) {\n        propsReactiveRef.current.value = { ...$componentProps }\n      }\n    }, [$componentProps])\n\n    useEffect(() => {\n      if (storeReactiveRef.current) {\n        storeReactiveRef.current.value = { ...store }\n      }\n    }, [store])\n\n    if (isError) {\n      throw errorRef.current\n    }\n\n    return (\n      <>\n        {\n          !componentReady && !$silent && !isModuleLoaded(name)\n            ? (\n              <Fallback\n                $self={selfRef.current}\n                $store={store}\n              />\n            )\n            : null\n        }\n        <div\n          className={getClassNameWithModule({ name, module }, 'various-vue-component')}\n          ref={containerDivRef}\n        />\n      </>\n    )\n  }\n\n  V.displayName = getNameWithModule({ name, module })\n\n  const VueComponent: FC<\n    CreateComponentProps<P> & ComponentDefaultProps\n  > = (props) => (<V {...props} />)\n\n  VueComponent.displayName = 'various-vue-component'\n\n  return VueComponent\n}\n\nexport default vueComponent\n","import React, { Component } from 'react'\nimport { VariousError as ve } from '@variousjs/various'\nimport {\n  onError,\n  VariousError,\n  resetDependencyConfig,\n  updateUnMountComponent,\n  getSelfInfo,\n} from './helper'\nimport connector from './connector'\nimport { ErrorBoundaryProps, Store } from '../types'\nimport { getUserStore } from './store'\n\nclass ErrorBoundary extends Component<ErrorBoundaryProps> {\n  static displayName = 'various-error-boundary'\n\n  state = {\n    hasError: false,\n  }\n\n  private error?: ve\n\n  componentDidCatch(e: Error | VariousError) {\n    const { name, module } = this.props\n    const error = e instanceof VariousError\n      ? e\n      : new VariousError({\n        name,\n        module,\n        type: name === 'app' ? 'APP_ERROR' : 'SCRIPT_ERROR',\n        originalError: e,\n      })\n\n    this.setState({ hasError: true })\n    this.error = error\n    onError(error)\n    resetDependencyConfig(this.props.name)\n    updateUnMountComponent({ name, module })\n  }\n\n  $self = getSelfInfo(this.props)\n\n  reload = () => {\n    this.error = undefined\n    this.setState({ hasError: false })\n  }\n\n  render() {\n    const ErrorFallbackNode = connector.getErrorFallbackComponent()\n    const store = getUserStore()\n\n    if (this.state.hasError) {\n      return (\n        <ErrorFallbackNode\n          $self={this.$self}\n          $reload={this.reload}\n          $store={store as Store}\n          $error={this.error!}\n        />\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","import React from 'react'\nimport { createComponent as cc, ComponentDefaultProps } from '@variousjs/various'\nimport createReactComponent from './react-component'\nimport createVueComponent from './vue-component'\nimport ErrorBoundary from './error-boundary'\nimport { CreateComponentProps } from '../types'\n\nconst createComponent: typeof cc<any, any> = (config, storeKeys) => {\n  const {\n    name,\n    module,\n    url,\n    type = 'react',\n  } = config\n\n  const C = (type === 'vue3' ? createVueComponent : createReactComponent)({\n    name,\n    module,\n    url,\n    watchKeys: storeKeys as string[],\n  })\n\n  const component = (props: ComponentDefaultProps) => {\n    const { $silent, $ref, ...rest } = props || {}\n    const nextProps = {\n      $componentProps: rest, $silent, $ref,\n    } as ComponentDefaultProps & CreateComponentProps<any>\n    return (\n      <ErrorBoundary name={name} module={module} url={url}>\n        <C {...nextProps} />\n      </ErrorBoundary>\n    )\n  }\n\n  component.displayName = 'various-creator'\n  return component\n}\n\nexport default createComponent\n","import { DependencyType, createComponent } from '@variousjs/various/standalone'\nimport { defineDependencies, isModuleSpecified, VariousError } from '../core/helper'\n\nlet requirejsPromise: Promise<Event> | undefined\n\nexport function loadRequireJS(dep?: DependencyType) {\n  const promise = new Promise<Event>((resolve, reject) => {\n    // @ts-ignore\n    if (window.requirejs) {\n      resolve(new Event('requirejs exist'))\n      return\n    }\n\n    if (!dep && !window.requirejs && !requirejsPromise) {\n      reject(new VariousError({\n        name: 'standalone',\n        type: 'NOT_DEFINED',\n        originalError: new Error('requirejs not defined'),\n      }))\n      return\n    }\n\n    if (typeof dep === 'string') {\n      const script = document.createElement('script')\n      script.src = dep\n      script.onload = (e) => resolve(e)\n      script.onerror = (e) => reject(e)\n      document.head.appendChild(script)\n      return\n    }\n\n    // @ts-ignore\n    window.requirejs = dep\n    resolve(new Event('requirejs defined'))\n  })\n\n  if (!requirejsPromise) {\n    requirejsPromise = promise\n  }\n\n  return requirejsPromise\n}\n\nexport function defineModules(\n  deps: Parameters<typeof createComponent>['0']['dependencies'],\n) {\n  Object.entries(deps || {}).forEach(([key, value]) => {\n    if (!isModuleSpecified(key)) {\n      switch (true) {\n        case typeof value === 'string':\n          defineDependencies({ [key]: value as string })\n          break\n\n        case typeof value !== 'string':\n          window.define(key, [], () => value)\n          break\n\n        default:\n          break\n      }\n    }\n  })\n}\n","import React, {\n  ComponentType,\n  FC,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport { createComponent as cc, createConfig as con } from '@variousjs/various/standalone'\nimport createComponentCore from '../core/create-component'\nimport ErrorBoundary from '../core/error-boundary'\nimport connector from '../core/connector'\nimport { onError, VariousError } from '../core/helper'\nimport { defineModules, loadRequireJS } from './helper'\nimport { createStore, emit, getUserStore } from '../core/store'\nimport {\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  CONFIG_KEY,\n  MESSAGE_KEY,\n} from '../core/config'\n\ncreateStore({\n  [MOUNTED_COMPONENTS_KEY]: [],\n  [MESSAGE_KEY]: null,\n  [CONFIG_KEY]: {},\n  [DEPENDENCIES_KEY]: {},\n})\n\nconst Standalone: FC<Parameters<typeof cc>['0']> = (props) => {\n  const {\n    dependencies,\n    url,\n    name,\n    module,\n    type,\n  } = props\n  const [componentReady, setComponentReady] = useState(false)\n  const componentNode = useRef<ComponentType>()\n  const errorRef = useRef<Error>()\n  const [isError, setIsError] = useState(false)\n\n  useEffect(() => {\n    loadRequireJS(dependencies?.requirejs)\n      .then(() => {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { requirejs, ...rest } = dependencies || {}\n        defineModules(rest)\n\n        componentNode.current = createComponentCore({\n          name,\n          module,\n          url,\n          type,\n        })\n        setComponentReady(true)\n      })\n      .catch((e) => {\n        errorRef.current = e\n        setIsError(true)\n      })\n  }, [name, url, module, dependencies, type])\n\n  if (isError) {\n    throw errorRef.current\n  }\n\n  if (!componentReady) {\n    const FallBack = connector.getFallbackComponent()\n    return <FallBack $self={{ name, module, url }} $store={getUserStore()} />\n  }\n\n  const C = componentNode.current!\n\n  return (\n    <C />\n  )\n}\n\nStandalone.displayName = 'various-standalone'\n\nexport const createComponent: typeof cc = (args) => {\n  const component: FC = () => (\n    <ErrorBoundary name=\"standalone\" url={args.url} module={args.module}>\n      <Standalone {...args} />\n    </ErrorBoundary>\n  )\n  const updateLng: ReturnType<typeof cc>['updateLng'] = (key, value) => {\n    emit({ [key]: value })\n  }\n\n  component.displayName = 'various-standalone-creator'\n  return Object.assign(component, { updateLng })\n}\n\nexport const createConfig: typeof con = (config) => {\n  const {\n    baseDependencies,\n    errorFallback,\n    fallback,\n    lng,\n  } = config\n  const { requirejs, ...rest } = baseDependencies\n\n  if (errorFallback) {\n    connector.setErrorFallbackComponent(errorFallback)\n  }\n\n  if (fallback) {\n    connector.setFallbackComponent(fallback)\n  }\n\n  if (lng) {\n    emit({ [lng.key]: lng.defaultValue })\n  }\n\n  loadRequireJS(requirejs)\n    .then(() => {\n      defineModules(rest)\n    })\n    .catch((e) => {\n      onError(new VariousError({\n        name: 'standalone',\n        type: 'CONFIG_ERROR',\n        originalError: e,\n      }))\n    })\n}\n","import React from 'react'\nimport * as Vue from 'vue'\nimport { createRoot } from 'react-dom/client'\nimport { createComponent, createConfig } from '../../src/standalone'\n\ncreateConfig({\n  baseDependencies: {\n    requirejs: 'https://cdn.jsdelivr.net/npm/requirejs@2.3.7/require.min.js',\n    react: React,\n    vue: Vue,\n  },\n  lng: { key: 'locale', defaultValue: 'zh' },\n})\n\nconst url1 = 'https://variousjs.github.io/preview/dist/dino.js'\nconst url2 = 'http://127.0.0.1:2333/dist/i18n/vue-async.js'\nconst Dino = createComponent({\n  name: 'dino',\n  url: url1,\n  dependencies: {\n    // requirejs: 'https://cdn.jsdelivr.net/npm/requirejs@2.3.7/require.min.js',\n  },\n})\nconst VueC = createComponent({ name: 'vuec', url: url2, type: 'vue3' })\n\nfunction App() {\n  return (\n    <div>\n      <Dino />\n      <VueC />\n      <button\n        onClick={() => {\n          VueC.updateLng('locale', 'en')\n        }}\n      >\n        change lng\n      </button>\n    </div>\n  )\n}\n\nconst container = document.getElementById('root')\nconst root = createRoot(container!)\nroot.render(<App />)\n"],"names":["module","exports","react","e","self","t","r","d","default","c","s","o","n","i","WeakMap","has","get","Array","isArray","set","Reflect","ownKeys","constructor","Z","this","listeners","reduce","state","forEach","push","filter","emits","trigger","clearTimeout","timer","setTimeout","getStore","emit","length","u","key","newValue","oldValue","onStateChange","onChange","RegExp","source","flags","valueOf","Object","prototype","toString","keys","hasOwnProperty","call","defineProperty","value","enumerable","configurable","writable","__esModule","a","super","subscribe","Component","props","unsubscribe","setState","componentWillUnmount","render","createElement","getOwnPropertyNames","includes","useState","useLayoutEffect","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","obj","prop","vue","dom","client","_extends","assign","bind","arguments","apply","createStore","connect","dispatch","useStore","Nycticorax","getUserStore","globalStore","store","Fallback","className","getClassNameWithModule","$self","React","ErrorFallback","$error","$reload","type","message","onClick","fallbackComponent","errorFallbackComponent","storeActions","componentActions","i18nConfigs","middlewares","setMiddlewares","m","getMiddlewares","setI18nConfig","moduleDefined","config","name","getNameWithModule","getI18nConfig","setGlobalI18nConfig","globalI18nConfig","getGlobalI18nConfig","setComponentActions","actions","deleteComponentActions","getComponentActions","setStoreActions","getStoreActions","setFallbackComponent","getFallbackComponent","setErrorFallbackComponent","getErrorFallbackComponent","logger","args","connector","canLog","onLog","color","info","warn","error","level","params","window","console","VariousError","originalError","Error","onError","MOUNTED_COMPONENTS_KEY","Symbol","MESSAGE_KEY","CONFIG_KEY","DEPENDENCIES_KEY","VUE_FUNCTION_OPTIONS","BASE_DEPENDENCIES","createPostMessage","async","event","createLogger","next","onMessage","check","timestamp","Date","createI18n","updater","ctx","defaultString","i18nConfig","defaultText","loading","lngStoreKey","resources","locale","resource","text","arg","regex","replace","update","getUrlHash","url","isModuleLoaded","requirejs","defined","isModuleSpecified","specified","getMountedComponents","resetDependencyConfig","dependencies","path","registry","contexts","_","undef","paths","data","parseComponentActions","componentNode","i18nUpdate","onMessageAction","i18nAction","method","callback","then","res","catch","createI18nConfig","v","createOnMessage","updateMountedComponent","mountedComponents","hasModule","some","updateUnMountComponent","item","getSelfInfo","prefix","Boolean","join","action","onDispatch","target","Promise","resolve","storeAction","errorMessage","componentAction","createModule","logError","loadStart","logOnError","reject","C","loadEnd","onLoad","beenLoaded","defaultModule","actualModule","requireModule","requireModules","errorType","watchKeys","onMounted","storeKeys","R","static","componentReady","isError","unSubscribeMessage","componentDidMount","mountComponent","ComponentNode","isUnMounted","component","reslove","$$typeof","isReactComponent","displayName","forceUpdate","$postMessage","$dispatch","createDispatch","$t","$logger","$silent","$componentProps","$ref","$store","ref","Connected","V","vueRef","useRef","isVueMounted","errorRef","isUnMountedRef","ComponentNodeRef","selfRef","containerDivRef","propsReactiveRef","storeReactiveRef","unMountVue","unSubscribeMessageRef","updateVueComponentRef","setComponentReady","setIsError","mountVue","useCallback","current","vueApp","createApp","setup","renderKey","errorCaptured","h","various","mount","unmount","versionRegex","Vue","test","version","checkVueComponent","useEffect","VueComponent","ErrorBoundary","hasError","componentDidCatch","reload","ErrorFallbackNode","children","createComponent","createVueComponent","createReactComponent","rest","nextProps","requirejsPromise","loadRequireJS","dep","promise","Event","script","document","src","onload","onerror","head","appendChild","defineModules","deps","entries","defineDependencies","define","Standalone","createComponentCore","FallBack","updateLng","baseDependencies","errorFallback","fallback","lng","defaultValue","createConfig","Dino","VueC","App","container","getElementById","createRoot"],"sourceRoot":""}