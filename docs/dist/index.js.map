{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@variousjs/various/./node_modules/nycticorax/dist/index.js","webpack://@variousjs/various/external amd \"react\"","webpack://@variousjs/various/webpack/bootstrap","webpack://@variousjs/various/webpack/runtime/compat get default export","webpack://@variousjs/various/webpack/runtime/define property getters","webpack://@variousjs/various/webpack/runtime/hasOwnProperty shorthand","webpack://@variousjs/various/webpack/runtime/make namespace object","webpack://@variousjs/various/./src/core/store.ts","webpack://@variousjs/various/./src/core/config.ts","webpack://@variousjs/various/./src/core/logger.ts","webpack://@variousjs/various/./src/core/message.ts","webpack://@variousjs/various/./src/core/i18n.ts","webpack://@variousjs/various/./src/core/helper.ts","webpack://@variousjs/various/./src/core/default-component.tsx","webpack://@variousjs/various/./src/core/connector.ts","webpack://@variousjs/various/./src/core/error-boundary.tsx","webpack://@variousjs/various/./src/core/dispatch.ts","webpack://@variousjs/various/./src/core/create-module.ts","webpack://@variousjs/various/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@variousjs/various/./src/core/react-component.tsx","webpack://@variousjs/various/./src/core/vue-component.tsx","webpack://@variousjs/various/./src/core/create-component.tsx","webpack://@variousjs/various/./src/core/render-component.tsx","webpack://@variousjs/various/./src/core/index.tsx"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"react\")):\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Nycticorax=e(require(\"react\")):t.Nycticorax=e(t.React)}(self,t=>(()=>{\"use strict\";var e={17(t){t.exports=function t(e,r){if(e===r)return!0;if(e&&r&&\"object\"==typeof e&&\"object\"==typeof r){if(e.constructor!==r.constructor)return!1;var o,s,n;if(Array.isArray(e)){if((o=e.length)!=r.length)return!1;for(s=o;0!==s--;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((o=(n=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(s=o;0!==s--;)if(!Object.prototype.hasOwnProperty.call(r,n[s]))return!1;for(s=o;0!==s--;){var i=n[s];if(!t(e[i],r[i]))return!1}return!0}return e!=e&&r!=r}},232(t,e,r){r.d(e,{default:()=>u});var o=r(705),s=r(17),n=r.n(s);function i(t,e=new WeakMap){if(\"object\"!=typeof t||null===t)return t;if(e.has(t))return e.get(t);const r=Array.isArray(t)?[]:{};e.set(t,r);const o=Reflect.ownKeys(t);for(const s of o)r[s]=i(t[s],e);return r}class u{constructor(){var t;(0,o.A)(this,\"state\",void 0),(0,o.A)(this,\"listeners\",void 0),(0,o.A)(this,\"emits\",void 0),(0,o.A)(this,\"timer\",void 0),(0,o.A)(this,\"onStateChange\",void 0),(0,o.A)(this,\"getStore\",void 0),(0,o.A)(this,\"createStore\",t=>{this.listeners=Reflect.ownKeys(t).reduce((e,r)=>{const o=r;return this.state[o]=t[o],{...e,[r]:[]}},{})}),(0,o.A)(this,\"subscribe\",t=>{const e={};return Reflect.ownKeys(t).forEach(r=>{const o=r;this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(t[o]),e[o]=t[o]}),()=>{Reflect.ownKeys(e).forEach(t=>{const r=t;this.listeners[r]=this.listeners[r].filter(t=>t!==e[r])})}}),(0,o.A)(this,\"emit\",(t,e)=>{this.emits={...this.emits,...t},e?this.trigger():(clearTimeout(this.timer),this.timer=setTimeout(this.trigger))}),(0,o.A)(this,\"dispatch\",(t,...e)=>t({getStore:this.getStore,emit:t=>this.emit(t,!0)},...e)),(0,o.A)(this,\"trigger\",()=>{const t=this.emits,e=[],r=Reflect.ownKeys(t);for(let o=0;o<r.length;o+=1){const s=r[o];if(n()(this.state[s],t[s]))continue;const u=t[s],c=this.state[s];this.state[s]=i(t[s]),e.push({key:s,newValue:u,oldValue:c})}const o={};e.forEach(t=>{o[t.key]=[t.newValue,t.oldValue],this.listeners[t.key]&&this.listeners[t.key].forEach(e=>e(t.newValue,t.oldValue))}),e.length&&this.onStateChange(o),this.emits={},this.timer=void 0}),this.state={},this.listeners={},this.emits={},this.timer=void 0,this.onStateChange=()=>null,this.getStore=(t=this.state,function(e){return e?i(t[e]):t})}set onChange(t){this.onStateChange=t}}},438(e){e.exports=t},705(t,e,r){function o(t){return o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},o(t)}function s(t,e,r){return(e=function(t){var e=function(t){if(\"object\"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,\"string\");if(\"object\"!=o(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==o(e)?e:e+\"\"}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{A:()=>s})}},r={};function o(t){var s=r[t];if(void 0!==s)return s.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var s={};o.d(s,{default:()=>l});var n=o(705),i=o(232),u=o(438),c=o.n(u);const a=[\"name\",\"prototype\",\"length\",\"getDerivedStateFromProps\",\"getDerivedStateFromError\"];class f extends i.default{constructor(...t){super(...t),(0,n.A)(this,\"connect\",function(t){const{getStore:e,subscribe:r}=t;return function(...t){return function(o){class s extends u.Component{constructor(o){super(o),(0,n.A)(this,\"unsubscribe\",void 0),(0,n.A)(this,\"state\",{props:e()}),this.unsubscribe=r(t.reduce((t,r)=>({...t,[r]:()=>{this.setState({props:e()})}}),{}))}componentWillUnmount(){this.unsubscribe()}render(){const{props:t}=this.state,e={...t,...this.props};return c().createElement(o,e)}}return Reflect.ownKeys(o).forEach(t=>{const e=String(t);if(!a.includes(e)){const e=Object.getOwnPropertyDescriptor(o,t);e&&Object.defineProperty(s,t,e)}}),s}}}(this)),(0,n.A)(this,\"useStore\",function(t){const{getStore:e,subscribe:r}=t;return function(...t){const[o,s]=(0,u.useState)(e());return(0,u.useLayoutEffect)(()=>r(t.reduce((t,r)=>({...t,[r]:()=>{s(t=>({...t,[r]:e()[r]}))}}),{}))),o}}(this))}}const l=f;return s.default})());\n//# sourceMappingURL=index.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Nycticorax from 'nycticorax'\nimport { Store } from '../types'\n\nexport const {\n  createStore,\n  getStore,\n  connect,\n  emit,\n  subscribe,\n  dispatch,\n  useStore,\n} = new Nycticorax<Store>()\n\nexport function getUserStore<S extends object = {}>() {\n  const globalStore = getStore()\n  const keys = Object.keys(globalStore)\n  const store: Record<string, any> = {}\n\n  keys.forEach((key) => {\n    store[key] = globalStore[key]\n  })\n\n  return store as S\n}\n","export const MOUNTED_COMPONENTS_KEY = Symbol('MOUNTED_COMPONENTS')\n\nexport const MESSAGE_KEY = Symbol('MESSAGE')\n\nexport const CONFIG_KEY = Symbol('CONFIG')\n\nexport const DEPENDENCIES_KEY = Symbol('DEPENDENCIES')\n\nexport const STANDALONE_CONFIG_READY = Symbol('STANDALONE_CONFIG_READY')\n\nexport const VUE_FUNCTION_OPTIONS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeUnmount',\n  'unmounted',\n  'errorCaptured',\n  'renderTracked',\n  'renderTriggered',\n  'activated',\n  'deactivated',\n  'setup',\n  'data',\n  'render',\n]\n\nexport const VUE_VERSION = 3\n\nexport const BASE_DEPENDENCIES = [\n  'react',\n  'react-dom',\n  '@variousjs/various',\n  'app',\n]\n","import { createLogger as cl, LogEvent } from '@variousjs/various'\nimport connector from './connector'\nimport { getNameWithModule, VariousError } from './helper'\n\ntype LogArgs = Parameters<LogEvent>[0]\ntype LogLevel = LogArgs['level']\n\nconst logger = (args: LogArgs) => {\n  const middlewares = connector.getMiddlewares()\n  const canLog = middlewares?.onLog?.(args)\n\n  if (canLog === false) {\n    return\n  }\n\n  const colorMap: Record<LogLevel, string> = {\n    info: 'blue',\n    warn: 'orange',\n    error: 'red',\n  }\n  const color = colorMap[args.level]\n\n  const params = [\n    `%c ${getNameWithModule(args)} `,\n    `background:${color};border:1px solid ${color};padding:1px;border-radius:2px 0 0 2px;color: #fff;`,\n  ]\n\n  if (args.type) {\n    params[0] = `${params[0]}%c ${args.type} %c`\n    params.push(\n      `border:1px solid ${color};padding:1px;border-radius:0 2px 2px 0;color:${color};`,\n      'background:transparent',\n    )\n  }\n\n  if (args.level !== 'info') {\n    params[0] = ` ${params[0]}`\n  }\n\n  window.console[args.level](...params, args.message)\n}\n\nconst createLogger: typeof cl = (moduleDefined) => ({\n  info(message, type) {\n    logger({\n      ...moduleDefined, level: 'info', type, message,\n    })\n  },\n  warn(message, type) {\n    logger({\n      ...moduleDefined, level: 'warn', type, message,\n    })\n  },\n  error(message, type) {\n    const middlewares = connector.getMiddlewares()\n    const error = message instanceof VariousError\n      ? message\n      : new VariousError({\n        ...moduleDefined,\n        type: type || 'unknow',\n        originalError: message instanceof Error ? message : new Error(message),\n      })\n\n    middlewares?.onError?.(error)\n\n    logger({\n      ...moduleDefined, level: 'error', type, message,\n    })\n  },\n})\n\nexport default createLogger\n","import { ModuleDefined, OnMessage, createPostMessage as cpm } from '@variousjs/various'\nimport connector from './connector'\nimport createLogger from './logger'\nimport { emit, subscribe } from './store'\nimport { MESSAGE_KEY } from './config'\n\nexport const createPostMessage: typeof cpm = (moduleDefined) => async (event, value) => {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let next = { trigger: moduleDefined, event, value }\n\n  if (middlewares?.onMessage) {\n    const check = await middlewares.onMessage(next)\n\n    if (check === false) {\n      logger.warn('blocked by middleware', 'POST_MESSAGE')\n      return\n    }\n\n    if (check !== true) {\n      next = { ...next, ...check }\n    }\n  }\n\n  emit({\n    [MESSAGE_KEY]: {\n      timestamp: +new Date(),\n      event: next.event,\n      trigger: moduleDefined,\n      value: next.value,\n    },\n  })\n}\n\nexport const createOnMessage = (moduleDefined: ModuleDefined, onMessage: OnMessage) => subscribe({\n  [MESSAGE_KEY](v) {\n    const { trigger, value, event } = v!\n    if (moduleDefined.name !== trigger.name || moduleDefined.module !== trigger.module) {\n      onMessage({ event, value, trigger })\n    }\n  },\n})\n","import {\n  Intl,\n  ModuleDefined,\n  I18n,\n  I18nConfig,\n} from '@variousjs/various'\nimport connector from './connector'\nimport { VariousError, onError, isPromiseLike } from './helper'\nimport { getStore, emit } from './store'\n\nexport function createI18nConfig(\n  method?: I18n,\n  moduleDefined?: ModuleDefined,\n  callback?: () => void,\n) {\n  if (!method) {\n    return\n  }\n\n  const i18nConfig = method()\n\n  if (!isPromiseLike(i18nConfig)) {\n    if (moduleDefined) {\n      connector.setI18nConfig(moduleDefined, i18nConfig)\n    } else {\n      connector.setGlobalI18nConfig(i18nConfig)\n    }\n    return\n  }\n\n  if (moduleDefined) {\n    connector.setI18nConfig(moduleDefined, {\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  } else {\n    connector.setGlobalI18nConfig({\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  }\n\n  i18nConfig\n    .then((res) => {\n      if (moduleDefined) {\n        connector.setI18nConfig(moduleDefined, { ...res, loading: false })\n        callback?.()\n        return\n      }\n\n      const locale = getStore(res.lngStoreKey)\n\n      emit({ [res.lngStoreKey]: undefined }, true)\n      emit({ [res.lngStoreKey]: locale }, true)\n      connector.setGlobalI18nConfig({ ...res, loading: false })\n    })\n    .catch((e: Error) => {\n      onError(new VariousError({\n        name: moduleDefined?.name || 'app',\n        module: moduleDefined?.module,\n        type: 'I18N',\n        originalError: e,\n      }))\n    })\n}\n\nexport function createI18n(\n  moduleDefined: ModuleDefined,\n  updater: () => void,\n) {\n  const ctx: Intl = (key, params, defaultString) => {\n    const i18nConfig = connector.getI18nConfig(moduleDefined) || connector.getGlobalI18nConfig()\n\n    let defaultText = defaultString\n    if (defaultText === undefined) {\n      defaultText = typeof params === 'string' ? params : key\n    }\n\n    if (!i18nConfig) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('config not exist'),\n      }))\n      return defaultText\n    }\n\n    if (i18nConfig.loading) {\n      return defaultText\n    }\n\n    const { lngStoreKey, resources } = i18nConfig\n    const locale: string | undefined = getStore(lngStoreKey)\n\n    if (lngStoreKey === undefined || locale === undefined) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('locale key not defined'),\n      }))\n      return defaultText\n    }\n\n    const resource = resources?.[locale]\n\n    if (!resource) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale resource \\`${locale}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    if (!resource[key]) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale key \\`${key}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    const text = resource[key]\n\n    if (!params || typeof params === 'string' || Object.prototype.toString.call(params) !== '[object Object]') {\n      return text\n    }\n\n    const args = Object.keys(params)\n\n    if (!args.length) {\n      return text\n    }\n\n    return args.reduce((next, arg) => {\n      const regex = new RegExp(`{\\\\s*${arg}\\\\s*}`, 'g')\n      return next.replace(regex, params[arg].toString())\n    }, text)\n  }\n\n  ctx.update = (config, type) => {\n    const i18nConfig = type === 'app'\n      ? connector.getGlobalI18nConfig()\n      : connector.getI18nConfig(moduleDefined)\n    const next = { ...i18nConfig, ...config } as I18nConfig\n\n    if (type === 'app') {\n      connector.setGlobalI18nConfig(next)\n    } else {\n      connector.setI18nConfig(moduleDefined, next)\n    }\n\n    updater()\n  }\n\n  return ctx\n}\n","import {\n  onComponentMounted as ocm,\n  isModuleLoaded as im,\n  preloadModules as pp,\n  removeLoadedModules as rm,\n  defineDependencies as dd,\n  VariousError as ve,\n  ErrorType as et,\n  ModuleDefined,\n  OnMessage,\n  I18n,\n  VariousComponentType,\n} from '@variousjs/various'\nimport { getStore, subscribe, emit } from './store'\nimport createLogger from './logger'\nimport {\n  CONFIG_KEY,\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  VUE_VERSION,\n  VUE_FUNCTION_OPTIONS,\n  BASE_DEPENDENCIES,\n} from './config'\nimport { PublicActions, RequiredComponent } from '../types'\nimport connector from './connector'\nimport { createOnMessage } from './message'\nimport { createI18nConfig } from './i18n'\n\nconst getUrlHash = (url: string) => `${url}?${+new Date()}`\n\nconst hasModule = (modules: ModuleDefined[], module: ModuleDefined) => modules\n  .some((c) => c.name === module.name && c.module === module.module)\n\nexport const preloadModules: typeof pp = (names) => new Promise<void>((resolve, reject) => {\n  window.requirejs(names, resolve, reject)\n})\n\nexport const removeLoadedModules: typeof rm = (names) => {\n  names.forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      window.requirejs.undef(name)\n    }\n  })\n}\n\nexport const defineDependencies: typeof dd = (deps) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const next = {} as Record<string, string>\n\n  Object.keys(deps).forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      next[name] = `${deps[name]}#${name}`\n      window.requirejs.undef(name)\n    }\n  })\n\n  window.requirejs.config({ paths: next })\n  emit({ [DEPENDENCIES_KEY]: { ...dependencies, ...next } }, true)\n}\n\nexport const isModuleLoaded: typeof im = (name) => window.requirejs.defined(name)\n\nexport const isModuleSpecified = (name: string) => window.requirejs.specified(name)\n\nexport const getMountedComponents = () => getStore(MOUNTED_COMPONENTS_KEY)\n\nexport const onComponentMounted: typeof ocm = (module, callback) => {\n  const modules = Array.isArray(module) ? module : [module]\n\n  if (modules.every((m) => hasModule(getMountedComponents(), m))) {\n    callback()\n  }\n\n  const unSubscribe = subscribe({\n    [MOUNTED_COMPONENTS_KEY](value) {\n      const mountedModules = value\n      if (modules.every((n) => hasModule(mountedModules, n))) {\n        unSubscribe()\n        callback()\n      }\n    },\n  })\n\n  return unSubscribe\n}\n\nexport const resetDependencyConfig = (name: string, url?: string) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  // ignore multiple custom module url\n  if (url && isModuleLoaded(name)) {\n    return\n  }\n\n  if (!dependencies[name] && url) {\n    window.requirejs.config({\n      paths: { [name]: `${url}#${name}` },\n    })\n    return\n  }\n\n  let path = getUrlHash(dependencies[name])\n\n  if (url) {\n    path = getUrlHash(`${url}#${name}`)\n  }\n\n  window.requirejs.undef(name)\n  window.requirejs.config({\n    paths: { [name]: path },\n  })\n}\nexport const getNameWithModule = (moduleDefined: ModuleDefined) => {\n  const { name, module } = moduleDefined\n  return module ? `${name}.${module}` : name\n}\n\nexport function getConfig<C extends object = {}>() {\n  return getStore(CONFIG_KEY) as C\n}\n\nexport const onError = (e: VariousError) => {\n  const { name, module, type } = e\n  const logger = createLogger({ name, module })\n  logger.error(e, type)\n}\n\nexport class VariousError extends Error implements ve {\n  type: et\n\n  originalError: Error\n\n  module?: string\n\n  name: string\n\n  constructor(data: {\n    name: string,\n    module?: string,\n    type: et,\n    originalError: Error,\n  }) {\n    super(data.originalError.message)\n    this.type = data.type\n    this.originalError = data.originalError\n    this.module = data.module\n    this.name = data.name\n  }\n}\n\nexport function checkReactComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  return new Promise<void>((reslove, reject) => {\n    if (component.$$typeof || component.prototype?.isReactComponent || typeof component === 'function') {\n      reslove()\n      return\n    }\n\n    reject(new VariousError({\n      ...moduleDefined,\n      originalError: new Error('not a valid React component'),\n      type: 'INVALID_COMPONENT',\n    }))\n  })\n}\n\nexport function isPromiseLike<T>(value: T | PromiseLike<T>): value is PromiseLike<T> {\n  return value != null && typeof (value as any).then === 'function'\n}\n\nexport function checkVueComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  const versionRegex = new RegExp(`^${VUE_VERSION}\\\\.`)\n\n  return new Promise<void>((resolve, reject) => {\n    window.requirejs(['vue'], (Vue: { version: string }) => {\n      if (!versionRegex.test(Vue.version)) {\n        reject(new Error(`Vue ${VUE_VERSION}+ required, detected an incompatible version`))\n      }\n\n      if (typeof component?.render === 'function' || typeof component?.setup === 'function') {\n        resolve()\n        return\n      }\n\n      reject(new VariousError({\n        ...moduleDefined,\n        originalError: new Error('not a valid Vue component'),\n        type: 'INVALID_COMPONENT',\n      }))\n    })\n  })\n}\n\nexport function parseComponentActions(params: ModuleDefined & {\n  componentNode: RequiredComponent,\n  type?: VariousComponentType,\n  i18nUpdate: () => void,\n}) {\n  const {\n    componentNode,\n    name,\n    module,\n    type,\n    i18nUpdate,\n  } = params\n\n  const actions: PublicActions = {}\n  let onMessageAction: OnMessage | undefined\n  let i18nAction: I18n | undefined\n\n  Object\n    .getOwnPropertyNames(componentNode)\n    .forEach((method) => {\n      if (typeof componentNode[method] !== 'function') {\n        return\n      }\n      if (method === '$onMessage') {\n        onMessageAction = componentNode[method]\n        return\n      }\n      if (method === '$i18n') {\n        i18nAction = componentNode[method]\n        return\n      }\n      if (type === 'vue3' && VUE_FUNCTION_OPTIONS.includes(method)) {\n        return\n      }\n\n      actions[method] = componentNode[method]\n    })\n\n  if (i18nAction) {\n    createI18nConfig(i18nAction, { name, module }, i18nUpdate)\n  }\n\n  connector.setComponentActions({ name, module }, actions)\n\n  if (onMessageAction) {\n    return createOnMessage({ name, module }, onMessageAction)\n  }\n\n  return () => null\n}\n\nexport function updateMountedComponent(moduleDefined: ModuleDefined) {\n  const mountedComponents = getMountedComponents()\n\n  if (!hasModule(mountedComponents, moduleDefined)) {\n    mountedComponents.push(moduleDefined)\n  }\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n}\n\nexport function updateUnMountComponent(moduleDefined: ModuleDefined) {\n  const { name, module } = moduleDefined\n  let mountedComponents = getMountedComponents()\n\n  mountedComponents = mountedComponents\n    .filter((item) => item.name !== name || item.module !== module)\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n  connector.deleteComponentActions({ name, module })\n}\n\nexport function getSelfInfo(params: ModuleDefined & { url?: string }) {\n  const { name, module, url } = params\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  return {\n    name,\n    module,\n    url: url || dependencies[name],\n  }\n}\n\nexport function getClassNameWithModule(self: ModuleDefined, prefix: string) {\n  const { name, module } = self\n  return `${prefix} ${[name, module].filter(Boolean).join('-')}`\n}\n","import React, { ComponentType } from 'react'\nimport { FallbackNode, ErrorFallbackNode } from '@variousjs/various'\nimport { getClassNameWithModule } from './helper'\nimport { Store } from '../types'\n\nexport const Fallback: FallbackNode<Store> = (props) => {\n  const className = getClassNameWithModule(props.$self, 'various-component-fallback')\n  return (\n    <div className={className}>Loading</div>\n  )\n}\n\nexport const ErrorFallback: ErrorFallbackNode<Store> = ({ $error, $reload, $self }) => {\n  const className = getClassNameWithModule($self, 'various-component-error_fallback')\n  return (\n    <div className={className}>\n      <h3>{$error.type}</h3>\n      <p>{$error.message}</p>\n      <button type=\"button\" onClick={$reload}>\n        Reload\n      </button>\n    </div>\n  )\n}\n\nexport const Root: ComponentType = () => (\n  <div>App Container is not defined</div>\n)\n","import {\n  FallbackNode,\n  ErrorFallbackNode,\n  App,\n  ModuleDefined,\n} from '@variousjs/various'\nimport { Fallback, ErrorFallback } from './default-component'\nimport {\n  PublicActions,\n  Store,\n  ConnectorI18nConfig,\n  Actions,\n} from '../types'\nimport { getNameWithModule } from './helper'\n\nclass Connector {\n  private fallbackComponent: FallbackNode<Store>\n\n  private errorFallbackComponent: ErrorFallbackNode<Store>\n\n  private storeActions: Actions<Store>\n\n  private componentActions: Record<string, PublicActions>\n\n  private i18nConfigs: Record<string, ConnectorI18nConfig | undefined>\n\n  private globalI18nConfig: ConnectorI18nConfig | undefined\n\n  private middlewares: App['middlewares']\n\n  constructor() {\n    this.fallbackComponent = Fallback\n    this.errorFallbackComponent = ErrorFallback\n    this.storeActions = {}\n    this.componentActions = {}\n    this.i18nConfigs = {}\n    this.middlewares = {}\n  }\n\n  setMiddlewares(m: App['middlewares']) {\n    this.middlewares = m\n  }\n\n  getMiddlewares() {\n    return this.middlewares\n  }\n\n  setI18nConfig(moduleDefined: ModuleDefined, config: ConnectorI18nConfig) {\n    const name = getNameWithModule(moduleDefined)\n    this.i18nConfigs[name] = { ...this.i18nConfigs[name], ...config }\n  }\n\n  getI18nConfig(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.i18nConfigs[name]\n  }\n\n  setGlobalI18nConfig(config: ConnectorI18nConfig) {\n    this.globalI18nConfig = { ...this.globalI18nConfig, ...config }\n  }\n\n  getGlobalI18nConfig() {\n    return this.globalI18nConfig\n  }\n\n  setComponentActions(moduleDefined: ModuleDefined, actions: PublicActions) {\n    const name = getNameWithModule(moduleDefined)\n    this.componentActions[name] = actions\n  }\n\n  deleteComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    delete this.componentActions[name]\n  }\n\n  getComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.componentActions[name]\n  }\n\n  setStoreActions(actions: Actions<Store>) {\n    this.storeActions = actions\n  }\n\n  getStoreActions() {\n    return this.storeActions\n  }\n\n  setFallbackComponent(fallbackComponent: FallbackNode<Store>) {\n    this.fallbackComponent = fallbackComponent\n  }\n\n  getFallbackComponent() {\n    return this.fallbackComponent\n  }\n\n  setErrorFallbackComponent(errorFallbackComponent: ErrorFallbackNode<Store>) {\n    this.errorFallbackComponent = errorFallbackComponent\n  }\n\n  getErrorFallbackComponent() {\n    return this.errorFallbackComponent\n  }\n}\n\nexport default new Connector()\n","import React, { Component } from 'react'\nimport { VariousError as ve } from '@variousjs/various'\nimport {\n  onError,\n  VariousError,\n  resetDependencyConfig,\n  updateUnMountComponent,\n  getSelfInfo,\n} from './helper'\nimport connector from './connector'\nimport { ErrorBoundaryProps, Store } from '../types'\nimport { getUserStore } from './store'\n\nclass ErrorBoundary extends Component<ErrorBoundaryProps> {\n  static displayName = 'various-error-boundary'\n\n  state = {\n    hasError: false,\n  }\n\n  private error?: ve\n\n  componentDidCatch(e: Error | VariousError) {\n    const { name, module } = this.props\n    const error = e instanceof VariousError\n      ? e\n      : new VariousError({\n        name,\n        module,\n        type: name === 'app' ? 'APP_ERROR' : 'SCRIPT_ERROR',\n        originalError: e,\n      })\n\n    this.setState({ hasError: true })\n    this.error = error\n    onError(error)\n    resetDependencyConfig(this.props.name)\n    updateUnMountComponent({ name, module })\n  }\n\n  $self = getSelfInfo(this.props)\n\n  reload = () => {\n    this.error = undefined\n    this.setState({ hasError: false })\n  }\n\n  render() {\n    const ErrorFallbackNode = connector.getErrorFallbackComponent()\n    const store = getUserStore()\n\n    if (this.state.hasError) {\n      return (\n        <ErrorFallbackNode\n          $self={this.$self}\n          $reload={this.reload}\n          $store={store as Store}\n          $error={this.error!}\n        />\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","import { createDispatch as cd } from '@variousjs/various'\nimport connector from './connector'\nimport { dispatch } from './store'\nimport { onError, VariousError } from './helper'\nimport createLogger from './logger'\n\nconst createDispatch: typeof cd = (moduleDefined) => async function (params) {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let {\n    name,\n    module,\n    action,\n    value,\n  } = params\n\n  if (middlewares?.onDispatch) {\n    const check = await middlewares.onDispatch({\n      target: { name, module },\n      action,\n      value,\n      trigger: moduleDefined,\n    })\n    if (check === false) {\n      logger.warn('blocked by middleware', 'DISPATCH')\n      return Promise.resolve()\n    }\n    if (check !== true) {\n      name = check.target.name\n      module = check.target.module\n      action = check.action\n      value = check.value\n    }\n  }\n\n  if (name === 'app') {\n    const storeActions = connector.getStoreActions()\n    const storeAction = storeActions[action]\n    if (!storeAction) {\n      const errorMessage = `action \"${action}\" is not present`\n      const error = new VariousError({\n        ...moduleDefined,\n        type: 'DISPATCH',\n        originalError: new Error(errorMessage),\n      })\n      onError(error)\n      throw error\n    }\n    return dispatch(storeAction, value, moduleDefined)\n  }\n\n  const componentActions = connector.getComponentActions({ name, module })\n\n  if (!componentActions) {\n    const errorMessage = 'component is not ready'\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  const componentAction = componentActions[action]\n\n  if (!componentAction) {\n    const errorMessage = `action \"${action}\" is not present`\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  return Promise.resolve(componentAction(value, moduleDefined))\n}\n\nexport default createDispatch\n","import { createModule as cm, ObjectRecord } from '@variousjs/various'\nimport { RequireError } from '../types'\nimport { DEPENDENCIES_KEY } from './config'\nimport { getStore } from './store'\nimport connector from './connector'\nimport {\n  isModuleLoaded,\n  resetDependencyConfig,\n  VariousError,\n  onError,\n  isModuleSpecified,\n} from './helper'\n\nconst createModule: typeof cm = (config, logError = true) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const middlewares = connector.getMiddlewares()\n  const { name, module, url } = config\n  const loadStart = +new Date()\n\n  const logOnError = (e: VariousError) => {\n    if (logError) {\n      onError(e)\n    }\n  }\n\n  if (url) {\n    resetDependencyConfig(name, url)\n  }\n\n  return new Promise<any>((resolve, reject) => {\n    if (!url && !dependencies[name] && !isModuleSpecified(name)) {\n      const error = new VariousError({\n        name,\n        module,\n        type: 'NOT_DEFINED',\n        originalError: new Error(`module \"${name}\" not defined`),\n      })\n\n      logOnError(error)\n      reject(error)\n      return\n    }\n\n    window.requirejs([name], (C?: ObjectRecord) => {\n      const loadEnd = +new Date()\n\n      middlewares?.onLoad?.({\n        name,\n        module,\n        loadStart,\n        loadEnd,\n        beenLoaded: isModuleLoaded(name),\n      })\n\n      if (!C) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'INVALID_MODULE',\n          originalError: new Error(`module \"${name}\" invalid`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      const defaultModule = 'default' in C ? C.default : C\n      const actualModule = !module ? defaultModule : C[module]\n\n      if (actualModule === undefined && module) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'SUBMODULE_NOT_DEFINED',\n          originalError: new Error(`submodule \"${module}\" not defined`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      resolve(actualModule)\n    }, (e: RequireError) => {\n      const [requireModule] = e.requireModules\n\n      resetDependencyConfig(name, url)\n      resetDependencyConfig(requireModule)\n\n      let errorType: VariousError['type'] = 'LOADING_ERROR'\n\n      if (requireModule !== name) {\n        errorType = 'SUBMODULE_LOADING_ERROR'\n      }\n\n      if (!e.message.includes('https://requirejs.org/docs/errors.html')) {\n        errorType = requireModule === name ? 'SCRIPT_ERROR' : 'SUBMODULE_SCRIPT_ERROR'\n      }\n\n      const error = new VariousError({\n        name,\n        module: requireModule === name ? undefined : requireModule,\n        type: errorType,\n        originalError: e,\n      })\n\n      logOnError(error)\n      reject(error)\n    })\n  })\n}\n\nexport default createModule\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import React, { Component } from 'react'\nimport {\n  ComponentDefaultProps,\n  VariousError as ve,\n  ModuleDefined,\n} from '@variousjs/various'\nimport {\n  checkReactComponent,\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  getSelfInfo,\n} from './helper'\nimport { connect, getStore, getUserStore } from './store'\nimport connector from './connector'\nimport { createPostMessage } from './message'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createI18n } from './i18n'\nimport createModule from './create-module'\nimport {\n  CreateComponentState,\n  CreateComponentProps,\n  RequiredComponent,\n  Store,\n} from '../types'\n\nfunction reactComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  class R extends Component<\n    CreateComponentProps<P> & ComponentDefaultProps,\n    CreateComponentState\n  > {\n    static displayName = 'various-react-component'\n\n    state = {\n      componentReady: false,\n      isError: false,\n    }\n\n    private error?: ve | Error\n\n    private ComponentNode: RequiredComponent | null\n\n    private isUnMounted?: boolean\n\n    private unSubscribeMessage = () => null as unknown\n\n    componentDidMount() {\n      this.isUnMounted = false // fix StrictMode\n      this.mountComponent()\n    }\n\n    componentWillUnmount() {\n      this.error = undefined\n      this.ComponentNode = null\n      this.isUnMounted = true\n      this.unSubscribeMessage()\n      updateUnMountComponent({ name, module })\n    }\n\n    mountComponent = async () => {\n      try {\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (this.isUnMounted) {\n          return\n        }\n\n        await checkReactComponent(componentNode, { name, module })\n\n        componentNode.displayName = getNameWithModule({ name, module })\n\n        updateMountedComponent({ name, module })\n\n        this.unSubscribeMessage = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          i18nUpdate: () => this.forceUpdate(),\n        })\n\n        this.ComponentNode = componentNode\n        this.setState({ componentReady: true })\n\n        onMounted?.()\n      } catch (e) {\n        if (this.isUnMounted) {\n          return\n        }\n\n        this.error = e as Error\n        this.setState({ componentReady: true, isError: true })\n      }\n    }\n\n    $postMessage = createPostMessage({ name, module })\n\n    $dispatch = createDispatch({ name, module })\n\n    $t = createI18n({ name, module }, () => this.forceUpdate())\n\n    $logger = createLogger({ name, module })\n\n    $self = getSelfInfo({ name, module, url })\n\n    render() {\n      const Fallback = connector.getFallbackComponent()\n      const { $silent, $componentProps, $ref } = this.props\n      const { componentReady, isError } = this.state\n      const store = getUserStore()\n      const ComponentNode = this.ComponentNode as RequiredComponent\n\n      if (isError) {\n        throw this.error\n      }\n\n      if (!componentReady) {\n        if ($silent || isModuleLoaded(name)) {\n          return null\n        }\n\n        return (\n          <Fallback\n            $self={this.$self}\n            $store={store as Store}\n          />\n        )\n      }\n\n      return (\n        <ComponentNode\n          {...$componentProps}\n          $self={this.$self}\n          $dispatch={this.$dispatch}\n          $store={store}\n          $postMessage={this.$postMessage}\n          $t={this.$t}\n          $logger={this.$logger}\n          ref={$ref}\n        />\n      )\n    }\n  }\n\n  const Connected = connect(...storeKeys)(R)\n  Connected.displayName = 'various-connector'\n\n  return Connected\n}\n\nexport default reactComponent\n","import React, {\n  FC,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport Vue, { ComponentPublicInstance } from 'vue'\nimport {\n  ComponentDefaultProps,\n  ModuleDefined,\n  VariousError as ve,\n  ObjectRecord,\n} from '@variousjs/various'\nimport connector from './connector'\nimport createModule from './create-module'\nimport { getStore, useStore } from './store'\nimport {\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  checkVueComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  VariousError,\n  getSelfInfo,\n  getClassNameWithModule,\n} from './helper'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createPostMessage } from './message'\nimport { CreateComponentProps, RequiredComponent } from '../types'\nimport { createI18n } from './i18n'\n\nfunction vueComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  const V: FC<CreateComponentProps<P> & ComponentDefaultProps> = (props) => {\n    const store = useStore(...storeKeys)\n\n    const vueRef = useRef<typeof Vue>()\n    const vmRef = useRef<ComponentPublicInstance>()\n    const isVueMounted = useRef(false)\n    const errorRef = useRef<Error | ve>()\n    const isUnMountedRef = useRef(false)\n    const ComponentNodeRef = useRef<RequiredComponent>()\n    const selfRef = useRef(getSelfInfo({ name, module, url }))\n\n    const containerDivRef = useRef<HTMLDivElement | null>(null)\n    const propsReactiveRef = useRef<{ value: ObjectRecord }>()\n    const storeReactiveRef = useRef<{ value: ObjectRecord }>()\n    const unMountVue = useRef<() => void>()\n    const unSubscribeMessageRef = useRef<() => void>()\n    const updateVueComponentRef = useRef<() => void>()\n\n    const [componentReady, setComponentReady] = useState(false)\n    const [isError, setIsError] = useState(false)\n\n    const Fallback = connector.getFallbackComponent()\n    const { $silent, $componentProps } = props\n\n    const mountVue = useCallback(() => {\n      const $logger = createLogger({ name, module })\n      const $dispatch = createDispatch({ name, module })\n      const $postMessage = createPostMessage({ name, module })\n      const $t = createI18n({ name, module }, () => {\n        updateVueComponentRef.current?.()\n      })\n\n      propsReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...$componentProps })\n      storeReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...store })\n\n      const vueApp = vueRef.current!.createApp({\n        setup() {\n          const renderKey = vueRef.current!.ref(0)\n          updateVueComponentRef.current = () => {\n            renderKey.value += 1\n          }\n          return {\n            key: renderKey,\n          }\n        },\n\n        errorCaptured(e) {\n          const error = e as Error\n          errorRef.current = error.message?.includes('https://react')\n            ? new VariousError({\n              originalError: new Error('not a valid Vue component'),\n              name,\n              module,\n              type: 'INVALID_COMPONENT',\n            })\n            : error\n          setIsError(true)\n        },\n\n        render() {\n          return vueRef.current!.h(ComponentNodeRef.current as any, {\n            ...propsReactiveRef.current!.value,\n            various: {\n              $dispatch,\n              $logger,\n              $postMessage,\n              $t,\n              $store: storeReactiveRef.current!.value,\n              $self: selfRef.current,\n            },\n            // eslint-disable-next-line react/no-this-in-sfc\n            key: this.key,\n          })\n        },\n      })\n\n      // fix StrictMode\n      if (!vmRef.current) {\n        vmRef.current = vueApp.mount(containerDivRef.current!)\n      }\n\n      isVueMounted.current = true\n      unMountVue.current = () => vueApp.unmount()\n    }, [$componentProps, store])\n\n    const mountComponent = useCallback(async () => {\n      try {\n        const vue = await createModule<typeof Vue>({ name: 'vue' })\n        vueRef.current = vue\n\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        await checkVueComponent(componentNode, { name, module })\n\n        updateMountedComponent({ name, module })\n\n        unSubscribeMessageRef.current = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          type: 'vue3',\n          i18nUpdate() {\n            updateVueComponentRef.current?.()\n          },\n        })\n\n        ComponentNodeRef.current = componentNode\n\n        setTimeout(mountVue)\n        setComponentReady(true)\n\n        onMounted?.()\n      } catch (e) {\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        errorRef.current = e as Error\n        setComponentReady(true)\n        setIsError(true)\n      }\n    }, [mountVue])\n\n    useEffect(() => {\n      // fix StrictMode\n      isUnMountedRef.current = false\n\n      return () => {\n        errorRef.current = undefined\n        ComponentNodeRef.current = undefined\n        isUnMountedRef.current = true\n        updateUnMountComponent({ name, module })\n        unMountVue.current?.()\n        unSubscribeMessageRef.current?.()\n        isVueMounted.current = false\n      }\n    }, [])\n\n    useEffect(() => {\n      if (isVueMounted.current) {\n        return\n      }\n      mountComponent()\n    }, [mountComponent])\n\n    useEffect(() => {\n      if (propsReactiveRef.current) {\n        propsReactiveRef.current.value = { ...$componentProps }\n      }\n    }, [$componentProps])\n\n    useEffect(() => {\n      if (storeReactiveRef.current) {\n        storeReactiveRef.current.value = { ...store }\n      }\n    }, [store])\n\n    if (isError) {\n      throw errorRef.current\n    }\n\n    return (\n      <>\n        {\n          !componentReady && !$silent && !isModuleLoaded(name)\n            ? (\n              <Fallback\n                $self={selfRef.current}\n                $store={store}\n              />\n            )\n            : null\n        }\n        <div\n          className={getClassNameWithModule({ name, module }, 'various-vue-component')}\n          ref={containerDivRef}\n        />\n      </>\n    )\n  }\n\n  V.displayName = getNameWithModule({ name, module })\n\n  const VueComponent: FC<\n    CreateComponentProps<P> & ComponentDefaultProps\n  > = (props) => (<V {...props} />)\n\n  VueComponent.displayName = 'various-vue-component'\n\n  return VueComponent\n}\n\nexport default vueComponent\n","import React from 'react'\nimport { createComponent as cc, ComponentDefaultProps } from '@variousjs/various'\nimport createReactComponent from './react-component'\nimport createVueComponent from './vue-component'\nimport ErrorBoundary from './error-boundary'\nimport { CreateComponentProps } from '../types'\n\nconst createComponent: typeof cc<any, any> = (config, storeKeys) => {\n  const {\n    name,\n    module,\n    url,\n    type = 'react',\n  } = config\n\n  const C = (type === 'vue3' ? createVueComponent : createReactComponent)({\n    name,\n    module,\n    url,\n    watchKeys: storeKeys as string[],\n  })\n\n  const component = (props: ComponentDefaultProps) => {\n    const { $silent, $ref, ...rest } = props || {}\n    const nextProps = {\n      $componentProps: rest, $silent, $ref,\n    } as ComponentDefaultProps & CreateComponentProps<any>\n    return (\n      <ErrorBoundary name={name} module={module} url={url}>\n        <C {...nextProps} />\n      </ErrorBoundary>\n    )\n  }\n\n  component.displayName = 'various-creator'\n  return component\n}\n\nexport default createComponent\n","import React from 'react'\nimport reactDom from 'react-dom/client'\nimport { renderComponent as rc } from '@variousjs/various'\nimport createReactComponent from './react-component'\nimport createVueComponent from './vue-component'\nimport { onError, VariousError } from './helper'\nimport ErrorBoundary from './error-boundary'\nimport createModule from './create-module'\n\nconst renderComponent: typeof rc = async ({\n  name,\n  module,\n  url,\n  target,\n  props,\n  type = 'react',\n  renderNode,\n  onMounted,\n}) => {\n  try {\n    const ReactDOM = await createModule<typeof reactDom>({ name: 'react-dom' })\n\n    const C = (type === 'vue3' ? createVueComponent : createReactComponent)({\n      name,\n      module,\n      url,\n      onMounted,\n    })\n\n    const root = ReactDOM.createRoot(target as Element)\n    const { $silent, $ref, ...rest } = props || {}\n    const nextProps: any = { $componentProps: rest, $silent, $ref }\n    const node = (\n      <ErrorBoundary name={name} module={module} url={url}>\n        <C {...nextProps} />\n      </ErrorBoundary>\n    )\n\n    root.render(renderNode ? renderNode(node) : node)\n\n    return () => new Promise<void>((resolve) => {\n      setTimeout(() => {\n        root.unmount()\n        resolve()\n      })\n    })\n  } catch (e) {\n    const error = new VariousError({\n      name,\n      module,\n      type: 'SCRIPT_ERROR',\n      originalError: e as Error,\n    })\n    onError(error)\n    return () => Promise.resolve()\n  }\n}\n\nexport default renderComponent\n","import React, { Component } from 'react'\nimport { App, Config } from '@variousjs/various'\nimport { createStore } from './store'\nimport {\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  MESSAGE_KEY,\n  CONFIG_KEY,\n} from './config'\nimport connector from './connector'\nimport { createI18nConfig } from './i18n'\nimport { Root as RootComponent } from './default-component'\nimport ErrorBoundary from './error-boundary'\nimport { Store } from '../types'\n\nexport { default as Nycticorax } from 'nycticorax'\n\nexport { getUserStore as getStore } from './store'\nexport { default as createDispatch } from './dispatch'\nexport { createPostMessage } from './message'\nexport { default as createLogger } from './logger'\n\nexport {\n  getConfig,\n  preloadModules,\n  isModuleLoaded,\n  getMountedComponents,\n  onComponentMounted,\n  defineDependencies,\n  removeLoadedModules,\n} from './helper'\n\nexport { default as createModule } from './create-module'\nexport { default as createComponent } from './create-component'\nexport { default as renderComponent } from './render-component'\n\n// eslint-disable-next-line no-undef\nexport const version = VERSION\n\nexport const getApp = (config: Config & App<Store>) => {\n  const {\n    dependencies,\n    store = {},\n    actions = {},\n    Fallback,\n    ErrorFallback,\n    Root = RootComponent,\n    middlewares,\n    i18n,\n    ...rest\n  } = config\n\n  if (middlewares) {\n    connector.setMiddlewares(middlewares)\n  }\n\n  connector.setStoreActions(actions)\n\n  if (Fallback) {\n    connector.setFallbackComponent(Fallback)\n  }\n  if (ErrorFallback) {\n    connector.setErrorFallbackComponent(ErrorFallback)\n  }\n\n  createStore({\n    ...store,\n    [MOUNTED_COMPONENTS_KEY]: [],\n    [CONFIG_KEY]: rest,\n    [DEPENDENCIES_KEY]: dependencies,\n    [MESSAGE_KEY]: null,\n  })\n\n  Root.displayName = 'various-app-root'\n\n  return class extends Component {\n    static displayName = 'various-app'\n\n    componentDidMount() {\n      createI18nConfig(i18n)\n    }\n\n    render() {\n      return (\n        <ErrorBoundary name=\"app\" url={dependencies.app}>\n          <Root />\n        </ErrorBoundary>\n      )\n    }\n  }\n}\n"],"names":["e","self","t","exports","r","constructor","o","s","n","Array","isArray","length","RegExp","source","flags","valueOf","Object","prototype","toString","keys","hasOwnProperty","call","i","d","default","u","WeakMap","has","get","set","Reflect","ownKeys","A","this","listeners","reduce","state","forEach","push","filter","emits","trigger","clearTimeout","timer","setTimeout","getStore","emit","c","key","newValue","oldValue","onStateChange","onChange","Symbol","iterator","toPrimitive","TypeError","String","defineProperty","value","enumerable","configurable","writable","__esModule","a","l","f","super","subscribe","Component","props","unsubscribe","setState","componentWillUnmount","render","createElement","includes","getOwnPropertyDescriptor","useState","useLayoutEffect","module","__WEBPACK_EXTERNAL_MODULE__959__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","obj","prop","toStringTag","createStore","connect","dispatch","useStore","Nycticorax","getUserStore","globalStore","store","MOUNTED_COMPONENTS_KEY","MESSAGE_KEY","CONFIG_KEY","DEPENDENCIES_KEY","VUE_FUNCTION_OPTIONS","BASE_DEPENDENCIES","logger","args","middlewares","connector","getMiddlewares","canLog","onLog","color","info","warn","error","level","params","getNameWithModule","type","window","console","message","moduleDefined","VariousError","originalError","Error","onError","createPostMessage","async","event","createLogger","next","onMessage","check","timestamp","Date","createI18nConfig","method","callback","i18nConfig","then","setI18nConfig","loading","lngStoreKey","resources","setGlobalI18nConfig","res","locale","catch","name","createI18n","updater","ctx","defaultString","getI18nConfig","getGlobalI18nConfig","defaultText","resource","text","arg","regex","replace","update","config","getUrlHash","url","hasModule","modules","some","preloadModules","names","Promise","resolve","reject","requirejs","removeLoadedModules","undef","defineDependencies","deps","dependencies","paths","isModuleLoaded","defined","getMountedComponents","onComponentMounted","every","m","unSubscribe","mountedModules","resetDependencyConfig","path","getConfig","data","parseComponentActions","componentNode","i18nUpdate","actions","onMessageAction","i18nAction","getOwnPropertyNames","setComponentActions","v","createOnMessage","updateMountedComponent","mountedComponents","updateUnMountComponent","item","deleteComponentActions","getSelfInfo","getClassNameWithModule","prefix","Boolean","join","Fallback","className","$self","React","ErrorFallback","$error","$reload","onClick","Root","fallbackComponent","errorFallbackComponent","storeActions","componentActions","i18nConfigs","setMiddlewares","globalI18nConfig","getComponentActions","setStoreActions","getStoreActions","setFallbackComponent","getFallbackComponent","setErrorFallbackComponent","getErrorFallbackComponent","ErrorBoundary","static","hasError","componentDidCatch","reload","ErrorFallbackNode","$store","children","action","onDispatch","target","storeAction","errorMessage","componentAction","createModule","logError","loadStart","logOnError","specified","isModuleSpecified","C","loadEnd","onLoad","beenLoaded","defaultModule","actualModule","requireModule","requireModules","errorType","_extends","assign","bind","arguments","apply","watchKeys","onMounted","storeKeys","R","componentReady","isError","unSubscribeMessage","componentDidMount","isUnMounted","mountComponent","ComponentNode","component","reslove","$$typeof","isReactComponent","displayName","forceUpdate","$postMessage","$dispatch","createDispatch","$t","$logger","$silent","$componentProps","$ref","ref","Connected","V","vueRef","useRef","vmRef","isVueMounted","errorRef","isUnMountedRef","ComponentNodeRef","selfRef","containerDivRef","propsReactiveRef","storeReactiveRef","unMountVue","unSubscribeMessageRef","updateVueComponentRef","setComponentReady","setIsError","mountVue","useCallback","current","vueApp","createApp","setup","renderKey","errorCaptured","h","various","mount","unmount","vue","versionRegex","Vue","test","version","checkVueComponent","useEffect","VueComponent","createComponent","createVueComponent","createReactComponent","rest","nextProps","renderNode","ReactDOM","root","createRoot","node","VERSION","getApp","RootComponent","i18n","app"],"ignoreList":[],"sourceRoot":""}