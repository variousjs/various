{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@variousjs/various/external amd \"react-dom/client\"","webpack://@variousjs/various/./node_modules/nycticorax/dist/index.js","webpack://@variousjs/various/external amd \"react\"","webpack://@variousjs/various/webpack/bootstrap","webpack://@variousjs/various/webpack/runtime/compat get default export","webpack://@variousjs/various/webpack/runtime/define property getters","webpack://@variousjs/various/webpack/runtime/hasOwnProperty shorthand","webpack://@variousjs/various/webpack/runtime/make namespace object","webpack://@variousjs/various/./src/core/store.ts","webpack://@variousjs/various/./src/core/config.ts","webpack://@variousjs/various/./src/core/default-component.tsx","webpack://@variousjs/various/./src/core/logger.ts","webpack://@variousjs/various/./src/core/message.ts","webpack://@variousjs/various/./src/core/i18n.ts","webpack://@variousjs/various/./src/core/helper.ts","webpack://@variousjs/various/./src/core/connector.ts","webpack://@variousjs/various/./src/core/error-boundary.tsx","webpack://@variousjs/various/./src/core/dispatch.ts","webpack://@variousjs/various/./src/core/create-module.ts","webpack://@variousjs/various/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@variousjs/various/./src/core/react-component.tsx","webpack://@variousjs/various/./src/core/vue-component.tsx","webpack://@variousjs/various/./src/core/create-component.tsx","webpack://@variousjs/various/./src/core/render-component.tsx","webpack://@variousjs/various/./src/core/index.tsx"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__216__;","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"react\")):\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Nycticorax=e(require(\"react\")):t.Nycticorax=e(t.React)}(self,(t=>(()=>{\"use strict\";var e={294:(t,e,r)=>{r.d(e,{default:()=>c});var s=r(942),o=r(63),n=r.n(o);function i(t,e=new WeakMap){if(\"object\"!=typeof t||null===t)return t;if(e.has(t))return e.get(t);const r=Array.isArray(t)?[]:{};e.set(t,r);const s=Reflect.ownKeys(t);for(const o of s)r[o]=i(t[o],e);return r}class c{constructor(){var t;(0,s.Z)(this,\"state\",void 0),(0,s.Z)(this,\"listeners\",void 0),(0,s.Z)(this,\"emits\",void 0),(0,s.Z)(this,\"timer\",void 0),(0,s.Z)(this,\"onStateChange\",void 0),(0,s.Z)(this,\"getStore\",void 0),(0,s.Z)(this,\"createStore\",(t=>{this.listeners=Reflect.ownKeys(t).reduce(((e,r)=>{const s=r;return this.state[s]=t[s],{...e,[r]:[]}}),{})})),(0,s.Z)(this,\"subscribe\",(t=>{const e={};return Reflect.ownKeys(t).forEach((r=>{const s=r;this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(t[s]),e[s]=t[s]})),()=>{Reflect.ownKeys(e).forEach((t=>{const r=t;this.listeners[r]=this.listeners[r].filter((t=>t!==e[r]))}))}})),(0,s.Z)(this,\"emit\",((t,e)=>{this.emits={...this.emits,...t},e?this.trigger():(clearTimeout(this.timer),this.timer=setTimeout(this.trigger))})),(0,s.Z)(this,\"dispatch\",((t,...e)=>t({getStore:this.getStore,emit:t=>this.emit(t,!0)},...e))),(0,s.Z)(this,\"trigger\",(()=>{const t=this.emits,e=[],r=Reflect.ownKeys(t);for(let s=0;s<r.length;s+=1){const o=r[s];if(n()(this.state[o],t[o]))continue;const c=t[o],u=this.state[o];this.state[o]=i(t[o]),e.push({key:o,newValue:c,oldValue:u})}const s={};e.forEach((t=>{s[t.key]=[t.newValue,t.oldValue],this.listeners[t.key]&&this.listeners[t.key].forEach((e=>e(t.newValue,t.oldValue)))})),e.length&&this.onStateChange(s),this.emits={},this.timer=void 0})),this.state={},this.listeners={},this.emits={},this.timer=void 0,this.onStateChange=()=>null,this.getStore=(t=this.state,function(e){return e?i(t[e]):t})}set onChange(t){this.onStateChange=t}}},63:t=>{t.exports=function t(e,r){if(e===r)return!0;if(e&&r&&\"object\"==typeof e&&\"object\"==typeof r){if(e.constructor!==r.constructor)return!1;var s,o,n;if(Array.isArray(e)){if((s=e.length)!=r.length)return!1;for(o=s;0!=o--;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((s=(n=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,n[o]))return!1;for(o=s;0!=o--;){var i=n[o];if(!t(e[i],r[i]))return!1}return!0}return e!=e&&r!=r}},250:e=>{e.exports=t},942:(t,e,r)=>{function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:()=>s})}},r={};function s(t){var o=r[t];if(void 0!==o)return o.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,s),n.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o={};return(()=>{s.d(o,{default:()=>u});var t=s(942),e=s(294),r=s(250),n=s.n(r);const i=[\"name\",\"prototype\",\"length\",\"propTypes\",\"defaultProps\",\"getDerivedStateFromProps\",\"contextTypes\",\"displayName\"];class c extends e.default{constructor(...e){super(...e),(0,t.Z)(this,\"connect\",function(e){const{getStore:s,subscribe:o}=e;return function(...e){return function(c){class u extends r.Component{constructor(r){super(r),(0,t.Z)(this,\"unsubscribe\",void 0),(0,t.Z)(this,\"state\",{props:s()}),this.unsubscribe=o(e.reduce(((t,e)=>({...t,[e]:()=>{this.setState({props:s()})}})),{}))}componentWillUnmount(){this.unsubscribe()}render(){const{props:t}=this.state,e={...t,...this.props};return n().createElement(c,e)}}return Object.getOwnPropertyNames(c).forEach((t=>{const e=t;i.includes(t)||(u[e]=c[e])})),u}}}(this)),(0,t.Z)(this,\"useStore\",function(t){const{getStore:e,subscribe:s}=t;return function(...t){const[o,n]=(0,r.useState)(e());return(0,r.useLayoutEffect)((()=>s(t.reduce(((t,r)=>({...t,[r]:()=>{n((t=>({...t,[r]:e()[r]})))}})),{})))),o}}(this))}}const u=c})(),o.default})()));\n//# sourceMappingURL=index.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Nycticorax from 'nycticorax'\nimport { Store } from '../types'\n\nexport const {\n  createStore,\n  getStore,\n  connect,\n  emit,\n  subscribe,\n  dispatch,\n  useStore,\n} = new Nycticorax<Store>()\n\nexport function getUserStore<S extends object = {}>() {\n  const globalStore = getStore()\n  const keys = Object.keys(globalStore)\n  const store: Record<string, any> = {}\n\n  keys.forEach((key) => {\n    store[key] = globalStore[key]\n  })\n\n  return store as S\n}\n","export const MOUNTED_COMPONENTS_KEY = Symbol('MOUNTED_COMPONENTS')\n\nexport const MESSAGE_KEY = Symbol('MESSAGE')\n\nexport const CONFIG_KEY = Symbol('CONFIG')\n\nexport const DEPENDENCIES_KEY = Symbol('DEPENDENCIES')\n\nexport const ROOT = '#root'\n\nexport const VUE_FUNCTION_OPTIONS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeUnmount',\n  'unmounted',\n  'errorCaptured',\n  'renderTracked',\n  'renderTriggered',\n  'activated',\n  'deactivated',\n  'setup',\n  'data',\n  'render',\n]\n\nexport const VUE_VERSION = 3\n\nexport const BASE_DEPENDENCIES = [\n  'react',\n  'react-dom',\n  '@variousjs/various',\n  'app',\n]\n","import React, { ComponentType } from 'react'\nimport { ErrorNode, LoaderNode } from '@variousjs/various'\nimport { Store } from '../types'\n\nexport const Loader: LoaderNode<Store> = () => (\n  <div>Loading</div>\n)\n\nexport const Error: ErrorNode<Store> = ({ $error, $reload }) => (\n  <>\n    <div>{`[${$error.type}] ${$error.message}`}</div>\n    <button\n      type=\"button\"\n      onClick={$reload}\n    >\n      Reload\n    </button>\n  </>\n)\n\nexport const Container: ComponentType = () => (\n  <div>App Container is not defined</div>\n)\n","import { createLogger as cl, LogEvent } from '@variousjs/various'\nimport connector from './connector'\nimport { getNameWithModule, VariousError } from './helper'\n\ntype LogArgs = Parameters<LogEvent>[0]\ntype LogLevel = LogArgs['level']\n\nconst logger = (args: LogArgs) => {\n  const middlewares = connector.getMiddlewares()\n  const canLog = middlewares?.onLog?.(args)\n\n  if (canLog === false) {\n    return\n  }\n\n  const colorMap: Record<LogLevel, string> = {\n    info: 'blue',\n    warn: 'orange',\n    error: 'red',\n  }\n  const color = colorMap[args.level]\n\n  const params = [\n    `%c ${getNameWithModule(args)} `,\n    `background:${color};border:1px solid ${color};padding:1px;border-radius:2px 0 0 2px;color: #fff;`,\n  ]\n\n  if (args.type) {\n    params[0] = `${params[0]}%c ${args.type} %c`\n    params.push(\n      `border:1px solid ${color};padding:1px;border-radius:0 2px 2px 0;color:${color};`,\n      'background:transparent',\n    )\n  }\n\n  if (args.level !== 'info') {\n    params[0] = ` ${params[0]}`\n  }\n\n  window.console[args.level](...params, args.message)\n}\n\nconst createLogger: typeof cl = (moduleDefined) => ({\n  info(message, type) {\n    logger({\n      ...moduleDefined, level: 'info', type, message,\n    })\n  },\n  warn(message, type) {\n    logger({\n      ...moduleDefined, level: 'warn', type, message,\n    })\n  },\n  error(message, type) {\n    const middlewares = connector.getMiddlewares()\n    const error = message instanceof VariousError\n      ? message\n      : new VariousError({\n        ...moduleDefined,\n        type: type || 'unknow',\n        originalError: message instanceof Error ? message : new Error(message),\n      })\n\n    middlewares?.onError?.(error)\n\n    logger({\n      ...moduleDefined, level: 'error', type, message,\n    })\n  },\n})\n\nexport default createLogger\n","import { ModuleDefined, OnMessage, createPostMessage as cpm } from '@variousjs/various'\nimport connector from './connector'\nimport createLogger from './logger'\nimport { emit, subscribe } from './store'\nimport { MESSAGE_KEY } from './config'\n\nexport const createPostMessage: typeof cpm = (moduleDefined) => async (event, value) => {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let next = { trigger: moduleDefined, event, value }\n\n  if (middlewares?.onMessage) {\n    const check = await middlewares.onMessage(next)\n\n    if (check === false) {\n      logger.warn('blocked by middleware', 'POST_MESSAGE')\n      return\n    }\n\n    if (check !== true) {\n      next = { ...next, ...check }\n    }\n  }\n\n  emit({\n    [MESSAGE_KEY]: {\n      timestamp: +new Date(),\n      event: next.event,\n      trigger: moduleDefined,\n      value: next.value,\n    },\n  })\n}\n\nexport const createOnMessage = (moduleDefined: ModuleDefined, onMessage: OnMessage) => subscribe({\n  [MESSAGE_KEY](v) {\n    const { trigger, value, event } = v as Parameters<OnMessage>[0]\n    if (moduleDefined.name !== trigger.name || moduleDefined.module !== trigger.module) {\n      onMessage({ event, value, trigger })\n    }\n  },\n})\n","import {\n  Intl,\n  ModuleDefined,\n  I18n,\n  I18nConfig,\n} from '@variousjs/various'\nimport connector from './connector'\nimport { VariousError, onError, isPromiseLike } from './helper'\nimport { getStore, emit } from './store'\n\nexport function createI18nConfig(\n  method?: I18n,\n  moduleDefined?: ModuleDefined,\n  callback?: () => void,\n) {\n  if (!method) {\n    return\n  }\n\n  const i18nConfig = method()\n\n  if (!isPromiseLike(i18nConfig)) {\n    if (moduleDefined) {\n      connector.setI18nConfig(moduleDefined, i18nConfig)\n    } else {\n      connector.setGlobalI18nConfig(i18nConfig)\n    }\n    return\n  }\n\n  if (moduleDefined) {\n    connector.setI18nConfig(moduleDefined, {\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  } else {\n    connector.setGlobalI18nConfig({\n      loading: true,\n      lngStoreKey: '',\n      resources: {},\n    })\n  }\n\n  i18nConfig\n    .then((res) => {\n      if (moduleDefined) {\n        connector.setI18nConfig(moduleDefined, { ...res, loading: false })\n        callback?.()\n        return\n      }\n\n      const locale = getStore(res.lngStoreKey)\n\n      emit({ [res.lngStoreKey]: undefined }, true)\n      emit({ [res.lngStoreKey]: locale }, true)\n      connector.setGlobalI18nConfig({ ...res, loading: false })\n    })\n    .catch((e: Error) => {\n      onError(new VariousError({\n        name: moduleDefined?.name || 'app',\n        module: moduleDefined?.module,\n        type: 'I18N',\n        originalError: e,\n      }))\n    })\n}\n\nexport function createI18n(\n  moduleDefined: ModuleDefined,\n  updater: () => void,\n) {\n  const ctx: Intl = (key, params, defaultString) => {\n    const i18nConfig = connector.getI18nConfig(moduleDefined) || connector.getGlobalI18nConfig()\n\n    let defaultText = defaultString\n    if (defaultText === undefined) {\n      defaultText = typeof params === 'string' ? params : key\n    }\n\n    if (!i18nConfig) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('config not exist'),\n      }))\n      return defaultText\n    }\n\n    if (i18nConfig.loading) {\n      return defaultText\n    }\n\n    const { lngStoreKey, resources } = i18nConfig\n    const locale: string | undefined = getStore(lngStoreKey)\n\n    if (lngStoreKey === undefined || locale === undefined) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error('locale key not defined'),\n      }))\n      return defaultText\n    }\n\n    const resource = resources?.[locale]\n\n    if (!resource) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale resource \\`${locale}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    if (!resource[key]) {\n      onError(new VariousError({\n        ...moduleDefined,\n        type: 'I18N',\n        originalError: new Error(`locale key \\`${key}\\` not exist`),\n      }))\n      return defaultText\n    }\n\n    const text = resource[key]\n\n    if (!params || typeof params === 'string' || Object.prototype.toString.call(params) !== '[object Object]') {\n      return text\n    }\n\n    const args = Object.keys(params)\n\n    if (!args.length) {\n      return text\n    }\n\n    return args.reduce((next, arg) => {\n      const regex = new RegExp(`{\\\\s*${arg}\\\\s*}`, 'g')\n      return next.replace(regex, params[arg].toString())\n    }, text)\n  }\n\n  ctx.update = (config, type) => {\n    const i18nConfig = type === 'app'\n      ? connector.getGlobalI18nConfig()\n      : connector.getI18nConfig(moduleDefined)\n    const next = { ...i18nConfig, ...config } as I18nConfig\n\n    if (type === 'app') {\n      connector.setGlobalI18nConfig(next)\n    } else {\n      connector.setI18nConfig(moduleDefined, next)\n    }\n\n    updater()\n  }\n\n  return ctx\n}\n","import {\n  onComponentMounted as ocm,\n  isModuleLoaded as im,\n  preloadModules as pp,\n  removeLoadedModules as rm,\n  defineDependencies as dd,\n  VariousError as ve,\n  ErrorType as et,\n  ModuleDefined,\n  OnMessage,\n  I18n,\n  VariousComponentType,\n} from '@variousjs/various'\nimport { getStore, subscribe, emit } from './store'\nimport createLogger from './logger'\nimport {\n  CONFIG_KEY,\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  VUE_VERSION,\n  VUE_FUNCTION_OPTIONS,\n  BASE_DEPENDENCIES,\n} from './config'\nimport { PublicActions, RequiredComponent } from '../types'\nimport connector from './connector'\nimport { createOnMessage } from './message'\nimport { createI18nConfig } from './i18n'\n\nconst getUrlHash = (url: string) => `${url}?${+new Date()}`\n\nconst hasModule = (modules: ModuleDefined[], module: ModuleDefined) => modules\n  .some((c) => c.name === module.name && c.module === module.module)\n\nexport const preloadModules: typeof pp = (names) => new Promise<void>((resolve, reject) => {\n  window.requirejs(names, resolve, reject)\n})\n\nexport const removeLoadedModules: typeof rm = (names) => {\n  names.forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      window.requirejs.undef(name)\n    }\n  })\n}\n\nexport const defineDependencies: typeof dd = (deps) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const next = {} as Record<string, string>\n\n  Object.keys(deps).forEach((name) => {\n    if (!BASE_DEPENDENCIES.includes(name)) {\n      next[name] = `${deps[name]}#${name}`\n      window.requirejs.undef(name)\n    }\n  })\n\n  window.requirejs.config({ paths: next })\n  emit({ [DEPENDENCIES_KEY]: { ...dependencies, ...next } }, true)\n}\n\nexport const isModuleLoaded: typeof im = (name) => window.requirejs.specified(name)\n  && !!window.requirejs.s.contexts._.defined[name]\n\nexport const getMountedComponents = () => getStore(MOUNTED_COMPONENTS_KEY)\n\nexport const onComponentMounted: typeof ocm = (module, callback) => {\n  const modules = Array.isArray(module) ? module : [module]\n\n  if (modules.every((m) => hasModule(getMountedComponents(), m))) {\n    callback()\n  }\n\n  const unSubscribe = subscribe({\n    [MOUNTED_COMPONENTS_KEY](value) {\n      const mountedModules = value as ModuleDefined[]\n      if (modules.every((n) => hasModule(mountedModules, n))) {\n        unSubscribe()\n        callback()\n      }\n    },\n  })\n\n  return unSubscribe\n}\n\nexport const resetDependencyConfig = (name: string, url?: string) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  // ignore multiple custom module url\n  if (url && window.requirejs.defined(name)) {\n    return\n  }\n\n  let path = getUrlHash(dependencies[name])\n\n  // custom module url, but module loaded error\n  if (url) {\n    path = `${url}#${name}`\n\n    try {\n      const { registry } = window.requirejs.s.contexts._\n      if (registry?.[name].error) {\n        path = getUrlHash(url)\n      }\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  window.requirejs.undef(name)\n  window.requirejs.config({\n    paths: { [name]: path },\n  })\n}\nexport const getNameWithModule = (moduleDefined: ModuleDefined) => {\n  const { name, module } = moduleDefined\n  return module ? `${name}.${module}` : name\n}\n\nexport function getConfig<C extends object = {}>() {\n  return getStore(CONFIG_KEY) as C\n}\n\nexport const onError = (e: VariousError) => {\n  const { name, module, type } = e\n  const logger = createLogger({ name, module })\n  logger.error(e, type)\n}\n\nexport class VariousError extends Error implements ve {\n  type: et\n\n  originalError: Error\n\n  module?: string\n\n  name: string\n\n  constructor(data: {\n    name: string,\n    module?: string,\n    type: et,\n    originalError: Error,\n  }) {\n    super(data.originalError.message)\n    this.type = data.type\n    this.originalError = data.originalError\n    this.module = data.module\n    this.name = data.name\n  }\n}\n\nexport function checkReactComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  return new Promise<void>((reslove, reject) => {\n    if (component.$$typeof || component.prototype?.isReactComponent || typeof component === 'function') {\n      reslove()\n      return\n    }\n\n    reject(new VariousError({\n      ...moduleDefined,\n      originalError: new Error('not a valid React component'),\n      type: 'INVALID_COMPONENT',\n    }))\n  })\n}\n\nexport function isPromiseLike<T>(value: T | PromiseLike<T>): value is PromiseLike<T> {\n  return value != null && typeof (value as any).then === 'function'\n}\n\nexport function checkVueComponent(component: RequiredComponent, moduleDefined: ModuleDefined) {\n  const versionRegex = new RegExp(`^${VUE_VERSION}\\\\.`)\n\n  return new Promise<void>((resolve, reject) => {\n    window.requirejs(['vue'], (Vue: { version: string }) => {\n      if (!versionRegex.test(Vue.version)) {\n        reject(new Error(`Vue ${VUE_VERSION}+ required, detected an incompatible version`))\n      }\n\n      if (typeof component?.render === 'function' || typeof component?.setup === 'function') {\n        resolve()\n        return\n      }\n\n      reject(new VariousError({\n        ...moduleDefined,\n        originalError: new Error('not a valid Vue component'),\n        type: 'INVALID_COMPONENT',\n      }))\n    })\n  })\n}\n\nexport function parseComponentActions(params: ModuleDefined & {\n  componentNode: RequiredComponent,\n  type?: VariousComponentType,\n  i18nUpdate: () => void,\n}) {\n  const {\n    componentNode,\n    name,\n    module,\n    type,\n    i18nUpdate,\n  } = params\n\n  const actions: PublicActions = {}\n  let onMessageAction: OnMessage | undefined\n  let i18nAction: I18n | undefined\n\n  Object\n    .getOwnPropertyNames(componentNode)\n    .forEach((method) => {\n      if (typeof componentNode[method] !== 'function') {\n        return\n      }\n      if (method === '$onMessage') {\n        onMessageAction = componentNode[method]\n        return\n      }\n      if (method === '$i18n') {\n        i18nAction = componentNode[method]\n        return\n      }\n      if (type === 'vue3' && VUE_FUNCTION_OPTIONS.includes(method)) {\n        return\n      }\n\n      actions[method] = componentNode[method]\n    })\n\n  if (i18nAction) {\n    createI18nConfig(i18nAction, { name, module }, i18nUpdate)\n  }\n\n  connector.setComponentActions({ name, module }, actions)\n\n  if (onMessageAction) {\n    return createOnMessage({ name, module }, onMessageAction)\n  }\n\n  return () => null\n}\n\nexport function updateMountedComponent(moduleDefined: ModuleDefined) {\n  const mountedComponents = getMountedComponents()\n\n  if (!hasModule(mountedComponents, moduleDefined)) {\n    mountedComponents.push(moduleDefined)\n  }\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n}\n\nexport function updateUnMountComponent(moduleDefined: ModuleDefined) {\n  const { name, module } = moduleDefined\n  let mountedComponents = getMountedComponents()\n\n  mountedComponents = mountedComponents\n    .filter((item) => item.name !== name || item.module !== module)\n\n  emit({ [MOUNTED_COMPONENTS_KEY]: mountedComponents }, true)\n  connector.deleteComponentActions({ name, module })\n}\n\nexport function getSelfInfo(params: ModuleDefined & { url?: string }) {\n  const { name, module, url } = params\n  const dependencies = getStore(DEPENDENCIES_KEY)\n\n  return {\n    name,\n    module,\n    url: url || dependencies[name],\n  }\n}\n","import {\n  LoaderNode,\n  ErrorNode,\n  App,\n  ModuleDefined,\n} from '@variousjs/various'\nimport { Loader, Error } from './default-component'\nimport {\n  PublicActions,\n  Store,\n  ConnectorI18nConfig,\n  Actions,\n} from '../types'\nimport { getNameWithModule } from './helper'\n\nclass Connector {\n  private loaderComponent: LoaderNode<Store>\n\n  private errorComponent: ErrorNode<Store>\n\n  private storeActions: Actions<Store>\n\n  private componentActions: Record<string, PublicActions>\n\n  private i18nConfigs: Record<string, ConnectorI18nConfig | undefined>\n\n  private globalI18nConfig: ConnectorI18nConfig | undefined\n\n  private middlewares: App['middlewares']\n\n  constructor() {\n    this.loaderComponent = Loader\n    this.errorComponent = Error\n    this.storeActions = {}\n    this.componentActions = {}\n    this.i18nConfigs = {}\n    this.middlewares = {}\n  }\n\n  setMiddlewares(m: App['middlewares']) {\n    this.middlewares = m\n  }\n\n  getMiddlewares() {\n    return this.middlewares\n  }\n\n  setI18nConfig(moduleDefined: ModuleDefined, config: ConnectorI18nConfig) {\n    const name = getNameWithModule(moduleDefined)\n    this.i18nConfigs[name] = { ...this.i18nConfigs[name], ...config }\n  }\n\n  getI18nConfig(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.i18nConfigs[name]\n  }\n\n  setGlobalI18nConfig(config: ConnectorI18nConfig) {\n    this.globalI18nConfig = { ...this.globalI18nConfig, ...config }\n  }\n\n  getGlobalI18nConfig() {\n    return this.globalI18nConfig\n  }\n\n  setComponentActions(moduleDefined: ModuleDefined, actions: PublicActions) {\n    const name = getNameWithModule(moduleDefined)\n    this.componentActions[name] = actions\n  }\n\n  deleteComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    delete this.componentActions[name]\n  }\n\n  getComponentActions(moduleDefined: ModuleDefined) {\n    const name = getNameWithModule(moduleDefined)\n    return this.componentActions[name]\n  }\n\n  setStoreActions(actions: Actions<Store>) {\n    this.storeActions = actions\n  }\n\n  getStoreActions() {\n    return this.storeActions\n  }\n\n  setLoaderComponent(loaderComponent: LoaderNode<Store>) {\n    this.loaderComponent = loaderComponent\n  }\n\n  getLoaderComponent() {\n    return this.loaderComponent\n  }\n\n  setErrorComponent(errorComponent: ErrorNode<Store>) {\n    this.errorComponent = errorComponent\n  }\n\n  getErrorComponent() {\n    return this.errorComponent\n  }\n}\n\nexport default new Connector()\n","import React, { Component } from 'react'\nimport { VariousError as ve } from '@variousjs/various'\nimport {\n  onError,\n  VariousError,\n  resetDependencyConfig,\n  updateUnMountComponent,\n  getSelfInfo,\n} from './helper'\nimport connector from './connector'\nimport { ErrorBoundaryProps, Store } from '../types'\nimport { getUserStore } from './store'\n\nclass ErrorBoundary extends Component<ErrorBoundaryProps> {\n  static displayName = 'various-error-boundary'\n\n  state = {\n    hasError: false,\n  }\n\n  private error?: ve\n\n  componentDidCatch(e: Error | VariousError) {\n    const { name, module } = this.props\n    const error = e instanceof VariousError\n      ? e\n      : new VariousError({\n        name,\n        module,\n        type: name === 'app' ? 'APP_ERROR' : 'SCRIPT_ERROR',\n        originalError: e,\n      })\n\n    this.setState({ hasError: true })\n    this.error = error\n    onError(error)\n    resetDependencyConfig(this.props.name)\n    updateUnMountComponent({ name, module })\n  }\n\n  $self = getSelfInfo(this.props)\n\n  reload = () => {\n    this.error = undefined\n    this.setState({ hasError: false })\n  }\n\n  render() {\n    const ErrorNode = connector.getErrorComponent()\n    const store = getUserStore()\n\n    if (this.state.hasError) {\n      return (\n        <ErrorNode\n          $self={this.$self}\n          $reload={this.reload}\n          $store={store as Store}\n          $error={this.error!}\n        />\n      )\n    }\n\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","import { createDispatch as cd } from '@variousjs/various'\nimport connector from './connector'\nimport { dispatch } from './store'\nimport { onError, VariousError } from './helper'\nimport createLogger from './logger'\n\nconst createDispatch: typeof cd = (moduleDefined) => async function (params) {\n  const middlewares = connector.getMiddlewares()\n  const logger = createLogger(moduleDefined)\n\n  let {\n    name,\n    module,\n    action,\n    value,\n  } = params\n\n  if (middlewares?.onDispatch) {\n    const check = await middlewares.onDispatch({\n      target: { name, module },\n      action,\n      value,\n      trigger: moduleDefined,\n    })\n    if (check === false) {\n      logger.warn('blocked by middleware', 'DISPATCH')\n      return Promise.resolve()\n    }\n    if (check !== true) {\n      name = check.target.name\n      module = check.target.module\n      action = check.action\n      value = check.value\n    }\n  }\n\n  if (name === 'app') {\n    const storeActions = connector.getStoreActions()\n    const storeAction = storeActions[action]\n    if (!storeAction) {\n      const errorMessage = `action \"${action}\" is not present`\n      const error = new VariousError({\n        ...moduleDefined,\n        type: 'DISPATCH',\n        originalError: new Error(errorMessage),\n      })\n      onError(error)\n      throw error\n    }\n    return dispatch(storeAction, value, moduleDefined)\n  }\n\n  const componentActions = connector.getComponentActions({ name, module })\n\n  if (!componentActions) {\n    const errorMessage = 'component is not ready'\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  const componentAction = componentActions[action]\n\n  if (!componentAction) {\n    const errorMessage = `action \"${action}\" is not present`\n    const error = new VariousError({\n      ...moduleDefined,\n      type: 'DISPATCH',\n      originalError: new Error(errorMessage),\n    })\n    onError(error)\n    throw error\n  }\n\n  return Promise.resolve(componentAction(value, moduleDefined))\n}\n\nexport default createDispatch\n","import { createModule as cm, ObjectRecord } from '@variousjs/various'\nimport { RequireError } from '../types'\nimport { DEPENDENCIES_KEY } from './config'\nimport { getStore } from './store'\nimport connector from './connector'\nimport {\n  isModuleLoaded,\n  resetDependencyConfig,\n  VariousError,\n  onError,\n} from './helper'\n\nconst createModule: typeof cm = (config, logError = true) => {\n  const dependencies = getStore(DEPENDENCIES_KEY)\n  const middlewares = connector.getMiddlewares()\n  const { name, module, url } = config\n  const loadStart = +new Date()\n\n  const logOnError = (e: VariousError) => {\n    if (logError) {\n      onError(e)\n    }\n  }\n\n  if (url) {\n    resetDependencyConfig(name, url)\n  }\n\n  return new Promise<any>((resolve, reject) => {\n    if (!url && !dependencies[name]) {\n      const error = new VariousError({\n        name,\n        module,\n        type: 'NOT_DEFINED',\n        originalError: new Error(`module \"${name}\" not defined`),\n      })\n\n      logOnError(error)\n      reject(error)\n      return\n    }\n\n    window.requirejs([name], (C?: ObjectRecord) => {\n      const loadEnd = +new Date()\n\n      middlewares?.onLoad?.({\n        name,\n        module,\n        loadStart,\n        loadEnd,\n        beenLoaded: isModuleLoaded(name),\n      })\n\n      if (!C) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'INVALID_MODULE',\n          originalError: new Error(`module \"${name}\" invalid`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      const defaultModule = 'default' in C ? C.default : C\n      const actualModule = !module ? defaultModule : C[module]\n\n      if (actualModule === undefined && module) {\n        const error = new VariousError({\n          name,\n          module,\n          type: 'SUBMODULE_NOT_DEFINED',\n          originalError: new Error(`submodule \"${module}\" not defined`),\n        })\n\n        resetDependencyConfig(name)\n        logOnError(error)\n        reject(error)\n        return\n      }\n\n      resolve(actualModule)\n    }, (e: RequireError) => {\n      const [requireModule] = e.requireModules\n\n      resetDependencyConfig(name, url)\n      resetDependencyConfig(requireModule)\n\n      let errorType: VariousError['type'] = 'LOADING_ERROR'\n\n      if (requireModule !== name) {\n        errorType = 'SUBMODULE_LOADING_ERROR'\n      }\n\n      if (!e.message.includes('https://requirejs.org/docs/errors.html')) {\n        errorType = requireModule === name ? 'SCRIPT_ERROR' : 'SUBMODULE_SCRIPT_ERROR'\n      }\n\n      const error = new VariousError({\n        name,\n        module: requireModule === name ? undefined : requireModule,\n        type: errorType,\n        originalError: e,\n      })\n\n      logOnError(error)\n      reject(error)\n    })\n  })\n}\n\nexport default createModule\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import React, { Component } from 'react'\nimport {\n  ComponentDefaultProps,\n  VariousError as ve,\n  ModuleDefined,\n} from '@variousjs/various'\nimport {\n  checkReactComponent,\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  getSelfInfo,\n} from './helper'\nimport { connect, getStore, getUserStore } from './store'\nimport connector from './connector'\nimport { createPostMessage } from './message'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createI18n } from './i18n'\nimport createModule from './create-module'\nimport {\n  CreateComponentState,\n  CreateComponentProps,\n  RequiredComponent,\n  Store,\n} from '../types'\n\nfunction reactComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  class R extends Component<\n    CreateComponentProps<P> & ComponentDefaultProps,\n    CreateComponentState\n  > {\n    static displayName = 'various-react-component'\n\n    state = {\n      componentReady: false,\n      isError: false,\n    }\n\n    private error?: ve | Error\n\n    private ComponentNode: RequiredComponent | null\n\n    private isUnMounted?: boolean\n\n    private unSubscribeMessage = () => null as unknown\n\n    componentDidMount() {\n      this.mountComponent()\n    }\n\n    componentWillUnmount() {\n      this.error = undefined\n      this.ComponentNode = null\n      this.isUnMounted = true\n      this.unSubscribeMessage()\n      updateUnMountComponent({ name, module })\n    }\n\n    mountComponent = async () => {\n      try {\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (this.isUnMounted) {\n          return\n        }\n\n        await checkReactComponent(componentNode, { name, module })\n\n        componentNode.displayName = getNameWithModule({ name, module })\n\n        updateMountedComponent({ name, module })\n\n        this.unSubscribeMessage = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          i18nUpdate: () => this.forceUpdate(),\n        })\n\n        this.ComponentNode = componentNode\n        this.setState({ componentReady: true })\n\n        onMounted?.()\n      } catch (e) {\n        if (this.isUnMounted) {\n          return\n        }\n\n        this.error = e as Error\n        this.setState({ componentReady: true, isError: true })\n      }\n    }\n\n    $postMessage = createPostMessage({ name, module })\n\n    $dispatch = createDispatch({ name, module })\n\n    $t = createI18n({ name, module }, () => this.forceUpdate())\n\n    $logger = createLogger({ name, module })\n\n    $self = getSelfInfo({ name, module, url })\n\n    render() {\n      const LoaderNode = connector.getLoaderComponent()\n      const { $silent, $componentProps, $ref } = this.props\n      const { componentReady, isError } = this.state\n      const store = getUserStore()\n      const ComponentNode = this.ComponentNode as RequiredComponent\n\n      if (isError) {\n        throw this.error\n      }\n\n      if (!componentReady) {\n        if ($silent || isModuleLoaded(name)) {\n          return null\n        }\n\n        return (\n          <LoaderNode\n            $self={this.$self}\n            $store={store as Store}\n          />\n        )\n      }\n\n      return (\n        <ComponentNode\n          {...$componentProps}\n          $self={this.$self}\n          $dispatch={this.$dispatch}\n          $store={store}\n          $postMessage={this.$postMessage}\n          $t={this.$t}\n          $logger={this.$logger}\n          ref={$ref}\n        />\n      )\n    }\n  }\n\n  const Connected = connect(...storeKeys)(R)\n  Connected.displayName = 'various-connector'\n\n  return Connected\n}\n\nexport default reactComponent\n","import React, {\n  FC,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport Vue from 'vue'\nimport {\n  ComponentDefaultProps,\n  ModuleDefined,\n  VariousError as ve,\n  ObjectRecord,\n} from '@variousjs/various'\nimport connector from './connector'\nimport createModule from './create-module'\nimport { getStore, useStore } from './store'\nimport {\n  getNameWithModule,\n  updateUnMountComponent,\n  updateMountedComponent,\n  checkVueComponent,\n  parseComponentActions,\n  isModuleLoaded,\n  VariousError,\n  getSelfInfo,\n} from './helper'\nimport createDispatch from './dispatch'\nimport createLogger from './logger'\nimport { createPostMessage } from './message'\nimport { CreateComponentProps, RequiredComponent } from '../types'\nimport { createI18n } from './i18n'\n\nfunction vueComponent<P extends object>(config: ModuleDefined & {\n  url?: string,\n  watchKeys?: string[],\n  onMounted?: () => void,\n}) {\n  const {\n    name,\n    module,\n    url,\n    watchKeys,\n    onMounted,\n  } = config\n  const storeKeys = (watchKeys || Object.keys(getStore()))\n\n  const V: FC<CreateComponentProps<P> & ComponentDefaultProps> = (props) => {\n    const store = useStore(...storeKeys)\n\n    const vueRef = useRef<typeof Vue>()\n    const isVueMounted = useRef(false)\n    const errorRef = useRef<Error | ve>()\n    const isUnMountedRef = useRef(false)\n    const ComponentNodeRef = useRef<RequiredComponent>()\n    const selfRef = useRef(getSelfInfo({ name, module, url }))\n\n    const containerDivRef = useRef<HTMLDivElement | null>(null)\n    const propsReactiveRef = useRef<{ value: ObjectRecord }>()\n    const storeReactiveRef = useRef<{ value: ObjectRecord }>()\n    const unMountVue = useRef<() => void>()\n    const unSubscribeMessageRef = useRef<() => void>()\n    const updateVueComponentRef = useRef<() => void>()\n\n    const [componentReady, setComponentReady] = useState(false)\n    const [isError, setIsError] = useState(false)\n\n    const LoaderNode = connector.getLoaderComponent()\n    const { $silent, $componentProps } = props\n\n    const mountVue = useCallback(() => {\n      const $logger = createLogger({ name, module })\n      const $dispatch = createDispatch({ name, module })\n      const $postMessage = createPostMessage({ name, module })\n      const $t = createI18n({ name, module }, () => {\n        updateVueComponentRef.current?.()\n      })\n\n      propsReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...$componentProps })\n      storeReactiveRef.current = vueRef.current!.ref<ObjectRecord>({ ...store })\n\n      const vueApp = vueRef.current!.createApp({\n        setup() {\n          const renderKey = vueRef.current!.ref(0)\n          updateVueComponentRef.current = () => {\n            renderKey.value += 1\n          }\n          return {\n            key: renderKey,\n          }\n        },\n\n        errorCaptured(e) {\n          const error = e as Error\n          errorRef.current = error.message?.includes('https://react')\n            ? new VariousError({\n              originalError: new Error('not a valid Vue component'),\n              name,\n              module,\n              type: 'INVALID_COMPONENT',\n            })\n            : error\n          setIsError(true)\n        },\n\n        render() {\n          return vueRef.current!.h(ComponentNodeRef.current as any, {\n            ...propsReactiveRef.current!.value,\n            various: {\n              $dispatch,\n              $logger,\n              $postMessage,\n              $t,\n              $store: storeReactiveRef.current!.value,\n              $self: selfRef.current,\n            },\n            // eslint-disable-next-line react/no-this-in-sfc\n            key: this.key,\n          })\n        },\n      })\n\n      vueApp.mount(containerDivRef.current!)\n      isVueMounted.current = true\n      unMountVue.current = () => vueApp.unmount()\n    }, [$componentProps, store])\n\n    const mountComponent = useCallback(async () => {\n      try {\n        const vue = await createModule<typeof Vue>({ name: 'vue' })\n        vueRef.current = vue\n\n        const componentNode = await createModule<RequiredComponent>({ name, module, url }, false)\n\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        await checkVueComponent(componentNode, { name, module })\n\n        updateMountedComponent({ name, module })\n\n        unSubscribeMessageRef.current = parseComponentActions({\n          componentNode,\n          name,\n          module,\n          type: 'vue3',\n          i18nUpdate() {\n            updateVueComponentRef.current?.()\n          },\n        })\n\n        ComponentNodeRef.current = componentNode\n\n        setTimeout(mountVue)\n        setComponentReady(true)\n\n        onMounted?.()\n      } catch (e) {\n        if (isUnMountedRef.current) {\n          return\n        }\n\n        errorRef.current = e as Error\n        setComponentReady(true)\n        setIsError(true)\n      }\n    }, [mountVue])\n\n    useEffect(() => () => {\n      errorRef.current = undefined\n      ComponentNodeRef.current = undefined\n      isUnMountedRef.current = true\n      updateUnMountComponent({ name, module })\n      unMountVue.current?.()\n      unSubscribeMessageRef.current?.()\n      isVueMounted.current = false\n    }, [])\n\n    useEffect(() => {\n      if (isVueMounted.current) {\n        return\n      }\n      mountComponent()\n    }, [mountComponent])\n\n    useEffect(() => {\n      if (propsReactiveRef.current) {\n        propsReactiveRef.current.value = { ...$componentProps }\n      }\n    }, [$componentProps])\n\n    useEffect(() => {\n      if (storeReactiveRef.current) {\n        storeReactiveRef.current.value = { ...store }\n      }\n    }, [store])\n\n    if (isError) {\n      throw errorRef.current\n    }\n\n    return (\n      <>\n        {\n          !componentReady && !$silent && !isModuleLoaded(name)\n            ? (\n              <LoaderNode\n                $self={selfRef.current}\n                $store={store}\n              />\n            )\n            : null\n        }\n        <div\n          className={`various-component-${getNameWithModule({ name, module })}`}\n          ref={containerDivRef}\n        />\n      </>\n    )\n  }\n\n  V.displayName = getNameWithModule({ name, module })\n\n  const VueComponent: FC<\n    CreateComponentProps<P> & ComponentDefaultProps\n  > = (props) => (<V {...props} />)\n\n  VueComponent.displayName = 'various-vue-component'\n\n  return VueComponent\n}\n\nexport default vueComponent\n","import React from 'react'\nimport { createComponent as cc, ComponentDefaultProps } from '@variousjs/various'\nimport createReactComponent from './react-component'\nimport createVueComponent from './vue-component'\nimport ErrorBoundary from './error-boundary'\nimport { CreateComponentProps } from '../types'\n\nconst createComponent: typeof cc<any, any> = (config, storeKeys) => {\n  const {\n    name,\n    module,\n    url,\n    type = 'react',\n  } = config\n\n  const C = (type === 'vue3' ? createVueComponent : createReactComponent)({\n    name,\n    module,\n    url,\n    watchKeys: storeKeys as string[],\n  })\n\n  const component = (props: ComponentDefaultProps) => {\n    const { $silent, $ref, ...rest } = props || {}\n    const nextProps = {\n      $componentProps: rest, $silent, $ref,\n    } as ComponentDefaultProps & CreateComponentProps<any>\n    return (\n      <ErrorBoundary name={name} module={module} url={url}>\n        <C {...nextProps} />\n      </ErrorBoundary>\n    )\n  }\n\n  component.displayName = 'various-creator'\n  return component\n}\n\nexport default createComponent\n","import React from 'react'\nimport { createRoot } from 'react-dom/client'\nimport { renderComponent as rc } from '@variousjs/various'\nimport createReactComponent from './react-component'\nimport createVueComponent from './vue-component'\nimport { onError, VariousError } from './helper'\nimport ErrorBoundary from './error-boundary'\n\nconst renderComponent: typeof rc = ({\n  name,\n  module,\n  url,\n  target,\n  props,\n  type = 'react',\n  renderNode,\n  onMounted,\n}) => {\n  const C = (type === 'vue3' ? createVueComponent : createReactComponent)({\n    name,\n    module,\n    url,\n    onMounted,\n  })\n\n  try {\n    const root = createRoot(target as Element)\n    const { $silent, $ref, ...rest } = props || {}\n    const nextProps: any = { $componentProps: rest, $silent, $ref }\n    const node = (\n      <ErrorBoundary name={name} module={module} url={url}>\n        <C {...nextProps} />\n      </ErrorBoundary>\n    )\n\n    root.render(renderNode ? renderNode(node) : node)\n\n    return () => new Promise<void>((resolve) => {\n      setTimeout(() => {\n        root.unmount()\n        resolve()\n      })\n    })\n  } catch (e) {\n    onError(new VariousError({\n      name,\n      module,\n      type: 'SCRIPT_ERROR',\n      originalError: e as Error,\n    }))\n    return () => Promise.resolve()\n  }\n}\n\nexport default renderComponent\n","import React, { Component } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport { App, Config } from '@variousjs/various'\nimport { createStore } from './store'\nimport {\n  MOUNTED_COMPONENTS_KEY,\n  DEPENDENCIES_KEY,\n  ROOT,\n  MESSAGE_KEY,\n  CONFIG_KEY,\n} from './config'\nimport connector from './connector'\nimport { createI18nConfig } from './i18n'\nimport { Container as ContainerNode } from './default-component'\nimport ErrorBoundary from './error-boundary'\nimport { Store } from '../types'\n\nexport { default as Nycticorax } from 'nycticorax'\n\nexport { getUserStore as getStore } from './store'\nexport { default as createDispatch } from './dispatch'\nexport { createPostMessage } from './message'\nexport { default as createLogger } from './logger'\n\nexport {\n  getConfig,\n  preloadModules,\n  isModuleLoaded,\n  getMountedComponents,\n  onComponentMounted,\n  defineDependencies,\n  removeLoadedModules,\n} from './helper'\n\nexport { default as createModule } from './create-module'\nexport { default as createComponent } from './create-component'\nexport { default as renderComponent } from './render-component'\n\n// eslint-disable-next-line no-undef\nexport const version = VERSION\n\nexport default (config: Config & App<Store>) => {\n  const {\n    dependencies,\n    root,\n    store = {},\n    actions = {},\n    Loader: LoaderComponent,\n    Error: ErrorComponent,\n    Container: ContainerComponent = ContainerNode,\n    middlewares,\n    i18n,\n    ...rest\n  } = config\n\n  if (middlewares) {\n    connector.setMiddlewares(middlewares)\n  }\n\n  connector.setStoreActions(actions)\n\n  if (LoaderComponent) {\n    connector.setLoaderComponent(LoaderComponent)\n  }\n  if (ErrorComponent) {\n    connector.setErrorComponent(ErrorComponent)\n  }\n\n  createStore({\n    ...store,\n    [MOUNTED_COMPONENTS_KEY]: [],\n    [CONFIG_KEY]: rest,\n    [DEPENDENCIES_KEY]: dependencies,\n    [MESSAGE_KEY]: null,\n  })\n\n  ContainerComponent.displayName = 'various-container'\n\n  class R extends Component<{}, { isError: boolean }> {\n    static displayName = 'various-app'\n\n    componentDidMount() {\n      createI18nConfig(i18n)\n    }\n\n    render() {\n      return (\n        <ErrorBoundary name=\"app\" url={dependencies.app}>\n          <ContainerComponent />\n        </ErrorBoundary>\n      )\n    }\n  }\n\n  createRoot(document.querySelector(root || ROOT) as Element).render(<R />)\n}\n"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE__216__","e","self","t","r","d","default","c","s","o","n","i","WeakMap","has","get","Array","isArray","set","Reflect","ownKeys","constructor","Z","this","listeners","reduce","state","forEach","push","filter","emits","trigger","clearTimeout","timer","setTimeout","getStore","emit","length","u","key","newValue","oldValue","onStateChange","onChange","RegExp","source","flags","valueOf","Object","prototype","toString","keys","hasOwnProperty","call","defineProperty","value","enumerable","configurable","writable","__esModule","a","super","subscribe","Component","props","unsubscribe","setState","componentWillUnmount","render","createElement","getOwnPropertyNames","includes","useState","useLayoutEffect","__WEBPACK_EXTERNAL_MODULE__959__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","obj","prop","Symbol","toStringTag","createStore","connect","dispatch","useStore","Nycticorax","getUserStore","globalStore","store","MOUNTED_COMPONENTS_KEY","MESSAGE_KEY","CONFIG_KEY","DEPENDENCIES_KEY","VUE_FUNCTION_OPTIONS","BASE_DEPENDENCIES","Loader","React","Error","$error","$reload","type","message","onClick","Container","logger","args","middlewares","connector","getMiddlewares","canLog","onLog","color","info","warn","error","level","params","getNameWithModule","window","console","moduleDefined","VariousError","originalError","onError","createPostMessage","async","event","createLogger","next","onMessage","check","timestamp","Date","createI18nConfig","method","callback","i18nConfig","then","setI18nConfig","loading","lngStoreKey","resources","setGlobalI18nConfig","res","locale","catch","name","createI18n","updater","ctx","defaultString","getI18nConfig","getGlobalI18nConfig","defaultText","resource","text","arg","regex","replace","update","config","getUrlHash","url","hasModule","modules","some","preloadModules","names","Promise","resolve","reject","requirejs","removeLoadedModules","undef","defineDependencies","deps","dependencies","paths","isModuleLoaded","specified","contexts","_","defined","getMountedComponents","onComponentMounted","every","m","unSubscribe","mountedModules","resetDependencyConfig","path","registry","getConfig","data","parseComponentActions","componentNode","i18nUpdate","actions","onMessageAction","i18nAction","setComponentActions","v","createOnMessage","updateMountedComponent","mountedComponents","updateUnMountComponent","item","deleteComponentActions","getSelfInfo","loaderComponent","errorComponent","storeActions","componentActions","i18nConfigs","setMiddlewares","globalI18nConfig","getComponentActions","setStoreActions","getStoreActions","setLoaderComponent","getLoaderComponent","setErrorComponent","getErrorComponent","ErrorBoundary","static","hasError","componentDidCatch","$self","reload","ErrorNode","$store","children","action","onDispatch","target","storeAction","errorMessage","componentAction","createModule","logError","loadStart","logOnError","C","loadEnd","onLoad","beenLoaded","defaultModule","actualModule","requireModule","requireModules","errorType","_extends","assign","bind","arguments","apply","watchKeys","onMounted","storeKeys","R","componentReady","isError","unSubscribeMessage","componentDidMount","mountComponent","ComponentNode","isUnMounted","component","reslove","$$typeof","isReactComponent","displayName","forceUpdate","$postMessage","$dispatch","createDispatch","$t","$logger","LoaderNode","$silent","$componentProps","$ref","ref","Connected","V","vueRef","useRef","isVueMounted","errorRef","isUnMountedRef","ComponentNodeRef","selfRef","containerDivRef","propsReactiveRef","storeReactiveRef","unMountVue","unSubscribeMessageRef","updateVueComponentRef","setComponentReady","setIsError","mountVue","useCallback","current","vueApp","createApp","setup","renderKey","errorCaptured","h","various","mount","unmount","vue","versionRegex","Vue","test","version","checkVueComponent","useEffect","className","VueComponent","createComponent","createVueComponent","createReactComponent","rest","nextProps","renderComponent","renderNode","root","createRoot","node","VERSION","LoaderComponent","ErrorComponent","ContainerComponent","ContainerNode","i18n","app","document","querySelector"],"sourceRoot":""}